{"version":3,"sources":["views/conponents/ImgDialog/cropImg.js","views/conponents/ImgDialog/index.js","views/conponents/ActionButton/ActionButton.js","views/eshop/ProductList/ProductList.js"],"names":["createImage","url","Promise","resolve","reject","image","Image","addEventListener","error","setAttribute","src","getCroppedImg","_x","_x2","_getCroppedImg","apply","this","arguments","_callee","imageSrc","pixelCrop","canvas","regenerator_default","a","wrap","_context","prev","next","sent","document","createElement","width","height","getContext","drawImage","x","y","abrupt","toDataURL","stop","readFile","file","reader","FileReader","result","readAsDataURL","ImgDialog","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onCropChange","crop","setState","onCropComplete","croppedArea","croppedAreaPixels","console","log","onZoomChange","zoom","onFileChange","_ref","asyncToGenerator","mark","e","imageDataUrl","target","files","length","showCroppedImage","_callee2","croppedImage","_context2","state","onFinish","toggleEditor","mode","editing","react_default","Modal","isOpen","toggle","bind","className","ModalHeader","title","ModalBody","style","type","onChange","dist_default","aspect","ModalFooter","Button","color","onClick","_this2","renderEditor","href","preventDefault","Component","require","doBShopTransaction","loadProductList","getIssueReason","loadIssueTransactions","loadProductDetails","shareDecrypt","shareEncrypt","loadEncryptedInfo","moment","ActionButton","getShareHost","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","product","productDetail","winner","paying","confirm","day7refund","issue","drop","selectIssueAction","selectActionTitle","issueReason","issues","issuePage","renderDesposit","fee","deadline","account","loadLocalAccount","secret","sec","rsId","calcAccountId","userSec","dialogMsg","togglePay10p","decrypt","ok","infos","infoBlocks","decrypted","sending","voteHelp","_this3","votes","rejectConfirm","status","react__WEBPACK_IMPORTED_MODULE_5___default","reactstrap__WEBPACK_IMPORTED_MODULE_6__","pay10P","toggleDrop","toggleDecrypt","toggleSending","toggleConfirm","toggle7dayRefund","toggleIssue","toggleRejectConfirm","toggleVotes","toggleHelp","value","sellerRefund","issueNote","substring","buyerRefund","address","updateAddressBlock","contact","phone","clear","JSON","stringify","pk","seller","addressHash","simpleHash","addressBlock","transactionId","tracking","trackingHash","trackingBlock","reactstrap__WEBPACK_IMPORTED_MODULE_11__","_DepositDialog_DepositDialog__WEBPACK_IMPORTED_MODULE_32__","_this4","peer","createPeerId","hash","data","action","amount","dealine","sid","accountId","aid","msg","saveUserSec","success","code","_this5","info","Buffer","toString","saction","_this6","_this7","reason","wp","sp","_this8","_this9","_this10","winnerId","reactstrap__WEBPACK_IMPORTED_MODULE_19__","reactstrap__WEBPACK_IMPORTED_MODULE_20__","reactstrap__WEBPACK_IMPORTED_MODULE_21__","price","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","_BtbSecret_BtbSecret__WEBPACK_IMPORTED_MODULE_29__","onSecret","renderFeeAndDeadline","reactstrap__WEBPACK_IMPORTED_MODULE_22__","renderdialogMsg","reactstrap__WEBPACK_IMPORTED_MODULE_23__","hidden","doDrop","senderId","doRejectConfirm","map","res","btime","time","format","luckey","_AccountDialog_AccountDialog__WEBPACK_IMPORTED_MODULE_30__","from","addr","querySelector","focus","select","successful","execCommand","innerHTML","_this11","link","getCurrentHost","reactstrap__WEBPACK_IMPORTED_MODULE_7__","rows","id","copyAddress","_this12","reactstrap__WEBPACK_IMPORTED_MODULE_8__","hover","bordered","striped","responsive","size","renderIssueTransactions","reactstrap__WEBPACK_IMPORTED_MODULE_14__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","reactstrap__WEBPACK_IMPORTED_MODULE_16__","previous","tag","preIssuePage","active","nextIssuePage","_this13","_this14","doWinnerConfirm","_this15","totalAmount","guarantee","t1","t2","t3","reactstrap__WEBPACK_IMPORTED_MODULE_24__","reactstrap__WEBPACK_IMPORTED_MODULE_25__","caret","reactstrap__WEBPACK_IMPORTED_MODULE_26__","reactstrap__WEBPACK_IMPORTED_MODULE_27__","htmlFor","reactstrap__WEBPACK_IMPORTED_MODULE_17__","addonType","reactstrap__WEBPACK_IMPORTED_MODULE_18__","updateSellerRefund","placeholder","updateBuyerRefund","name","updateIssueNote","doIssue","updateTracking","do7dayrefund","fholder","_PopHint_PopHint__WEBPACK_IMPORTED_MODULE_31__","text","content","updateFee","renderDeadline","_this16","forEach","block","push","_this17","idx","rec","txt","renderEncryptedInfos","doDecrypt","doSending","payId","updateContact","updatePhone","updateAddress","renderPayActionButton","doPaying","renderActionButtons","renderPayingProductDialog","renderDropDialog","renderDeliverProductDialog","renderWinnerConfirmedProductDialog","renderWinner7dayRefundDialog","renderIssueDialog","renderRejectConfirmDialog","renderIssueVotes","renderInviteVotes","renderDecryptDialog","get","getTorrentHash","loadProduct","getProductStatus","loadJoinTransactions","getProductNextStep","ProductList","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","list","page","joinsPage","addProduct","join","detailProduct","detail","activeTab","detailTab","joins","showAccount","filterValue","modules","toolbar","header","font","align","background","indent","clipboard","matchVisual","window","location","query","indexOf","substr","setTimeout","onProductList","expire","quality","tags","contract","joinAmount","productId","b64","avatar","opts","getFileHost","body","json","concat","err","parseInt","str","jsonHex","digest","productJson","uploadThumbnail","uploadNews","newsId","react__WEBPACK_IMPORTED_MODULE_6___default","togglePublishProduct","reactstrap__WEBPACK_IMPORTED_MODULE_28__","reactstrap__WEBPACK_IMPORTED_MODULE_29__","_conponents_BtbSecret_BtbSecret__WEBPACK_IMPORTED_MODULE_45__","updateTitle","updateTags","_conponents_PopHint_PopHint__WEBPACK_IMPORTED_MODULE_44__","updatePrice","updateGuarantee","_conponents_ImgDialog__WEBPACK_IMPORTED_MODULE_48__","img","split","reactstrap__WEBPACK_IMPORTED_MODULE_32__","react_quill__WEBPACK_IMPORTED_MODULE_41___default","handleChange","reactstrap__WEBPACK_IMPORTED_MODULE_30__","publishProduct","_conponents_DepositDialog_DepositDialog__WEBPACK_IMPORTED_MODULE_47__","filterOption","filterMsg","filterOptions","op","index","setFilter","toggleJoin","toggleDetail","tab","_conponents_AccountDialog__WEBPACK_IMPORTED_MODULE_43__","frameborder","renderJoinTransactions","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","preJoinsPage","nextJoinsPage","d","Date","setTime","toLocaleString","count","joinsCount","reactstrap__WEBPACK_IMPORTED_MODULE_33__","tabs","reactstrap__WEBPACK_IMPORTED_MODULE_34__","reactstrap__WEBPACK_IMPORTED_MODULE_35__","classnames","onDetailTabClicked","pill","renderIssueVoteTab","renderProductTabs","reactstrap__WEBPACK_IMPORTED_MODULE_36__","_conponents_ActionButton_ActionButton__WEBPACK_IMPORTED_MODULE_46__","voter","dueTime","createTime","due","reactstrap__WEBPACK_IMPORTED_MODULE_39__","amout","PopoverItem","renderPay10pbutton","renderIssueVoteList","renderProductDetail","renderJoinButton1","joinProduct","priceHolder","joinContent","updateJoinAmount","renderActionButton","doJoin","_this18","closed","nxt","showDetailDialog","_this19","renderJoinButton","_this20","upateFilterValue","filterBlocks","renderProductList","rederAddProductDialog","rederJoinProductDialog","renderProductDetailDialog","prePage","nextPage","_this21","onTabClicked","renderList","_this22","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__","popoverOpen","stepInfo","steps","step","nxtUi","placement","renderSteps"],"mappings":"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","file":"static/js/10.db0f71a4.chunk.js","sourcesContent":["const createImage = url =>\r\n  new Promise((resolve, reject) => {\r\n    const image = new Image()\r\n    image.addEventListener('load', () => resolve(image))\r\n    image.addEventListener('error', error => reject(error))\r\n    image.setAttribute('crossOrigin', 'anonymous') // needed to avoid cross-origin issues on CodeSandbox\r\n    image.src = url\r\n  })\r\n\r\n/**\r\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\r\n * @param {File} image - Image File url\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\r\n */\r\nexport default async function getCroppedImg(imageSrc, pixelCrop) {\r\n  const image = await createImage(imageSrc)\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = pixelCrop.width\r\n  canvas.height = pixelCrop.height\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  ctx.drawImage(\r\n    image,\r\n    pixelCrop.x,\r\n    pixelCrop.y,\r\n    pixelCrop.width,\r\n    pixelCrop.height,\r\n    0,\r\n    0,\r\n    pixelCrop.width,\r\n    pixelCrop.height\r\n  )\r\n\r\n  // As Base64 string \r\n  // return canvas.toDataURL('image/jpeg');\r\n\r\n  // As a blob\r\n  return new Promise((resolve, reject) => {\r\n    /*\r\n    canvas.toBlob(file => {\r\n      resolve(URL.createObjectURL(file))\r\n    }, 'image/jpeg')\r\n  */\r\n    let img = canvas.toDataURL('image/jpeg', 0.1)\r\n    resolve(img)\r\n  })\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Button } from 'reactstrap'\r\nimport Cropper from 'react-easy-crop'\r\nimport getCroppedImg from './cropImg'\r\nfunction readFile(file) {\r\n    return new Promise(resolve => {\r\n        const reader = new FileReader()\r\n        reader.addEventListener('load', () => resolve(reader.result), false)\r\n        reader.readAsDataURL(file)\r\n    })\r\n}\r\n\r\nexport default class ImgDialog extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            mode: 'simple', editing: false, imageSrc: null,\r\n            crop: { x: 0, y: 0 },\r\n            zoom: 1,\r\n        }\r\n    }\r\n\r\n    toggleEditor() {\r\n        this.setState({ editing: !this.state.editing, imageSrc: null })\r\n    }\r\n\r\n    onCropChange = crop => {\r\n        this.setState({ crop })\r\n    }\r\n\r\n    onCropComplete = (croppedArea, croppedAreaPixels) => {\r\n        console.log(croppedArea, croppedAreaPixels)\r\n        this.setState({ croppedAreaPixels })\r\n    }\r\n\r\n    onZoomChange = zoom => {\r\n        this.setState({ zoom })\r\n    }\r\n\r\n    onFileChange = async e => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const imageDataUrl = await readFile(e.target.files[0])\r\n            this.setState({\r\n                imageSrc: imageDataUrl,\r\n                crop: { x: 0, y: 0 },\r\n                zoom: 1,\r\n            })\r\n        }\r\n    }\r\n\r\n    showCroppedImage = async () => {\r\n        const croppedImage = await getCroppedImg(\r\n            this.state.imageSrc,\r\n            this.state.croppedAreaPixels\r\n        )\r\n        this.setState({ croppedImage })\r\n        this.props.onFinish(this.state.croppedImage)\r\n        this.toggleEditor()\r\n    }\r\n\r\n    renderEditor() {\r\n        return (<Modal isOpen={this.state.editing} toggle={this.toggleEditor.bind(this)}\r\n            className={'modal-info ' + this.props.className}>\r\n            <ModalHeader toggle={this.toggleEditor.bind(this)}>{this.props.title}</ModalHeader>\r\n            <ModalBody>\r\n                <div style={{ width: 200, height: 300 }}>\r\n                    <input type=\"file\" onChange={this.onFileChange} />\r\n                    {this.state.imageSrc && (\r\n                        <Cropper\r\n                            image={this.state.imageSrc}\r\n                            crop={this.state.crop}\r\n                            zoom={this.state.zoom}\r\n                            aspect={this.state.aspect}\r\n                            onCropChange={this.onCropChange}\r\n                            onCropComplete={this.onCropComplete}\r\n                            onZoomChange={this.onZoomChange}\r\n                        />)}\r\n                </div>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n                <Button color=\"danger\" onClick={this.showCroppedImage.bind(this)}></Button>\r\n            </ModalFooter>\r\n        </Modal>)\r\n    }\r\n\r\n    render() {\r\n        return (<div>\r\n            {this.renderEditor()}\r\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); this.toggleEditor() }}>{this.props.title}</a>\r\n            {this.state.croppedImage && (<img style={{ width: 50, height: 50 }} src={this.state.croppedImage} ></img>)}\r\n        </div>)\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { Button, Input, Table, CardHeader, Popover, PopoverBody, PopoverHeader } from 'reactstrap';\r\nimport { loadAccountTransactions, loadAutoTransactions } from '../../eshop/eshop.js'\r\nimport classnames from 'classnames';\r\nimport { FormGroup, InputGroupText, InputGroup, InputGroupAddon, Label, PaginationItem, PaginationLink, Pagination } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Alert, DropdownToggle, Dropdown, DropdownItem, DropdownMenu } from 'reactstrap'\r\nimport { getCurrentHost, calcAccountId, createPeerId, saveUserSec, simpleHash, loadLocalAccount, getShareHost } from '../../ggv/js/gegeUtil'\r\nimport BtbSecret from '../BtbSecret/BtbSecret'\r\nimport AccountDialog from '../AccountDialog/AccountDialog'\r\nimport PopHint from '../PopHint/PopHint'\r\nimport DepositDialog from '../DepositDialog/DepositDialog'\r\nconst { loadProductList, doBShopTransaction, getIssueReason, loadProductDetails, loadIssueTransactions, shareDecrypt, shareEncrypt, loadEncryptedInfo } = require('../../eshop/eshop')\r\nconst moment = require('moment')\r\nlet host = getShareHost();\r\nconst get = require('simple-get')\r\n\r\nclass ActionButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      product: this.props.product, productDetail: this.props.productDetail,\r\n      winner: this.props.winner, paying: false, confirm: false, day7refund: false,\r\n      issue: false, drop: false, selectIssueAction: false, selectActionTitle: '',\r\n      issueReason: 0, issues: [], issuePage: 1, renderDesposit: false\r\n    };\r\n    this.fee = '1'\r\n    this.deadline = 5\r\n  }\r\n\r\n  componentDidMount() {\r\n    let account = loadLocalAccount();\r\n    if (account && account.secret) {\r\n      this.secret = account.secret;\r\n      this.account = account;\r\n    }\r\n  }\r\n\r\n  onSecret(sec) {\r\n    if (sec) {\r\n      this.secret = sec\r\n      let rsId = calcAccountId(this.userSec);\r\n      this.setState({ rsId: rsId })\r\n    }\r\n  }\r\n\r\n  togglePay10p() {\r\n    this.setState({\r\n      paying: !this.state.paying, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  pay10P() {\r\n    //this.toggleDetail()\r\n    this.togglePay10p()\r\n  }\r\n\r\n  toggleDrop() {\r\n    this.setState({\r\n      drop: !this.state.drop, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  toggleDecrypt() {\r\n\r\n    if (!this.state.decrypt && this.account) {\r\n      loadEncryptedInfo(this.state.product, this.account.rsId, ((ok, infos) => {\r\n        if (ok && infos) {\r\n          this.setState({ infoBlocks: infos })\r\n        }\r\n      }).bind(this));\r\n    } else {\r\n      this.setState({ decrypted: null })\r\n    }\r\n    //\r\n    let dialogMsg = '';\r\n    if (!this.account) {\r\n      dialogMsg = ''\r\n    }\r\n    this.setState({\r\n      decrypt: !this.state.decrypt, dialogMsg: dialogMsg\r\n    });\r\n  }\r\n\r\n  toggleSending() {\r\n    this.setState({\r\n      sending: !this.state.sending, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  toggleIssue() {\r\n    this.setState({\r\n      issue: !this.state.issue, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  toggleHelp() {\r\n    this.setState({\r\n      voteHelp: !this.state.voteHelp, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  toggleVotes() {\r\n    if (!this.state.votes) {\r\n      loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n        if (ok && issues)\r\n          this.setState({ issues })\r\n      })\r\n    }\r\n    this.setState({\r\n      votes: !this.state.votes, dialogMsg: '', issuePage: 1\r\n    });\r\n\r\n  }\r\n\r\n  toggleRejectConfirm() {\r\n    this.setState({\r\n      rejectConfirm: !this.state.rejectConfirm, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  toggle7dayRefund() {\r\n    this.setState({\r\n      day7refund: !this.state.day7refund, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  renderActionButtons() {\r\n    let debug = false\r\n    if (debug) {\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.debug.bind(this)}>debug</Button>\r\n        <Button color=\"danger\" onClick={this.pay10P.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleDrop.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleSending.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggle7dayRefund.bind(this)}>8</Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleRejectConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleVotes.bind(this)}> </Button>\r\n        <Button color=\"danger\" onClick={this.toggleConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleRejectConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleDecrypt.bind(this)}></Button>\r\n      </div>)\r\n    }\r\n    let status = this.state.product.status;\r\n    if (status == 3)\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.pay10P.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleDrop.bind(this)}></Button>\r\n      </div>)\r\n    if (status == 4)\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.toggleDecrypt.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleSending.bind(this)}></Button>\r\n      </div>)\r\n    if (status == 5)\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.toggleDecrypt.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggle7dayRefund.bind(this)}>8</Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n      </div>)\r\n    if (status == 6)\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.toggleDecrypt.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleRejectConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n      </div>)\r\n    if (status == 10)\r\n      return (<div>\r\n        <Button color=\"danger\" onClick={this.toggleVotes.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleHelp.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.toggleRejectConfirm.bind(this)}></Button>\r\n      </div>)\r\n    return null;\r\n  }\r\n\r\n  updateFee(e) {\r\n    if (e && e.target) {\r\n      this.fee = e.target.value;\r\n      if (this.fee.length == 0) {\r\n        this.fee = '1';\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSellerRefund(e) {\r\n    if (e && e.target) {\r\n      this.sellerRefund = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateIssueNote(e) {\r\n    if (e && e.target) {\r\n      this.issueNote = e.target.value;\r\n      if (this.issueNote.length > 100) {\r\n        this.issueNote = this.issueNote.substring(0, 99);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateBuyerRefund(e) {\r\n    if (e && e.target) {\r\n      this.buyerRefund = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateDeadline(e) {\r\n    if (e && e.target) {\r\n      this.deadline = e.target.value;\r\n      if (this.deadline.length == 0) {\r\n        this.deadline = 5;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  updateAddress(e) {\r\n    if (e && e.target) {\r\n      this.address = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n\r\n  updateProductAddress(e) {\r\n    if (e && e.target) {\r\n      this.address = e.target.value;\r\n    }\r\n  }\r\n  updateContact(e) {\r\n    if (e && e.target) {\r\n      this.contact = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n  updatePhone(e) {\r\n    if (e && e.target) {\r\n      this.phone = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n\r\n  updateAddressBlock() {\r\n    let clear = ':' + this.contact + ' :' + this.address + ' :' + this.phone;\r\n    clear = JSON.stringify(clear);\r\n    let pk = this.state.productDetail.seller;\r\n    let addressHash = simpleHash(clear);\r\n    let addressBlock = shareEncrypt(this.secret, pk, this.state.product.transactionId, clear);\r\n    this.setState({ addressBlock: addressBlock, addressHash: addressHash });\r\n  }\r\n\r\n  updateTracking(e) {\r\n    if (e && e.target) {\r\n      let tracking = e.target.value;\r\n      //get winner pk\r\n      let trackingHash = simpleHash(tracking);\r\n      let pk = this.state.productDetail.winner.pk;\r\n      let trackingBlock = shareEncrypt(this.secret, pk, this.state.product.transactionId, tracking);\r\n      this.setState({ trackingBlock: trackingBlock, trackingHash: trackingHash });\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    let pk = ''\r\n    let nonce = ''\r\n    let block = ''\r\n    let clear = shareDecrypt(this.secret, pk, nonce, block);\r\n    console.log(clear)\r\n  }\r\n\r\n  renderdialogMsg() {\r\n    if (this.state.renderDesposit) {\r\n      return (<div>\r\n        <Label>{this.state.dialogMsg}</Label>\r\n        <DepositDialog />\r\n      </div>)\r\n    } else\r\n      if (this.state.dialogMsg) {\r\n        return (<Label>{this.state.dialogMsg}</Label>)\r\n      }\r\n    return null;\r\n  }\r\n\r\n\r\n  doPaying() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    let hash = this.state.addressHash;\r\n    let addressBlock = this.state.addressBlock;\r\n    let data = {\r\n      action: 'transaction', type: 'sAccept', amount: '0', hash: hash,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, pk: peer.pk, accountId: peer.aid,\r\n      addressBlock: addressBlock\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  do7dayrefund() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    let info = this.state.trackingBlock;\r\n    let hash = simpleHash(info)\r\n    info = new Buffer(info).toString('base64')\r\n    let data = {\r\n      action: 'transaction', type: 'sAction', hash, info: info, accountId: peer.aid,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, saction: '20'\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n\r\n  doDrop() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    let hash = '0';\r\n    let data = {\r\n      action: 'transaction', type: 'sAction', hash: hash, accountId: peer.aid,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, saction: '4'\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  doIssue() {\r\n    if (this.state.issueReason == 0) {\r\n      this.setState({ dialogMsg: 'Choose()' })\r\n      return;\r\n    }\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    // 1 not receive,2 not sent back.3 vote\r\n    let reason = this.state.issueReason;\r\n    let wp = this.buyerRefund;\r\n    let sp = this.sellerRefund;\r\n    let info = this.issueNote;\r\n    let hash = 0;\r\n    if (info && info.length > 0) {\r\n      hash = simpleHash(info);\r\n      info = new Buffer(info).toString('base64')\r\n    }\r\n    let data = {\r\n      action: 'transaction', type: 'issue', hash: hash, info: info, pk: peer.pk,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, reason: reason,\r\n      wp: wp, sp: sp\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  doRejectConfirm() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    let data = {\r\n      action: 'transaction', type: 'sAction', accountId: peer.aid, pk: peer.pk,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, saction: '21'\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else {\r\n          if (msg && !msg.ok && '1001' === msg.code) {\r\n            this.setState({ dialogMsg: '', renderDesposit: true })\r\n          } else\r\n            this.setState({ dialogMsg: '' })\r\n        }\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  doSending() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    let info = this.state.trackingBlock;\r\n    let hash = this.state.trackingHash;\r\n    info = new Buffer(info).toString('base64')\r\n    let data = {\r\n      action: 'transaction', type: 'sAction', accountId: peer.aid, pk: peer.pk,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, saction: '2', info: info, hash\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  doWinnerConfirm() {\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    //check peer is winner\r\n    let data = {\r\n      action: 'transaction', type: 'sAction', accountId: peer.aid,\r\n      fee: this.fee, dealine: this.deadline, sid: transactionId, saction: '3'\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',()', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  toggleConfirm() {\r\n    this.setState({\r\n      confirm: !this.state.confirm, dialogMsg: ''\r\n    });\r\n  }\r\n\r\n  renderDropDialog() {\r\n    let winnerId = this.state.winner.accountId\r\n    return (<Modal isOpen={this.state.drop} toggle={this.toggleDrop.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleDrop.bind(this)}>{winnerId}</ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline(1)}\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small>,.</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleDrop.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.doDrop.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderRejectConfirmDialog() {\r\n    let senderId = this.state.product.senderId;\r\n    return (<Modal isOpen={this.state.rejectConfirm} toggle={this.toggleRejectConfirm.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleRejectConfirm.bind(this)}>{senderId}</ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline()}\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small>..</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleRejectConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.doRejectConfirm.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderIssueTransactions() {\r\n    let issues = this.state.issues;\r\n    if (!issues)\r\n      return null;\r\n    let content = issues.map(((res) => {\r\n      let btime = moment(res.time).format('MM-DD HH:mm')\r\n      let color = 'black'\r\n      if (res.luckey) {\r\n        color = 'red';\r\n      }\r\n      return (<tr>\r\n        <td><AccountDialog rsId={res.from} /></td>\r\n        <td style={{ color: color }}>{res.wp}%</td>\r\n        <td style={{ color: color }}>{res.sp}%</td>\r\n        <td>{new Buffer(res.info, 'base64').toString()}</td>\r\n        <td>{btime}</td>\r\n      </tr>)\r\n    }).bind(this));\r\n\r\n    return content;\r\n  }\r\n\r\n  copyAddress() {\r\n    let addr = document.querySelector('#invite_vote_url');\r\n    addr.focus()\r\n    addr.select()\r\n    var successful = document.execCommand('copy');\r\n    let msg = document.querySelector('#msg_invite');\r\n    if (successful) {\r\n      msg.innerHTML = 'OK.'\r\n    } else {\r\n      msg.innerHTML = ''\r\n    }\r\n  }\r\n\r\n  renderInviteVotes() {\r\n    let winnerId = this.state.winner.accountId\r\n    let senderId = this.state.product.senderId;\r\n    let link = getCurrentHost() + \"/#/bshop/product-list#\" + this.state.product.transactionId + '#.,';\r\n\r\n    return (<Modal isOpen={this.state.voteHelp} toggle={this.toggleHelp.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleHelp.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <p></p>\r\n        <p><Input type='textarea' rows='2' id='invite_vote_url' value={link}></Input></p>\r\n        <Button color=\"ghost-success\" onClick={(e) => this.copyAddress()}>\r\n          <i className=\"fa fa-copy fa-lg\"></i>&nbsp;\r\n        </Button>\r\n        <span id='msg_invite'></span>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleHelp.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderIssueVotes() {\r\n    let winnerId = this.state.winner.accountId\r\n    let senderId = this.state.product.senderId;\r\n    return (<Modal isOpen={this.state.votes} toggle={this.toggleVotes.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleVotes.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <p>:<AccountDialog rsId={senderId} /></p>\r\n        <p>:<AccountDialog rsId={winnerId} /></p>\r\n        <p>:{getIssueReason(this.state.product.issueReason)}</p>\r\n        <Table hover bordered striped responsive size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>%</th>\r\n              <th>%</th>\r\n              <th></th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.renderIssueTransactions()}\r\n          </tbody>\r\n          <Pagination>\r\n            <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.preIssuePage() }}>-</PaginationLink></PaginationItem>\r\n            <PaginationItem active>\r\n              <PaginationLink tag=\"button\">{this.state.issuePage}</PaginationLink>\r\n            </PaginationItem>\r\n            <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextIssuePage() }}>+</PaginationLink></PaginationItem>\r\n          </Pagination>\r\n        </Table>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleVotes.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.toggleIssue.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n\r\n  preIssuePage() {\r\n    this.state.issuePage--\r\n    loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n      if (ok && issues)\r\n        this.setState({ issues })\r\n    })\r\n  }\r\n\r\n  nextIssuePage() {\r\n    this.state.issuePage++\r\n    loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n      if (ok && issues)\r\n        this.setState({ issues })\r\n    })\r\n  }\r\n\r\n\r\n  renderWinnerConfirmedProductDialog() {\r\n    let winnerId = this.state.winner.accountId\r\n    return (<Modal isOpen={this.state.confirm} toggle={this.toggleConfirm.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleConfirm.bind(this)}>{winnerId} </ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline()}\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small>.</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleConfirm.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.doWinnerConfirm.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderIssueDialog() {\r\n    let winnerId = this.state.winner.accountId\r\n    let senderId = this.state.product.senderId;\r\n    let totalAmount = (this.state.product.price + \" + \" + this.state.product.guarantee)\r\n    let t1 = ''\r\n    let t2 = ''\r\n    let t3 = ''\r\n    //\r\n    return (<Modal isOpen={this.state.issue} toggle={this.toggleIssue.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleIssue.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <p>:{this.state.product.guarantee} </p>\r\n        <p>:<AccountDialog rsId={senderId} /></p>\r\n        <p>:<AccountDialog rsId={winnerId} /></p>\r\n        <p>:{getIssueReason(this.state.product.issueReason)}</p>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Dropdown isOpen={this.state.selectIssueAction} toggle={\r\n            (() => {\r\n              this.setState({\r\n                selectIssueAction: !this.state.selectIssueAction,\r\n              });\r\n            }).bind(this)\r\n          }>\r\n            <DropdownToggle caret>\r\n              {this.state.selectActionTitle}\r\n            </DropdownToggle>\r\n            <DropdownMenu>\r\n              <DropdownItem onClick={(() => {\r\n                this.setState({ selectActionTitle: t1, issueReason: 1 })\r\n              }).bind(this)}>{t1}</DropdownItem>\r\n              <DropdownItem onClick={(() => {\r\n                this.setState({ selectActionTitle: t2, issueReason: 2 })\r\n              }).bind(this)}>{t2}</DropdownItem>\r\n              <DropdownItem onClick={(() => {\r\n                this.setState({ selectActionTitle: t3, issueReason: 3 })\r\n              }).bind(this)}>{t3}</DropdownItem>\r\n            </DropdownMenu>\r\n          </Dropdown>\r\n          <Label htmlFor=\"appendedInputButtons\"> {totalAmount} 90%10%:</Label>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateSellerRefund.bind(this)} placeholder='50' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>%()</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateBuyerRefund.bind(this)} placeholder=',50' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>%()</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input type=\"textarea\" name=\"textarea-input\" id=\"textarea-input\" rows=\"3\" onChange={this.updateIssueNote.bind(this)} placeholder='.100.' />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline()}\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n          <Alert color=\"danger\"><small>(5)10%</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleIssue.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.doIssue.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n\r\n  renderWinner7dayRefundDialog() {\r\n    let winnerId = this.state.winner.accountId\r\n    return (<Modal isOpen={this.state.day7refund} toggle={this.toggle7dayRefund.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggle7dayRefund.bind(this)}>{winnerId} - 8</ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">:</Label>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline(1)}\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTracking.bind(this)} placeholder=':' />\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input type=\"textarea\" name=\"textarea-input\" id=\"textarea-input\" rows=\"3\" value={this.state.trackingBlock} />\r\n              <Alert color=\"danger\"><small></small></Alert>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small>7.</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggle7dayRefund.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.do7dayrefund.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderFeeAndDeadline(fee) {\r\n    let fholder = '0.1';\r\n    if (fee) {\r\n      fholder = '' + fee + '';\r\n    }\r\n    return (<div>\r\n      <FormGroup>\r\n        <div className=\"controls\">\r\n          <InputGroup className=\"input-prepend\">\r\n            <InputGroupAddon addonType=\"prepend\">\r\n              <InputGroupText><PopHint id=\"min123\" text='(:' content=',(5)' /></InputGroupText>\r\n            </InputGroupAddon>\r\n            <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateFee.bind(this)} placeholder={fholder} />\r\n            <InputGroupAddon addonType=\"append\">\r\n              <InputGroupText></InputGroupText>\r\n            </InputGroupAddon>\r\n          </InputGroup>\r\n        </div>\r\n      </FormGroup>\r\n      {\r\n        this.renderDeadline()\r\n      }\r\n    </div>)\r\n  }\r\n\r\n  renderDeadline() {\r\n    if (true)\r\n      return null;\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='dl4545' text='(:' content='' /></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Input id=\"appendedPrependedInput\" size=\"16\" onChange={this.updateDeadline.bind(this)} type=\"text\" placeholder='5' />\r\n          <InputGroupAddon addonType=\"append\">\r\n            <InputGroupText></InputGroupText>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n\r\n  doDecrypt() {\r\n    if (!this.state.infoBlocks)\r\n      return null;\r\n    if (!this.secret) {\r\n      this.setState({ dialogMsg: '()' })\r\n      return;\r\n    }\r\n    let decrypted = [];\r\n    this.state.infoBlocks.forEach(((e) => {\r\n      let clear;\r\n      if (e.type > 0)\r\n        clear = shareDecrypt(this.secret, e.pk, e.id, e.block);\r\n      else\r\n        clear = new Buffer(e.block, 'base64').toString()\r\n      decrypted.push(clear);\r\n    }).bind(this))\r\n    this.setState({ decrypted })\r\n  }\r\n\r\n  renderEncryptedInfos() {\r\n    if (!this.state.infoBlocks)\r\n      return null;\r\n    let idx = 0;\r\n    let content = this.state.infoBlocks.map(((rec) => {\r\n      let txt = rec.block;\r\n      if (this.state.decrypted) {\r\n        txt = this.state.decrypted[idx];\r\n      }\r\n      idx++;\r\n      return (<div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText>:</InputGroupText>\r\n          </InputGroupAddon>\r\n          <Input type=\"textarea\" name=\"textarea-input\" id=\"textarea-input\" rows=\"3\" value={txt} />\r\n        </InputGroup>\r\n      </div>)\r\n    }).bind(this))\r\n    return content;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  renderDecryptDialog() {\r\n    return (<Modal isOpen={this.state.decrypt} toggle={this.toggleDecrypt.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleDecrypt.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderEncryptedInfos()}\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleDecrypt.bind(this)}></Button>\r\n        <Button color=\"danger\" onClick={this.doDecrypt.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderDeliverProductDialog() {\r\n    let senderId = this.state.product.senderId;\r\n    return (<Modal isOpen={this.state.sending} toggle={this.toggleSending.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleSending.bind(this)}>{senderId} </ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">:</Label>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline(1)}\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTracking.bind(this)} placeholder=':' />\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input type=\"textarea\" name=\"textarea-input\" id=\"textarea-input\" rows=\"3\" value={this.state.trackingBlock} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleSending.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={this.doSending.bind(this)}></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderPayingProductDialog() {\r\n    if (!this.state.product)\r\n      return null;\r\n    let winner = this.state.winner;\r\n    let pwdHint = '';\r\n    let payId = ''\r\n    if (winner) {\r\n      pwdHint = \"\" + winner.accountId + \"\"\r\n      payId = winner.accountId\r\n    }\r\n\r\n    return (<Modal isOpen={this.state.paying} toggle={this.togglePay10p.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.togglePay10p.bind(this)}>{payId}</ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} </p>\r\n        <p>:{this.state.product.guarantee} </p>\r\n        <p>:{(this.state.product.price / 10)} </p>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">:</Label>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderFeeAndDeadline(1)}\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateContact.bind(this)} placeholder='()' />\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updatePhone.bind(this)} placeholder='()' />\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateAddress.bind(this)} placeholder='()' />\r\n            </InputGroup>\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input type=\"textarea\" name=\"textarea-input\" id=\"textarea-input\" rows=\"3\" value={this.state.addressBlock} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.togglePay10p.bind(this)}></Button>\r\n        {this.renderPayActionButton()}\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderPayActionButton() {\r\n    if (this.state.success)\r\n      return null;\r\n    return (<Button color=\"danger\" onClick={this.doPaying.bind(this)}></Button>);\r\n  }\r\n\r\n  render() {\r\n    return (<div>\r\n      {this.renderActionButtons()}\r\n      {this.renderPayingProductDialog()}\r\n      {this.renderDropDialog()}\r\n      {this.renderDeliverProductDialog()}\r\n      {this.renderWinnerConfirmedProductDialog()}\r\n      {this.renderWinner7dayRefundDialog()}\r\n      {this.renderIssueDialog()}\r\n      {this.renderRejectConfirmDialog()}\r\n      {this.renderIssueVotes()}\r\n      {this.renderInviteVotes()}\r\n      {this.renderDecryptDialog()}\r\n    </div>)\r\n  }\r\n}\r\nexport default ActionButton;\r\n","import React, { Component } from 'react';\r\nimport { Badge, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { Popover, PopoverHeader, PopoverBody, DropdownItem, FormGroup, Collapse, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap'\r\nimport { loadLocalAccount, saveUserSec, createPeerId, calcAccountId, getFileHost, getCurrentHost } from '../../ggv/js/gegeUtil'\r\nimport { Nav, NavItem, NavLink, Alert, Breadcrumb, BreadcrumbItem, ListGroup, ListGroupItem } from 'reactstrap';\r\nimport classnames from 'classnames';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport AccountDialog from '../../conponents/AccountDialog'\r\nimport PopHint from '../../conponents/PopHint/PopHint'\r\nimport BtbSecret from '../../conponents/BtbSecret/BtbSecret'\r\nimport ActionButton from '../../conponents/ActionButton/ActionButton'\r\nimport DepositDialog from '../../conponents/DepositDialog/DepositDialog'\r\nimport ImgDialog from '../../conponents/ImgDialog'\r\nconst get = require('simple-get')\r\nconst { getTorrentHash, loadProductList, loadProduct, doBShopTransaction, getProductStatus, loadProductDetails, loadJoinTransactions, loadIssueTransactions, shareEncrypt, getProductNextStep } = require('../eshop.js')\r\nconst moment = require('moment')\r\nclass ProductList extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.deadline = 5;\r\n    this.fee = '1';\r\n    this.guarantee = '2'\r\n    this.state = {\r\n      account: {}, list: [], page: 1, joinsPage: 1, addProduct: false, join: false, detailProduct: null,\r\n      detail: false, paying: null, activeTab: '0', detailTab: '0', joins: null, showAccount: false,\r\n      content: '.', filterValue: null, success: false, issuePage: 1,\r\n      product: {}\r\n    }\r\n    this.modules = {\r\n      toolbar: [\r\n        [{ 'header': '1' }, { 'header': '2' }, { 'font': [] }],\r\n        [{ size: [] }], [{ align: [] }, 'direction'],\r\n        ['bold', 'italic', 'underline', 'strike', 'blockquote', 'code-block'],\r\n        [{ color: [] }, { background: [] }],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' },\r\n        { 'indent': '-1' }, { 'indent': '+1' }],\r\n        ['link', 'image'],\r\n        ['clean']\r\n      ],\r\n      clipboard: {\r\n        // toggle to add extra line breaks when pasting HTML:\r\n        matchVisual: false,\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('plist did mount');\r\n    var account = loadLocalAccount();\r\n    if (account && account.secret)\r\n      this.secret = account.secret;\r\n    this.setState({ account })\r\n    let hash = window.location.hash;\r\n    let query = null;\r\n    if (hash) {\r\n      let idx = hash.indexOf(\"#\", 1);\r\n      if (idx > 0) {\r\n        query = hash.substr(idx + 1, 40);\r\n        idx = query.indexOf(\"#\", 1);\r\n        if (idx > 0) {\r\n          query = query.substr(0, idx);\r\n        }\r\n        //console.log('query=' + query);\r\n      }\r\n    }\r\n    setTimeout((() => {\r\n      if (query)\r\n        loadProduct(this.onProductList.bind(this), query)\r\n      else\r\n        loadProductList(this.onProductList.bind(this), 1, this.state.activeTab)\r\n    }).bind(this), 500);\r\n    //\r\n    //this.doTest()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log('plist will unmount');\r\n  }\r\n\r\n  onProductList(ok, list) {\r\n    if (ok) {\r\n      this.setState({ list })\r\n    } else {\r\n      this.setState({ list: [] })\r\n    }\r\n  }\r\n\r\n  prePage() {\r\n    if (this.state.page > 1) {\r\n      this.state.page--\r\n      loadProductList(this.onProductList.bind(this), this.state.page, this.state.activeTab, '0', this.state.filterValue)\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    this.state.page++\r\n    loadProductList(this.onProductList.bind(this), this.state.page, this.state.activeTab, '0', this.state.filterValue)\r\n  }\r\n\r\n  filterBlocks() {\r\n    this.setState({ page: 1 })\r\n    loadProductList(this.onProductList.bind(this), 1, this.state.activeTab, '0', this.state.filterValue)\r\n  }\r\n\r\n  togglePublishProduct() {\r\n    this.setState({\r\n      addProduct: !this.state.addProduct, success: false\r\n    });\r\n  }\r\n\r\n  toggleJoin() {\r\n    this.setState({\r\n      join: !this.state.join, joinsPage: 1, success: false, dialogMsg: ''\r\n    });\r\n    //set product to null\r\n  }\r\n\r\n  toggleDetail() {\r\n    this.setState({\r\n      detail: !this.state.detail,\r\n      issues: null, joins: null,\r\n      detailTab: '0', issuePage: 1\r\n    });\r\n  }\r\n\r\n\r\n  onSecret(sec) {\r\n    if (sec) {\r\n      this.secret = sec\r\n      let rsId = calcAccountId(this.userSec);\r\n      this.setState({ rsId: rsId })\r\n    }\r\n  }\r\n\r\n  updateFee(e) {\r\n    if (e && e.target) {\r\n      this.fee = e.target.value;\r\n      if (this.fee.length == 0) {\r\n        this.fee = 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePrice(e) {\r\n    if (e && e.target) {\r\n      this.price = e.target.value;\r\n    }\r\n  }\r\n  updateExpire(e) {\r\n    if (e && e.target) {\r\n      this.expire = e.target.value;\r\n    }\r\n  }\r\n  updateQuality(e) {\r\n    if (e && e.target) {\r\n      this.quality = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateGuarantee(e) {\r\n    if (e && e.target) {\r\n      this.guarantee = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateTags(e) {\r\n    if (e && e.target) {\r\n      this.tags = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateDeadline(e) {\r\n    if (e && e.target) {\r\n      this.deadline = e.target.value;\r\n      if (this.deadline.length == 0) {\r\n        this.deadline = 5;\r\n      }\r\n    }\r\n  }\r\n  updateTitle(e) {\r\n    if (e && e.target) {\r\n      this.title = e.target.value;\r\n    }\r\n  }\r\n\r\n  updateAddress(e) {\r\n    if (e && e.target) {\r\n      this.address = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n\r\n  updateContact(e) {\r\n    if (e && e.target) {\r\n      this.contact = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n  updatePhone(e) {\r\n    if (e && e.target) {\r\n      this.phone = e.target.value;\r\n      this.updateAddressBlock()\r\n    }\r\n  }\r\n\r\n  updateAddressBlock() {\r\n    let clear = { contract: this.contact, address: this.address, phone: this.phone };\r\n    clear = JSON.stringify(clear);\r\n    let pk = this.state.productDetail.seller;\r\n    let addressBlock = shareEncrypt(this.secret, pk, this.state.product.transactionId, clear);\r\n    let addressHash = ''\r\n    this.setState({ addressBlock: addressBlock, addressHash: addressHash });\r\n  }\r\n\r\n\r\n\r\n  doJoin() {\r\n    if (!this.joinAmount) {\r\n      this.setState({ dialogMsg: '' })\r\n      return;\r\n    }\r\n    let transactionId = this.state.product.transactionId;\r\n    let peer = createPeerId(this.secret);\r\n    let data = {\r\n      action: 'transaction', type: 'sjoin', amount: this.joinAmount,\r\n      fee: this.fee, price: this.price, dealine: this.deadline, sid: transactionId, pk: peer.pk, accountId: peer.aid\r\n    };\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        this.setState({ dialogMsg: ',().', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  uploadThumbnail(productId) {\r\n    let b64 = this.state.avatar;\r\n    let url = getFileHost() + '/upthumbnail/' + productId + '/token1'\r\n    //url = 'http://127.0.0.1:18080/info'\r\n    var opts = {\r\n      url: url,\r\n      body: b64,\r\n      json: false\r\n    };\r\n    get.concat(opts, function (err, res, data) {\r\n\r\n    });\r\n  }\r\n\r\n  publishProduct() {\r\n    if (!this.price || parseInt(this.price) < 10) {\r\n      this.setState({ dialogMsg: '10' })\r\n      return;\r\n    }\r\n    //\r\n    let product = {\r\n      tags: this.tags, title: this.title,//\r\n      address: '', content: '',//\r\n      quality: 0\r\n    };\r\n    let peer = createPeerId(this.secret);\r\n    let str = JSON.stringify(product)\r\n    let jsonHex = new Buffer(str).toString('base64');\r\n    let content = this.state.content\r\n    content = '<html><head><meta charset=\"UTF-8\"><title>' + this.title + '</title></head><p>' + content + '</p></html>';\r\n    let digest = getTorrentHash(content);\r\n    let data = {\r\n      action: 'transaction', type: 'shopshare', productJson: jsonHex, guarantee: this.guarantee,\r\n      fee: this.fee, price: this.price, expire: this.expire, dealine: this.deadline, pk: peer.pk,\r\n      accountId: peer.aid, productDetail: null, digest\r\n    };\r\n    //\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        saveUserSec(this.secret)\r\n        if (this.state.avatar) {\r\n          this.uploadThumbnail(msg.productId)\r\n        }\r\n        this.uploadNews(msg.productId, content)\r\n        //this.togglePublishProduct()\r\n        let url = getCurrentHost() + \"/#/bshop/product-list#\" + msg.transactionId;\r\n        this.setState({ dialogMsg: ',().', success: true })\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  uploadNews(newsId, content) {\r\n    console.log('upload news not done yet');\r\n    let b64 = Buffer.from(content).toString('base64');\r\n    let url = getFileHost() + '/uphtml/' + newsId + '/token1'\r\n    //url = 'http://127.0.0.1:18080/info'\r\n    var opts = {\r\n      url: url,\r\n      body: b64,\r\n      json: false\r\n    };\r\n    get.concat(opts, function (err, res, data) {\r\n\r\n    });\r\n  }\r\n\r\n  handleChange(value) {\r\n    this.setState({ content: value })\r\n  }\r\n\r\n  rederAddProductDialog() {\r\n    return (<Modal isOpen={this.state.addProduct} toggle={this.togglePublishProduct.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.togglePublishProduct.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTitle.bind(this)} placeholder='' />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTags.bind(this)} placeholder='' />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text=':' content='10,,,8' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput3\" size=\"16\" type=\"text\" onChange={this.updatePrice.bind(this)} placeholder='10' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText></InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text=':' content='215.' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput3\" size=\"16\" type=\"text\" onChange={this.updateGuarantee.bind(this)} placeholder='' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText></InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text=':' content=',,' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateFee.bind(this)} placeholder='0.1' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText></InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {\r\n          this.renderDeadline()\r\n        }\r\n        <FormGroup>\r\n          <ImgDialog title='' onFinish={(img) => {\r\n            //// \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNby\r\n            if (img) {\r\n              let sp = img.split(';base64,');\r\n              let avatar = sp[1];\r\n              this.setState({ avatar })\r\n            }\r\n          }}></ImgDialog>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">:</Label>\r\n          <Alert><small>.</small></Alert>\r\n          <ReactQuill value={this.state.content}\r\n            modules={this.modules}\r\n            onChange={this.handleChange.bind(this)} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.togglePublishProduct.bind(this)}></Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={\r\n          ((e) => {\r\n            let dialogMsg = \",\";\r\n            this.setState({ dialogMsg })\r\n            setTimeout(() => {\r\n              this.publishProduct()\r\n            }, 200);\r\n          }).bind(this)\r\n        }></Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderDeadline() {\r\n    if (true)\r\n      return null;\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='dl4545' text=':' content='' /></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Input id=\"appendedPrependedInput\" size=\"16\" onChange={this.updateDeadline.bind(this)} type=\"text\" placeholder='5' />\r\n          <InputGroupAddon addonType=\"append\">\r\n            <InputGroupText></InputGroupText>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n  renderdialogMsg() {\r\n    if (this.state.renderDesposit) {\r\n      return (<div>\r\n        <Label>{this.state.dialogMsg}</Label>\r\n        <DepositDialog />\r\n      </div>)\r\n    } else\r\n      if (this.state.dialogMsg) {\r\n        return (<Label>{this.state.dialogMsg}</Label>)\r\n      }\r\n    return null;\r\n  }\r\n\r\n  setFilter(idx) {\r\n    this.setState({ page: 1, activeTab: idx, filterOption: this.filterMsg[idx] })\r\n  }\r\n\r\n  upateFilterValue(e) {\r\n    if (e && e.target) {\r\n      let value = e.target.value;\r\n      if (value.length > 0) {\r\n        value = new Buffer(value).toString('base64')\r\n        this.setState({ filterValue: value })\r\n      } else {\r\n        loadProductList(this.onProductList.bind(this), 1, this.state.activeTab)\r\n      }\r\n    }\r\n  }\r\n\r\n  updateJoinAmount(e) {\r\n    if (e && e.target) {\r\n      this.joinAmount = e.target.value;\r\n    }\r\n  }\r\n\r\n  renderFilterOptions() {\r\n    let ops = this.filterOptions.map((op, index) => {\r\n      return (<DropdownItem onClick={(e) => {\r\n        this.setFilter(index)\r\n      }}>{op}</DropdownItem>)\r\n    })\r\n    return ops;\r\n  }\r\n\r\n  joinProduct(product) {\r\n    this.setState({ product })\r\n    this.toggleJoin()\r\n  }\r\n\r\n  showDetailDialog(product) {\r\n    this.setState({ product })\r\n    this.toggleDetail()\r\n    setTimeout((() => {\r\n      loadProductDetails(product, (ok, productDetail) => {\r\n        if (ok && productDetail) {\r\n          this.setState({ productDetail })\r\n          let joins = productDetail.joins;\r\n          if (joins)\r\n            this.setState({ joins })\r\n        }\r\n      })\r\n    }).bind(this), 500);\r\n  }\r\n\r\n\r\n  preJoinsPage() {\r\n    if (this.state.joinsPage > 1) {\r\n      this.state.joinsPage--\r\n    }\r\n    loadJoinTransactions(this.state.product, this.state.joinsPage, 6, (ok, joins) => {\r\n      if (ok && joins)\r\n        this.setState({ joins })\r\n    })\r\n  }\r\n\r\n  nextJoinsPage() {\r\n    this.state.joinsPage++\r\n    loadJoinTransactions(this.state.product, this.state.joinsPage, 6, (ok, joins) => {\r\n      if (ok && joins)\r\n        this.setState({ joins })\r\n    })\r\n  }\r\n\r\n  onDetailTabClicked(tab) {\r\n    if (this.state.detailTab !== tab) {\r\n      this.setState({\r\n        detailTab: tab,\r\n      });\r\n      //\r\n      if (tab === '0') {\r\n        //load details\r\n      }\r\n      if (tab === '1') {\r\n        //load joins transaction\r\n        loadJoinTransactions(this.state.product, this.state.joinsPage, 6, (ok, joins) => {\r\n          if (ok && joins)\r\n            this.setState({ joins })\r\n        })\r\n      } if (tab === '2') {\r\n        //load joins transaction\r\n        loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n          if (ok && issues)\r\n            this.setState({ issues })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  renderJoinTransactions() {\r\n    let joins = this.state.joins;\r\n    if (!joins)\r\n      return null;\r\n    let content = joins.map(((res) => {\r\n      let btime = moment(res.time).format('MM-DD HH:mm')\r\n      let info = res.winner ? <span style={{ color: 'red' }}></span> : '';\r\n      if (this.state.product.status > 2) {\r\n        info = res.winner ? <span style={{ color: 'red' }}></span> : '';\r\n        if (this.state.product.status == 11) {\r\n          info = '';\r\n        }\r\n      }\r\n      return (<tr>\r\n        <td><PopHint id={'tamts'} text={info} content='.' /></td>\r\n        <td><AccountDialog rsId={res.accountId} /></td>\r\n        <td>{res.amount}</td>\r\n        <td>{btime}</td>\r\n      </tr>)\r\n    }).bind(this));\r\n\r\n    return content;\r\n  }\r\n\r\n  renderProductTabs() {\r\n    if (this.state.detailTab === '0') {\r\n      let productId = this.state.productDetail.product.productId;\r\n      let url = getFileHost() + '/html/0/' + productId;\r\n      return (<iframe width='100%' height='100%' frameborder='0' name=\"_blank\" src={url}></iframe>)\r\n      /*\r\n      //quill\r\n      let content;\r\n      if (this.state.productDetail.product.json && this.state.productDetail.product.json.content)\r\n        content = this.state.productDetail.product.json.content;\r\n      if (content) {\r\n        content = sanitizeHtml(content, {\r\n          allowedTags: sanitizeHtml.defaults.allowedTags.concat(['img']),\r\n          allowedAttributes: {\r\n            'img': ['src']\r\n          },\r\n          allowedSchemes: ['data', 'http']\r\n        });\r\n        return (<ReactQuill value={content} />)\r\n      }\r\n      */\r\n    }\r\n\r\n    if (this.state.detailTab === '1') {\r\n      //join transactions\r\n      return (<div><Table hover bordered striped responsive size=\"sm\">\r\n        <tbody>\r\n          {this.renderJoinTransactions()}\r\n        </tbody>\r\n      </Table>\r\n        <Pagination>\r\n          <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.preJoinsPage() }}>-</PaginationLink></PaginationItem>\r\n          <PaginationItem active>\r\n            <PaginationLink tag=\"button\">{this.state.joinsPage}</PaginationLink>\r\n          </PaginationItem>\r\n          <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextJoinsPage() }}>+</PaginationLink></PaginationItem>\r\n        </Pagination>\r\n      </div>)\r\n    }\r\n    if (this.state.detailTab === '2') {\r\n      //issue transactions\r\n      return (<Table hover bordered striped responsive size=\"sm\">\r\n        <thead>\r\n          <tr>\r\n            <th></th>\r\n            <th>%</th>\r\n            <th>%</th>\r\n            <th></th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {this.renderIssueTransactions()}\r\n        </tbody>\r\n        <Pagination>\r\n          <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.preIssuePage() }}>-</PaginationLink></PaginationItem>\r\n          <PaginationItem active>\r\n            <PaginationLink tag=\"button\">{this.state.issuePage}</PaginationLink>\r\n          </PaginationItem>\r\n          <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextIssuePage() }}>+</PaginationLink></PaginationItem>\r\n        </Pagination>\r\n      </Table>)\r\n    }\r\n  }\r\n\r\n  preIssuePage() {\r\n    this.state.issuePage--\r\n    loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n      if (ok && issues)\r\n        this.setState({ issues })\r\n    })\r\n  }\r\n\r\n  nextIssuePage() {\r\n    this.state.issuePage++\r\n    loadIssueTransactions(this.state.product, this.state.issuePage, 6, (ok, issues) => {\r\n      if (ok && issues)\r\n        this.setState({ issues })\r\n    })\r\n  }\r\n\r\n  renderIssueTransactions() {\r\n    let issues = this.state.issues;\r\n    if (!issues)\r\n      return null;\r\n    let content = issues.map(((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      //\r\n      let info = '';\r\n      if (res.info)\r\n        info = new Buffer(res.info, 'base64').toString()\r\n      let color = 'black'\r\n      if (res.luckey) {\r\n        color = 'red';\r\n      }\r\n      return (<tr>\r\n        <td><AccountDialog rsId={res.from} /></td>\r\n        <td style={{ color: color }}>{res.wp}%</td>\r\n        <td style={{ color: color }}>{res.sp}%</td>\r\n        <td>{btime}</td>\r\n        <td>{info}</td>\r\n      </tr>)\r\n    }).bind(this));\r\n\r\n    return content;\r\n  }\r\n\r\n  renderProductDetail() {\r\n    if (!this.state.productDetail)\r\n      return null;\r\n    let count = this.state.productDetail.joinsCount;\r\n\r\n    return (\r\n      <div><Nav tabs>\r\n        <NavItem>\r\n          <NavLink\r\n            className={classnames({ active: this.state.detailTab === '0' })}\r\n            onClick={() => { this.onDetailTabClicked('0'); }}\r\n          >\r\n            <i className=\"icon-calculator\"></i><Badge\r\n              color=\"success\">) </Badge>\r\n          </NavLink>\r\n        </NavItem>\r\n        <NavItem>\r\n          <NavLink\r\n            className={classnames({ active: this.state.detailTab === '1' })}\r\n            onClick={() => { this.onDetailTabClicked('1'); }}\r\n          >\r\n            <i className=\"icon-basket-loaded\"></i><Badge pill color=\"danger\">-{count}</Badge>\r\n          </NavLink>\r\n        </NavItem>\r\n        {this.renderIssueVoteTab()}\r\n      </Nav>\r\n        {\r\n          this.renderProductTabs()\r\n        }\r\n      </div>)\r\n  }\r\n\r\n  renderIssueVoteTab() {\r\n    let count = this.state.productDetail.issues.count;\r\n    if (this.state.product.issue) {\r\n      return (<NavItem>\r\n        <NavLink\r\n          className={classnames({ active: this.state.detailTab === '2' })}\r\n          onClick={() => { this.onDetailTabClicked('2'); }}\r\n        >\r\n          <i className=\"icon-basket-loaded\"></i><Badge pill color=\"danger\">-{count}</Badge>\r\n        </NavLink>\r\n      </NavItem>)\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  renderPay10pbutton() {\r\n    if (!this.state.productDetail)\r\n      return null;\r\n    let winner = this.state.productDetail.winner;\r\n    if (!winner)\r\n      return null;\r\n    return (<ListGroupItem>\r\n      <PopHint id=\"wind123\" text={': (' + winner.amount + ')'} content='' />\r\n      <div><AccountDialog rsId={winner.accountId} /></div>\r\n      <ActionButton product={this.state.product} productDetail={this.state.productDetail} winner={this.state.productDetail.winner} />\r\n    </ListGroupItem>)\r\n  }\r\n\r\n  renderSteps() {\r\n    if (true)\r\n      return null;\r\n    return (<Breadcrumb>\r\n      <BreadcrumbItem><a href=\"#\">Home</a></BreadcrumbItem>\r\n      <BreadcrumbItem><a href=\"#\">Library</a></BreadcrumbItem>\r\n      <BreadcrumbItem active>Data</BreadcrumbItem>\r\n    </Breadcrumb>)\r\n  }\r\n\r\n  renderIssueVoteList() {\r\n    if (!this.state.productDetail || !this.state.productDetail.issues) {\r\n      return null;\r\n    }\r\n    let count = this.state.productDetail.issues.count;\r\n    let sp = this.state.productDetail.issues.result.sp;\r\n    let wp = this.state.productDetail.issues.result.wp;\r\n    let voter = this.state.productDetail.issues.result.voter;\r\n    if (this.state.product.issue) {\r\n      return (<div>\r\n        <ListGroupItem><PopHint id='vw123' text=':' content='+90%10%' /> <AccountDialog rsId={voter} /> </ListGroupItem>\r\n        <ListGroupItem>: {count}</ListGroupItem>\r\n        <ListGroupItem>: {wp}%: {sp}%</ListGroupItem>\r\n      </div>);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  renderProductDetailDialog() {\r\n    let dueTime = ''\r\n    let btime;\r\n    if (this.state.product) {\r\n      let d = new Date();\r\n      if (this.state.productDetail) {\r\n        d.setTime(this.state.productDetail.product.createTime)\r\n        btime = d.toLocaleString()\r\n      }\r\n      if (this.state.product.status == 2) {\r\n        if (this.state.productDetail && this.state.productDetail.product.due)\r\n          dueTime = ' ' + this.state.productDetail.product.due + ''\r\n      }\r\n    }\r\n    //\r\n    return (<Modal isOpen={this.state.detail} toggle={this.toggleDetail.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleDetail.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <ListGroup>\r\n          <ListGroupItem>{this.state.product.title}</ListGroupItem>\r\n          <ListGroupItem><AccountDialog rsId={this.state.product.senderId} /></ListGroupItem>\r\n          <ListGroupItem>{btime}</ListGroupItem>\r\n          <ListGroupItem>{this.state.product.tags}</ListGroupItem>\r\n          <ListGroupItem>:{this.state.product.price}  (:{(this.state.product.price / 10)} --8) </ListGroupItem>\r\n          <ListGroupItem>:<PopHint id={'tamt'} text={this.state.product.amout + ''} content='5016' /> {dueTime}</ListGroupItem>\r\n          <ListGroupItem>:<PopHint id={'tamgr'} text={this.state.product.guarantee + ''} content=',...' /></ListGroupItem>\r\n          <ListGroupItem><PopoverItem mode='step' product={this.state.product} /></ListGroupItem>\r\n          {this.renderPay10pbutton()}\r\n          {this.renderIssueVoteList()}\r\n          <ListGroupItem>{this.renderProductDetail()}</ListGroupItem>\r\n        </ListGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleDetail.bind(this)}></Button>\r\n        {this.renderJoinButton1()}\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n  renderJoinButton1() {\r\n    if (!this.state.product)\r\n      return null;\r\n    if (this.state.product.status > 2)\r\n      return null;\r\n    let txt = (this.state.product.price / 10) + ''\r\n    return (<Button color=\"danger\" onClick={e => {\r\n      this.toggleDetail()\r\n      this.joinProduct(this.state.product)\r\n    }}>{txt}</Button>)\r\n  }\r\n\r\n\r\n  rederJoinProductDialog() {\r\n    if (!this.state.product)\r\n      return null;\r\n\r\n    let priceHolder = '(' + (this.state.product.price / 10) + ')'\r\n    let joinContent = this.state.product.price + '50,';\r\n    return (<Modal isOpen={this.state.join} toggle={this.toggleJoin.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleJoin.bind(this)}></ModalHeader>\r\n      <ModalBody>\r\n        <p>: {this.state.product.title}</p>\r\n        <p>:{this.state.product.price} --8</p>\r\n        <p>:{(this.state.product.price / 10)} </p>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">:</Label>\r\n          <div className=\"controls\">\r\n            <InputGroup>\r\n              <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text=':' content={joinContent} /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateJoinAmount.bind(this)} placeholder={priceHolder} />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText></InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text=':' content=',' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateFee.bind(this)} placeholder='0.2' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText></InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {\r\n          this.renderDeadline()\r\n        }\r\n        <FormGroup>\r\n          <Alert color=\"danger\"><small></small></Alert>\r\n          <Alert color=\"danger\"><small>8</small></Alert>\r\n          <Alert color=\"danger\"><small>50</small></Alert>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleJoin.bind(this)}></Button>\r\n        {this.renderActionButton()}\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderActionButton() {\r\n    if (this.state.success)\r\n      return null;\r\n    return (<Button color=\"danger\" onClick={this.doJoin.bind(this)}></Button>);\r\n  }\r\n\r\n  renderJoinButton(res) {\r\n    let debug = false\r\n    if (debug) {\r\n      return (<Button size=\"sm\" className=\"btn-facebook btn-brand mr-1 mb-1\" onClick={(e) => this.joinProduct(res)}><i className=\"fa fa-facebook\"></i><span></span></Button>);\r\n    } else {\r\n      let sts = getProductStatus(res.status)\r\n      if (res.status > 2 || res.closed) {\r\n        let nxt = getProductNextStep(res.status)\r\n        return (<Button color=\"secondary\" onClick={(e) => this.showDetailDialog(res)}><span>{nxt}</span></Button>);\r\n      } else {\r\n        let txt = (res.price / 10) + '';\r\n        return (<Button color=\"danger\" onClick={(e) => this.joinProduct(res)}><span>{txt}</span></Button>);\r\n      }\r\n    }\r\n  }\r\n\r\n  renderProductList() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.createTime)\r\n      let btime = d.toLocaleString()\r\n      let url = getFileHost() + '/thumbnail/0/' + res.productId\r\n      return (<tr>\r\n        <td>{this.renderJoinButton(res)}</td>\r\n        <td><img onClick={(e) => {\r\n          e.preventDefault()\r\n          this.showDetailDialog(res)\r\n        }} style={{ width: 50, height: 50 }} src={url}></img></td>\r\n        <td>\r\n          <div><a href='#' onClick={(e) => {\r\n            e.preventDefault()\r\n            this.showDetailDialog(res)\r\n          }}><span>{res.title}</span></a></div>\r\n          <div><span onClick={(e) => {\r\n            e.preventDefault()\r\n            this.showDetailDialog(res)\r\n          }} style={{ color: 'gray' }}>-8</span></div>\r\n        </td>\r\n        <td>{btime}</td>\r\n        <td><PopoverItem product={res} /></td>\r\n      </tr >)\r\n    });\r\n    return content;\r\n  }\r\n\r\n\r\n  renderList() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    return (<Row>\r\n      <Col>\r\n        <Card>\r\n          <CardBody>\r\n            <InputGroup>\r\n              <Input placeholder='' onChange={this.upateFilterValue.bind(this)} />\r\n              <Button color=\"primary\" onClick={e => this.filterBlocks()}>\r\n                <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n            </InputGroup>\r\n            <Table hover bordered striped responsive size=\"sm\">\r\n              <tbody>\r\n                {this.renderProductList()}\r\n              </tbody>\r\n            </Table>\r\n            {this.rederAddProductDialog()}\r\n            {this.rederJoinProductDialog()}\r\n            {this.renderProductDetailDialog()}\r\n            <nav>\r\n              <Pagination>\r\n                <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}></PaginationLink></PaginationItem>\r\n                <PaginationItem active>\r\n                  <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n                </PaginationItem>\r\n                <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}></PaginationLink></PaginationItem>\r\n              </Pagination>\r\n            </nav>\r\n            <Button onClick={(e) => { this.togglePublishProduct() }} className=\"btn-openid btn-brand\"><i className=\"fa fa-openid\"></i><span></span></Button>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>)\r\n  }\r\n\r\n  onTabClicked(tab) {\r\n    if (this.state.activeTab !== tab) {\r\n      this.setState({\r\n        activeTab: tab,\r\n      });\r\n      let aid = 0;\r\n      if (this.state.account) {\r\n        aid = this.state.account.aid\r\n      }\r\n      loadProductList(this.onProductList.bind(this), 1, tab, aid + '')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Nav tabs>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '0' })}\r\n              onClick={() => { this.onTabClicked('0'); }}\r\n            >\r\n              <i className=\"icon-calculator\"></i> {'\\u00A0'}<Badge\r\n                color=\"info\">-8</Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '1' })}\r\n              onClick={() => { this.onTabClicked('1'); }}\r\n            >\r\n              <i className=\"icon-basket-loaded\"></i> <span\r\n                className={this.state.activeTab === '1' ? '' : 'd-none'}></span>{'\\u00A0'}<Badge pill color=\"info\"></Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '2' })}\r\n              onClick={() => { this.onTabClicked('2'); }}\r\n            >\r\n              <i className=\"icon-pie-chart\"></i> <span className={this.state.activeTab === '2' ? '' : 'd-none'}></span><Badge pill color=\"info\"></Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '3' })}\r\n              onClick={() => { this.onTabClicked('3'); }}\r\n            >\r\n              <i className=\"icon-pie-chart\"></i> <span className={this.state.activeTab === '3' ? '' : 'd-none'}></span><Badge pill color=\"info\"></Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n        {this.renderList()}\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\nclass PopoverItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n    this.state = {\r\n      popoverOpen: false\r\n    };\r\n  }\r\n\r\n  toggle() {\r\n    this.setState({\r\n      popoverOpen: !this.state.popoverOpen,\r\n    });\r\n  }\r\n\r\n  renderSteps() {\r\n    let id = 'steps-' + this.props.product.transactionId;\r\n    let stepInfo = ''\r\n    if (this.props.product.steps) {\r\n      let ss = this.props.product.steps.split(';');\r\n      let content = ss.map((step, idx) => {\r\n        let res;\r\n        if (step && step.length > 0) {\r\n          res = getProductStatus(step);\r\n        }\r\n        if (!res)\r\n          return null;\r\n        return (<ListGroupItem>{(idx + 1) + \".\" + res}</ListGroupItem>);\r\n      })\r\n      stepInfo = content;\r\n    }\r\n\r\n    let nxt = getProductNextStep(this.props.product.status);\r\n    if (nxt) {\r\n      nxt = '-> ' + nxt;\r\n    }\r\n    let nxtUi = (<Alert onClick={this.toggle}><small> {nxt} </small> </Alert>);\r\n    if (this.props.product.status == 99) {\r\n      nxtUi = null;\r\n    }\r\n    return (\r\n      <span>\r\n        <Alert id={id} onClick={this.toggle}><small>: {getProductStatus(this.props.product.status)}  </small> </Alert>\r\n        {nxtUi}\r\n        <Popover placement='top' isOpen={this.state.popoverOpen} target={id} toggle={this.toggle}>\r\n          <PopoverHeader></PopoverHeader>\r\n          <PopoverBody>{stepInfo}</PopoverBody>\r\n        </Popover>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if ('step' === this.props.mode)\r\n      return (<ListGroup size='sm'>\r\n        {this.renderSteps()}\r\n      </ListGroup>);\r\n    let id = 'Popover-' + this.props.product.transactionId;\r\n    let link = getCurrentHost() + \"/#/bshop/product-list#\" + this.props.product.transactionId + '#' + this.props.product.title + ' ' + (this.props.product.price / 10) + '.8';\r\n\r\n    return (\r\n      <span>\r\n        <span className='alert-primary  fade show' id={id} onClick={this.toggle}>\r\n          \r\n        </span>\r\n        <Popover placement='top' isOpen={this.state.popoverOpen} target={id} toggle={this.toggle}>\r\n          <PopoverHeader></PopoverHeader>\r\n          <PopoverBody>{link}</PopoverBody>\r\n        </Popover>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductList;\r\n"],"sourceRoot":""}