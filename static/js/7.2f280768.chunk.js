(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{845:function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"default",function(){return s});var n=a(21),l=a(22),i=a(399),s=function(){function t(){Object(n.a)(this,t),this.player=new i("",{}),this.torrentCallback=null,this.onStartCallback=null}return Object(l.a)(t,[{key:"init",value:function(e,t,a){this.torrentCallback=e,this.onStartCallback=t;var n=a;n||(n=document.querySelector("input[name=upload]")),n&&this.uploadElement(n,this.onStartCallback,function(e,t){if(e)return e;t=t.map(function(e){return e.file}),this.onFiles(t)}.bind(this))}},{key:"isTorrentFile",value:function(e){return-1!==e.name.indexOf(".torrent")}},{key:"isNotTorrentFile",value:function(e){return!this.isTorrentFile(e)}},{key:"onSeedTorrent",value:function(e){e.on("warning",function(e){console.log(e)}),e.on("error",function(e){console.log(e)}),this.torrentCallback(e)}},{key:"seedContent",value:function(t,a){var n=e.from(t),l=this.player.seed(n,a);l.on("infoHash",function(e){a(l)})}},{key:"seed",value:function(e){var t=this;0!==e.length&&(this.onStartCallback(e),setTimeout(function(){var a=t.player.seed(e,t.onSeedTorrent.bind(t));a.on("infoHash",function(e){t.torrentCallback(a)})},1e3))}},{key:"onFiles",value:function(e){console.log("got files:"),e.forEach(function(e){}),this.seed(e)}},{key:"uploadElement",value:function(e,t,a,n){"function"===typeof a&&(n=a,a={}),"string"===typeof a&&(a={type:a}),e.addEventListener("change",function(l){if(0===e.files.length)return n(null,[]);t&&t(null);var i=new FileReader,s=0,r=[];function o(t){var n=e.files[t];"text"===a.type?i.readAsText(n):"url"===a.type?i.readAsDataURL(n):i.readAsArrayBuffer(n)}i.addEventListener("load",function(t){r.push({file:e.files[s],target:t.target}),++s===e.files.length?n(null,r):o(s)}),o(s)})}}]),t}()}.call(this,a(7).Buffer)},856:function(e,t,a){"use strict";var n=a(848),l=a.n(n),i=a(849),s=a(21),r=a(22),o=a(24),c=a(23),u=a(25),d=a(0),h=a.n(d),m=a(131),g=a(128),p=a(129),E=a(167),f=a(33),b=a(858),v=a.n(b),k=function(e){return new Promise(function(t,a){var n=new Image;n.addEventListener("load",function(){return t(n)}),n.addEventListener("error",function(e){return a(e)}),n.setAttribute("crossOrigin","anonymous"),n.src=e})};function y(e,t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(l.a.mark(function e(t,a){var n,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,(i=document.createElement("canvas")).width=a.width,i.height=a.height,i.getContext("2d").drawImage(n,a.x,a.y,a.width,a.height,0,0,a.width,a.height),e.abrupt("return",new Promise(function(e,t){e(i.toDataURL("image/jpeg",.1))}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return new Promise(function(t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)},!1),a.readAsDataURL(e)})}a.d(t,"a",function(){return S});var S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).onCropChange=function(e){a.setState({crop:e})},a.onCropComplete=function(e,t){console.log(e,t),a.setState({croppedAreaPixels:t})},a.onZoomChange=function(e){a.setState({zoom:e})},a.onFileChange=function(){var e=Object(i.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=5;break}return e.next=3,N(t.target.files[0]);case 3:n=e.sent,a.setState({imageSrc:n,crop:{x:0,y:0},zoom:1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.showCroppedImage=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(a.state.imageSrc,a.state.croppedAreaPixels);case 2:t=e.sent,a.setState({croppedImage:t}),a.props.onFinish(a.state.croppedImage),a.toggleEditor();case 6:case"end":return e.stop()}},e)})),a.state={mode:"simple",editing:!1,imageSrc:null,crop:{x:0,y:0},zoom:1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"toggleEditor",value:function(){this.setState({editing:!this.state.editing,imageSrc:null})}},{key:"renderEditor",value:function(){return h.a.createElement(m.a,{isOpen:this.state.editing,toggle:this.toggleEditor.bind(this),className:"modal-info "+this.props.className},h.a.createElement(g.a,{toggle:this.toggleEditor.bind(this)},this.props.title),h.a.createElement(p.a,null,h.a.createElement("div",{style:{width:200,height:300}},h.a.createElement("input",{type:"file",onChange:this.onFileChange}),this.state.imageSrc&&h.a.createElement(v.a,{image:this.state.imageSrc,crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.aspect,onCropChange:this.onCropChange,onCropComplete:this.onCropComplete,onZoomChange:this.onZoomChange}))),h.a.createElement(E.a,null,h.a.createElement(f.a,{color:"danger",onClick:this.showCroppedImage.bind(this)},"\u5b8c\u6210")))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,this.renderEditor(),h.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.toggleEditor()}},this.props.title),this.state.croppedImage&&h.a.createElement("img",{style:{width:50,height:50},src:this.state.croppedImage}))}}]),t}(d.Component)},891:function(e,t,a){"use strict";var n=a(21),l=a(22),i=a(24),s=a(23),r=a(25),o=a(51),c=a(0),u=a.n(c),d=a(397),h=a(394),m=a(395),g=a(13),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).toggle=a.toggle.bind(Object(o.a)(Object(o.a)(a))),a.state={popoverOpen:!1},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"render",value:function(){var e="Popover-"+this.props.id,t=Object(g.getCurrentHost)()+"/#/newsweb#"+this.props.id+"#\u3010\u771e\u5ba2\u3011"+this.props.title;return u.a.createElement("span",null,u.a.createElement("span",{className:"alert-primary  fade show",id:e,onClick:this.toggle},"\u5206\u4eab\u94fe\u63a5"),u.a.createElement(d.a,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},u.a.createElement(h.a,null,"\u590d\u5236\u8fd9\u4e2a\u94fe\u63a5\u5206\u4eab\u7ed9\u5176\u4ed6\u4eba"),u.a.createElement(m.a,null,t)))}}]),t}(c.Component);t.a=p},892:function(e,t,a){"use strict";var n=a(21),l=a(22),i=a(24),s=a(23),r=a(25),o=a(0),c=a.n(o),u=a(33),d=a(90),h=a(127),m=a(131),g=a(128),p=a(129),E=a(167),f=a(879),b=Object(f.a)({accessToken:"pk.eyJ1IjoiYnRicmVzb3VyY2UiLCJhIjoiY2pzMnRjZ3N1Mjg2NDQzcXI1MmtkN2JmciJ9.Feg20PaXKCvinpL0nc1Yvw"}),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={delete:!1},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(d.a,{onClick:function(){return e.toggleDelete()}},c.a.createElement("i",{className:"icon-location-pin"}),this.props.title),this.renderModal())}},{key:"toggleDelete",value:function(){var e=this;if(!this.state.delete){var t=this.props.e,a=[t.longitude?t.longitude:t.longtitude,t.latitude];setTimeout(function(){e.map&&0!=a[0]&&0!=a[1]&&e.map.state.map.flyTo({center:a,zoom:11,speed:.8})},1e3)}this.setState({delete:!this.state.delete})}},{key:"renderModal",value:function(){var e=this;return c.a.createElement(m.a,{isOpen:this.state.delete,toggle:this.toggleDelete.bind(this),className:"modal-info "+this.props.className},c.a.createElement(g.a,{toggle:this.toggleDelete.bind(this)},"\u670b\u53cb\u5708\u5730\u56fe"),c.a.createElement(p.a,null,c.a.createElement(b,{ref:function(t){return e.map=t},onClick:function(t,a){var n=a.lngLat,l={latitude:n.lat,longitude:n.lng};e.setState({position:l,click:!0,clickPage:1})},zoom:[12],style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"60vh",width:"85vw"}}),c.a.createElement(h.a,{color:"primary"},c.a.createElement("a",{target:"_blank",href:"https://github.com/zker001/zker-android"},"\u8bf7\u4e0b\u8f7d\u771e\u5ba2\u624b\u673a\u5ba2\u6237\u7aef\u67e5\u770b\u66f4\u591a\u4fe1\u606f")," ")),c.a.createElement(E.a,null,c.a.createElement(u.a,{color:"danger",onClick:this.toggleDelete.bind(this)},"\u5173\u95ed")))}}]),t}(o.Component);t.a=v},928:function(e,t,a){"use strict";a.r(t),function(e){var n=a(21),l=a(22),i=a(24),s=a(23),r=a(25),o=a(0),c=a.n(o),u=a(229),d=a(232),h=a(826),m=a(827),g=a(393),p=a(168),E=a(228),f=a(66),b=a(67),v=a(33),k=a(65),y=a(77),C=a(89),N=a(64),S=a(90),w=a(78),O=a(131),H=a(128),T=a(129),j=a(167),P=a(130),x=a(825),I=a(391),D=a(392),L=a(13),F=a(30),z=a(3),M=a.n(z),V=a(233),A=a.n(V),J=(a(400),a(68)),B=a(169),R=a(73),Y=a(132),K=a(879),U=a(856),_=a(891),G=a(892),q=a(845).default,Z=a(79),X=Object(K.a)({accessToken:"pk.eyJ1IjoiYnRicmVzb3VyY2UiLCJhIjoiY2pzMnRjZ3N1Mjg2NDQzcXI1MmtkN2JmciJ9.Feg20PaXKCvinpL0nc1Yvw"}),Q=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(s.a)(a).call(this,e))).page=1,t.share=new q,t.state={list:[],page:1,delete:!1,content:"",longitude:"0",latitude:"0",fee:"0.01",deadline:"5",price:"0",gps:!1,activeTab:"0",click:!1,clickPage:1,addHongbao:!1,distance:"0",joinHongbao:!1,vcode:""},t.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],[{align:[]},"direction"],["bold","italic","underline","strike","blockquote","code-block"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],clipboard:{matchVisual:!1}},t}return Object(r.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadNewsList(1,this.state.filterIdx);var e=Object(L.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret),this.setState({account:e})}},{key:"toggleGps",value:function(){this.setState({gps:!this.state.gps}),this.state.gps||navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){e?console.log(e.coords.latitude+ +e.coords.longitude):console.log("get pos err")})}},{key:"getFavoriteLocations",value:function(){}},{key:"preClickPage",value:function(){if(this.state.clickPage>1){var e=this.state.clickPage-1;this.setState({clickPage:e}),this.loadClickNews(e)}}},{key:"nextClickPage",value:function(){var e=this.state.clickPage+1;this.setState({clickPage:e}),this.loadClickNews(e)}},{key:"loadClickNews",value:function(t,a){var n,l=this,i=this.state.filterValue;t||(t=this.state.clickPage);var s=this.state.account?this.state.account.aid:0,r=a?a.latitude:this.state.position.latitude,o=a?a.longitude:this.state.position.longitude,c=this.map.zoom;i?(i=new e(i).toString("base64"),n={action:"listNews",tab:0,latitude:r,longtitude:o,zoom:c,page:t,query:i,accountId:s}):n={action:"listNews",tab:0,latitude:r,longtitude:o,zoom:c,page:t,accountId:s},console.log(JSON.stringify(n)),Object(F.bshopCall)(n,function(e,a){e&&a&&l.setState({clickList:a.list,clickedHongbaos:a.hongbaos,clickPage:t,filterValue:null})}.bind(this))}},{key:"loadNewsList",value:function(t,a){var n,l=this,i=this.getFavoriteLocations();a||(a=this.state.filterValue),n=a?{action:"listNews",locations:i,page:t,query:a=new e(a).toString("base64")}:{action:"listNews",locations:i,page:t},Object(F.bshopCall)(n,function(e,t){e&&t&&l.setState({list:t.list})}.bind(this))}},{key:"loadHongbaoList",value:function(t,a){var n,l=this,i=this.getFavoriteLocations();a||(a=this.state.filterValue),n=a?{action:"listHongbao",locations:i,page:t,query:a=new e(a).toString("base64")}:{action:"listHongbao",locations:i,page:t},Object(F.bshopCall)(n,function(e,t){e&&t&&l.setState({hongbaos:t.list})}.bind(this))}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,this.loadNewsList(this.state.page,this.state.filterIdx,this.state.filterValue))}},{key:"nextPage",value:function(){this.state.page++,this.loadNewsList(this.state.page,this.state.filterIdx,this.state.filterValue)}},{key:"filterBlocks",value:function(){this.state.click?this.loadClickNews(1):this.loadNewsList(this.state.page,this.state.filterIdx,this.state.filterValue)}},{key:"renderNewsList",value:function(){var e=this.state.list;return e?e.map(function(e){var t=new Date;t.setTime(e.time);var a=t.toLocaleString(),n=0;e.price>0&&(n=1);Object(L.getFileHost)(),e.id;return c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{target:"_blank",href:"/#/newsweb#"+e.id+"#"+n+e.title},e.title)),c.a.createElement("td",null,c.a.createElement(J.a,{rsId:e.author})),c.a.createElement("td",null,c.a.createElement(G.a,{title:"\u8ddd\u79bb--\u516c\u91cc",e:e})),c.a.createElement("td",null,e.price," \u79ef\u5206"),c.a.createElement("td",null,a),c.a.createElement("td",null,c.a.createElement(_.a,{id:e.id,title:e.title})))}):null}},{key:"toggleDelete",value:function(){this.setState({delete:!this.state.delete})}},{key:"renderDeleteDialog",value:function(){return c.a.createElement(O.a,{isOpen:this.state.delete,toggle:this.toggleDelete.bind(this),className:"modal-danger "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleDelete.bind(this)},"\u4e0b\u8f7d\u771e\u5ba2App"),c.a.createElement(T.a,null,c.a.createElement("p",null,"Web\u7248\u94b1\u5305\u4e0d\u652f\u6301\u670b\u53cb\u5708\u96b1\u85cf\u529f\u80fd\uff0c\u96b1\u85cf\u8d44\u6e90\u529f\u80fd\u9700\u8981",c.a.createElement("a",{href:"https://github.com/zker001/zker-android",target:"_blank"},"\u4e0b\u8f7d\u771e\u5ba2APP")),c.a.createElement("p",null,"\u5f7b\u5e95\u96b1\u85cf\u670b\u53cb\u5708\u9700\u8981\u652f\u4ed8\u670b\u53cb\u5708\u4ef7\u683c9999\u500d\u7684\u4ef7\u683c\u4f5c\u4e3a\u624b\u7eed\u8d39(\u514d\u8d39\u670b\u53cb\u5708\u9700\u89811000\u79ef\u5206)\uff0c\u9690\u85cf\u81ea\u5df1\u7684\u670b\u53cb\u5708\u9700\u8981\u652f\u4ed81\u79ef\u5206\u624b\u7eed\u8d39\u3002\u624b\u7eed\u8d39\u5c06\u7531\u673a\u5668\u4eba\u8d26\u6237\u83b7\u5f97\u3002\u670b\u53cb\u5708\u5f7b\u5e95\u96b1\u85cf\u540e\u5c06\u65e0\u6cd5\u67e5\u770b\u3002")),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleDelete.bind(this)},"OK")))}},{key:"renderGPSDialog",value:function(){return c.a.createElement(O.a,{isOpen:this.state.gps,toggle:this.toggleGps.bind(this),className:"modal-info "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleGps.bind(this)},"\u9700\u8981\u6a21\u7cca\u5b9a\u4f4d"),c.a.createElement(T.a,null,c.a.createElement("p",null,"\u5982\u679c\u9700\u8981\u901a\u8fc7\u5b9a\u4f4d\u9009\u62e9\u5468\u8fb9\u7684\u670b\u53cb\u5708\u4fe1\u606f,\u8ba1\u7b97\u670b\u53cb\u5708\u7684\u8ddd\u79bb\uff0c\u8bf7\u540c\u610f\u83b7\u53d6\u6a21\u7cca\u4f4d\u7f6e\u8bf7\u6c42\u3002")),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleGps.bind(this)},"OK")))}},{key:"toggle",value:function(e){var t=this.state.dropdownOpen.map(function(t,a){return a===e&&!t});this.setState({dropdownOpen:t})}},{key:"setFilter",value:function(e){this.setState({page:1,filterIdx:e,filterOption:this.filterMsg[e]})}},{key:"upateFilterValue",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({filterValue:t})}}},{key:"renderFilterOptions",value:function(){var e=this;return this.filterOptions.map(function(t,a){return c.a.createElement(P.a,{onClick:function(t){e.setFilter(a)}},t)})}},{key:"renderMap",value:function(){var e=this;return c.a.createElement(u.a,null,c.a.createElement(d.a,null,c.a.createElement(X,{ref:function(t){return e.map=t},onClick:function(t,a){var n=a.lngLat,l={latitude:n.lat,longitude:n.lng};e.setState({position:l,click:!0,clickPage:1}),e.loadClickNews(1,l)},zoom:[9],style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"100vh",width:"90vw"}})),this.renderClickModal(),this.renderHongbaoDialog())}},{key:"toggleClick",value:function(){this.setState({click:!this.state.click})}},{key:"renderClickModal",value:function(){var e=this,t=this.state.position;return t?(t=" \u9644\u8fd1\u670b\u53cb\u5708["+t.longitude+","+t.latitude+"]",c.a.createElement(O.a,{isOpen:this.state.click,toggle:this.toggleClick.bind(this),className:"modal-info "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleClick.bind(this)},t),c.a.createElement(T.a,null,this.renderClickList(),c.a.createElement(v.a,{onClick:function(t){e.toggleShareNews()},className:"btn-openid btn-brand"},c.a.createElement("i",{className:"fa fa-openid"}),c.a.createElement("span",null,"\u53d1\u5e03\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u670b\u53cb\u5708\u4fe1\u606f"))),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleClick.bind(this)},"OK")))):null}},{key:"gotoMap",value:function(e){}},{key:"renderClickNewsList",value:function(){var e=this.state.clickList;return e?e.map(function(e){var t=new Date;t.setTime(e.time);var a=t.toLocaleString(),n=0;return e.price>0&&(n=1),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{target:"_blank",href:"/#/newsweb#"+e.id+"#"+n+e.title},e.title)),c.a.createElement("td",null,e.author),c.a.createElement("td",null,c.a.createElement(G.a,{title:"\u8ddd\u79bb--\u516c\u91cc",e:e})),c.a.createElement("td",null,a))}):null}},{key:"renderClickList",value:function(){var e=this,t=this.state.clickList,a=this.state.clickedHongbaos;return t||a?c.a.createElement(h.a,null,c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(d.a,null,c.a.createElement(k.a,null,c.a.createElement(y.a,{placeholder:"\u641c\u7d22\u9644\u8fd1\u670b\u53cb\u5708\u6216\u7ea2\u5305",onChange:this.upateFilterValue.bind(this)}),c.a.createElement(v.a,{color:"primary",onClick:function(){return e.filterBlocks()}},c.a.createElement("i",{className:"fa fa-search"}),"\xa0")),c.a.createElement(x.a,{tabs:!0},c.a.createElement(I.a,null,c.a.createElement(D.a,{className:M()({active:"0"===this.state.clickTab}),onClick:function(){e.setState({clickTab:"0"})}},c.a.createElement("i",{className:"icon-calculator"})," ",c.a.createElement("span",{className:"0"===this.state.clickTab?"":"d-none"}," (\u6700\u8fd1\u66f4\u65b0) "),"\xa0",c.a.createElement(g.a,{color:"success"},"\u9644\u8fd1\u670b\u53cb\u5708\u4fe1\u606f"))),c.a.createElement(I.a,null,c.a.createElement(D.a,{className:M()({active:"1"===this.state.clickTab}),onClick:function(){e.setState({clickTab:"1"})}},c.a.createElement("i",{className:"icon-calculator"})," ",c.a.createElement("span",{className:"1"===this.state.clickTab?"":"d-none"}," (\u6700\u8fd1\u66f4\u65b0) "),"\xa0",c.a.createElement(g.a,{color:"success"},"\u9644\u8fd1\u7ea2\u5305\u5217\u8868 ")))),c.a.createElement(p.a,{hidden:"1"==this.state.clickTab,hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("tbody",null,this.renderClickNewsList())),c.a.createElement(p.a,{hidden:"0"==this.state.clickTab,hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("tbody",null,this.renderHongbaoList(this.state.clickedHongbaos))),c.a.createElement("nav",null,c.a.createElement(E.a,null,c.a.createElement(f.a,null,c.a.createElement(b.a,{previous:!0,tag:"button",onClick:function(t){e.preClickPage()}},"Prev(\u4e0a\u4e00\u9875")),c.a.createElement(f.a,{active:!0},c.a.createElement(b.a,{tag:"button"},this.state.page)),c.a.createElement(f.a,null,c.a.createElement(b.a,{next:!0,tag:"button",onClick:function(t){e.nextClickPage()}},"Next(\u4e0b\u4e00\u9875")))))))):null}},{key:"toggleJoinHongbao",value:function(){this.setState({joinHongbao:!this.state.joinHongbao})}},{key:"renderJoinHongbaoDialog",value:function(){return c.a.createElement(O.a,{isOpen:this.state.joinHongbao,toggle:this.toggleJoinHongbao.bind(this),className:"modal-danger "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleJoinHongbao.bind(this)},"\u4e0b\u8f7d\u771e\u5ba2App-\u62a2\u7ea2\u5305"),c.a.createElement(T.a,null,c.a.createElement("p",null,"Web\u7248\u94b1\u5305\u4e0d\u652f\u6301\u62a2\u7ea2\u5305\u529f\u80fd\uff0c\u62a2\u7ea2\u5305\u9700\u8981",c.a.createElement("a",{href:"https://github.com/zker001/zker-android",target:"_blank"},"\u4e0b\u8f7d\u771e\u5ba2App")),c.a.createElement("p",null,"\u7ea2\u5305\u4f59\u989d\u5927\u4e8e0\u7684\u60c5\u51b5\u4e0b\uff0c\u7ea2\u5305\u4e2d\u5956\u91d1\u989d\u968f\u673a.")),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleJoinHongbao.bind(this)},"OK")))}},{key:"renderHongbaos",value:function(){var e=this;return this.state.hongbaos?c.a.createElement(h.a,null,c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(d.a,null,c.a.createElement(k.a,null,c.a.createElement(y.a,{placeholder:"\u641c\u7d22\u7ea2\u5305",onChange:this.upateFilterValue.bind(this)}),c.a.createElement(v.a,{color:"primary",onClick:function(){return e.fitlerHongbao()}},c.a.createElement("i",{className:"fa fa-search"}),"\xa0")),c.a.createElement(p.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("tbody",null,this.renderHongbaoList(this.state.hongbaos,!0),this.renderJoinHongbaoDialog(),this.renderHongbaoDialog())),c.a.createElement("nav",null,c.a.createElement(E.a,null,c.a.createElement(f.a,null,c.a.createElement(b.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"\u4e0a\u4e00\u9875")),c.a.createElement(f.a,{active:!0},c.a.createElement(b.a,{tag:"button"},this.state.page)),c.a.createElement(f.a,null,c.a.createElement(b.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"\u4e0b\u4e00\u9875")))))))):null}},{key:"showHongbao",value:function(e){this.setState({hongbao:e,showHongbao:!0}),this.loadHongbaoInfo(e)}},{key:"loadHongbaoInfo",value:function(e){var t=this,a={action:"hongbao",id:""+e.id};Object(F.bshopCall)(a,function(e,a){if(e&&a){var n=t.state.hongbao;n.joins=a.list,n.content=a.content,t.setState({hongbao:n})}}.bind(this))}},{key:"renderHongbaoJoins",value:function(){if(!this.state.hongbao||!this.state.hongbao.joins)return null;var e=this.state.hongbao.joins.map(function(e){var t=new Date;t.setTime(e.time);var a=t.toLocaleString();return c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(J.a,{rsId:e.senderId})),c.a.createElement("td",null,e.amount),c.a.createElement("td",null,a))});return c.a.createElement(p.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u8d26\u6237"),c.a.createElement("th",null,"\u73b0\u91d1\u7ea2\u5305"),c.a.createElement("th",null,"\u65f6\u95f4"))),c.a.createElement("tbody",null,e))}},{key:"toggleHongbaoInfo",value:function(){this.setState({showHongbao:!this.state.showHongbao})}},{key:"renderHongbaoDialog",value:function(){var e=this.state.hongbao;if(!e)return null;var t=Object(L.getFileHost)()+"/html/0/"+e.hash;return c.a.createElement(O.a,{isOpen:this.state.showHongbao,toggle:this.toggleHongbaoInfo.bind(this),className:"modal-info "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleHongbaoInfo.bind(this)},e.title),c.a.createElement(T.a,null,c.a.createElement("iframe",{width:"100%",height:"100%",frameborder:"0",name:"_blank",src:t}),this.renderHongbaoJoins(),c.a.createElement("p",null,c.a.createElement("a",{target:"_blank",href:"https://github.com/zker001/zker-android"},"\u4e0b\u8f7d\u624b\u673aAPP\u62a2\u7ea2\u5305"))),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"info",onClick:this.toggleHongbaoInfo.bind(this)},"OK")))}},{key:"renderHongbaoList",value:function(e,t){var a=this;return e?e.map(function(e){var n=new Date;n.setTime(e.time);var l=n.toLocaleString(),i=Object(L.getFileHost)()+"/thumbnail/0/"+e.hash,s=(e.latitude,e.longitude,null);return t&&(s=c.a.createElement("img",{style:{width:50,height:50},src:i})),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),a.showHongbao(e)}},s,e.title)),c.a.createElement("td",null,c.a.createElement(J.a,{rsId:e.sender})),c.a.createElement("td",null,e.balance," / ",e.amount," \u79ef\u5206"),c.a.createElement("td",null,c.a.createElement(G.a,{title:"\u8ddd\u79bb--\u516c\u91cc",e:e})),c.a.createElement("td",null,l))}):null}},{key:"renderList",value:function(){var e=this;return this.state.list?c.a.createElement(h.a,null,c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(d.a,null,c.a.createElement(k.a,null,c.a.createElement(y.a,{placeholder:"\u641c\u7d22\u6240\u6709\u670b\u53cb\u5708",onChange:this.upateFilterValue.bind(this)}),c.a.createElement(v.a,{color:"primary",onClick:function(){return e.filterBlocks()}},c.a.createElement("i",{className:"fa fa-search"}),"\xa0")),c.a.createElement(p.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("tbody",null,this.renderNewsList())),this.renderGPSDialog(),c.a.createElement("nav",null,c.a.createElement(E.a,null,c.a.createElement(f.a,null,c.a.createElement(b.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"\u4e0a\u4e00\u9875")),c.a.createElement(f.a,{active:!0},c.a.createElement(b.a,{tag:"button"},this.state.page)),c.a.createElement(f.a,null,c.a.createElement(b.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"\u4e0b\u4e00\u9875")))))))):null}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(L.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"updateFee",value:function(e){if(e&&e.target){e.target.value;0==this.fee.length&&(this.fee=1)}}},{key:"updateVcode",value:function(e){if(e&&e.target){var t=e.target.value,a="";t.length>0&&(a=Object(L.simpleHash)(t)),this.setState({vcode:a})}}},{key:"updateDeadline",value:function(e){if(e&&e.target){var t=e.target.value;0==t.length?this.setState({deadline:"5"}):this.setState({deadline:t})}}},{key:"updateTitle",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({title:t})}}},{key:"updateDistance",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({distance:t})}}},{key:"handleChange",value:function(e){this.setState({content:e})}},{key:"updatePrice",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({price:t})}}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?c.a.createElement("div",null,c.a.createElement(S.a,null,this.state.dialogMsg),c.a.createElement(Y.a,null)):this.state.dialogMsg?c.a.createElement(S.a,null,this.state.dialogMsg):null}},{key:"renderHongbaoPosition",value:function(){var e=this.state.position,t="["+(e?e.longitude:this.state.longitude)+","+(e?e.latitude:this.state.latitude)+"]";return c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"hb2323",text:"(\u7ea2\u5305\u4f4d\u7f6e):",content:"\u8fd9\u4e2a\u4f4d\u7f6e\u9644\u8fd1\u7684\u7528\u6237\u67e5\u770b\u670b\u53cb\u5708\u65f6\u4f1a\u770b\u5230\u7ea2\u5305\u4fe1\u606f\u3002\u53ea\u6709\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u9644\u8fd1\u53d1\u5e03\u8fc7\u670b\u53cb\u5708\u4fe1\u606f\u7684\u7528\u6237\u624d\u53ef\u4ee5\u53c2\u4e0e\u62a2\u7ea2\u5305\u3002"}))),c.a.createElement(S.a,null,t))))}},{key:"renderNewsPosition",value:function(){var e=this.state.position,t="["+(e?e.longitude:this.state.longitude)+","+(e?e.latitude:this.state.latitude)+"]";return c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"hb23222",text:"(\u670b\u53cb\u5708\u4f4d\u7f6e):",content:"\u670b\u53cb\u5708\u4fe1\u606f\u4f4d\u7f6e\u7ecf\u7eac\u5ea6\u3002\u9644\u8fd1\u4f4d\u7f6e\u7684\u5176\u4ed6\u7528\u6237\u5728\u5730\u56fe\u4e0a\u70b9\u51fb\u65f6\u53ef\u4ee5\u770b\u5230\u3002\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u9644\u8fd1\u53d1\u5e03\u8fc7\u670b\u53cb\u5708\u4fe1\u606f\u7684\u7528\u6237\u624d\u6709\u8d44\u683c\u53c2\u4e0e\u6b64\u4f4d\u7f6e\u9644\u8fd1\u7684\u62a2\u7ea2\u5305\u6d3b\u52a8\u3002"}))),c.a.createElement(S.a,null,t))))}},{key:"rederAddHongbaoDialog",value:function(){var e=this;return c.a.createElement(O.a,{isOpen:this.state.addHongbao,toggle:this.toggleShareHongbao.bind(this),className:"modal-info "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleShareHongbao.bind(this)},"\u53d1\u7ea2\u5305"),c.a.createElement(T.a,null,c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(R.a,{onSecret:this.onSecret.bind(this)}))),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,"\u7ea2\u5305\u6807\u9898):")),c.a.createElement(y.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTitle.bind(this),placeholder:"Title \u6807\u9898"})))),this.renderHongbaoPosition(),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"pri4545",text:"(\u8ddd\u79bb\u9650\u5236):",content:"\u9650\u5236\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5468\u8fb9\u9650\u5236\u8ddd\u79bb\u4e4b\u5185\u53d1\u5e03\u8fc7\u670b\u53cb\u5708\u7684\u7528\u6237\u624d\u53ef\u4ee5\u62a2\u7ea2\u5305\u30020\u5219\u6ca1\u6709\u9650\u5236\u3002\u6570\u503c\u52a01\u5219\u8ddd\u79bb\u589e\u52a010\u516c\u91cc"}))),c.a.createElement(y.a,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updateDistance.bind(this),placeholder:"0"}),c.a.createElement(C.a,{addonType:"append"},c.a.createElement(N.a,null,"x 10\u516c\u91cc"))))),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"pri4545",text:"(\u91d1\u989d):",content:"\u7ea2\u5305\u7684\u603b\u91d1\u989d.\u6700\u5c0f10\u4e2a\u3002"}))),c.a.createElement(y.a,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updatePrice.bind(this),placeholder:"0"}),c.a.createElement(C.a,{addonType:"append"},c.a.createElement(N.a,null,"\u79ef\u5206"))))),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"min123",text:"(\u673a\u5668\u4eba\u8d39):",content:"\u533a\u5757\u94fe\u673a\u5668\u4eba\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684BTB\u8d26\u6237\u968f\u673a\u4ea7\u751f\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u673a\u5668\u4eba\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u673a\u5668\u4eba\u8d39\u3002\u53d1\u5e03\u7ea2\u5305\u6700\u5c110.01\u4e2a"}))),c.a.createElement(y.a,{id:"appendedPrependedInput",size:"16",placeholder:"0.01",type:"text",onChange:this.updateFee.bind(this)}),c.a.createElement(C.a,{addonType:"append"},c.a.createElement(N.a,null,"\u79ef\u5206"))))),this.renderDeadline(),c.a.createElement(w.a,null,c.a.createElement(U.a,{title:"\u6dfb\u52a0\u7ea2\u5305\u7f29\u7565\u56fe",onFinish:function(t){if(t){var a=t.split(";base64,")[1];e.setState({avatar:a})}}})),this.renderVcode(),c.a.createElement(w.a,null,c.a.createElement(S.a,{htmlFor:"appendedInputButtons"},"\u7ea2\u5305\u5185\u5bb9:"),c.a.createElement(A.a,{value:this.state.content,modules:this.modules,placeholder:"\u8fd9\u91cc\u7f16\u8f91\u5176\u4ed6\u4eba\u62a2\u7ea2\u5305\u65f6\u53ef\u4ee5\u770b\u5230\u7684\u5185\u5bb9..",onChange:this.handleChange.bind(this)})),c.a.createElement(w.a,null,this.renderdialogMsg())),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleShareHongbao.bind(this)},"\u5173\u95ed"),c.a.createElement(v.a,{color:"danger",hidden:this.state.success,onClick:function(t){e.setState({dialogMsg:"\u7ea2\u5305\u53d1\u5e03\u4e2d,\u6709\u56fe\u7247\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f..."}),setTimeout(function(){e.doSendHongbao()},200)}.bind(this)},"\u53d1\u7ea2\u5305")))}},{key:"renderVcode",value:function(){return c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"dl4545",text:"\u7ea2\u5305\u53e3\u4ee4:",content:"\u7ea2\u5305\u53e3\u4ee4\u4e00\u822c\u586b\u5199\u5728\u7ea2\u5305\u5185\u5bb9\u5185\uff0c\u4ee5\u4fdd\u8bc1\u7528\u6237\u5b8c\u6574\u6d4f\u89c8\u8fc7\u7ea2\u5305\u5185\u5bb9\u3002\u5982\u679c\u7ea2\u5305\u6709\u53e3\u4ee4\uff0c\u9700\u8981\u8f93\u5165\u6b63\u786e\u7684\u53e3\u4ee4\u624d\u53ef\u4ee5\u9886\u53d6\u3002\u65e0\u53e3\u4ee4\u7ea2\u5305\u4e0d\u9700\u8981\u586b\u5199\u3002"}))),c.a.createElement(y.a,{id:"appendedPrependedInput",size:"16",placeholder:"",onChange:this.updateVcode.bind(this),type:"text"}))))}},{key:"renderDeadline",value:function(){return null}},{key:"rederAddProductDialog",value:function(){var e=this;return c.a.createElement(O.a,{isOpen:this.state.addProduct,toggle:this.toggleShareNews.bind(this),className:"modal-info "+this.props.className},c.a.createElement(H.a,{toggle:this.toggleShareNews.bind(this)},"\u53d1\u5e03\u670b\u53cb\u5708"),c.a.createElement(T.a,null,c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(R.a,{onSecret:this.onSecret.bind(this)}))),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,"\u670b\u53cb\u5708\u6807\u9898:")),c.a.createElement(y.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTitle.bind(this),placeholder:" \u6807\u9898"})))),this.renderNewsPosition(),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"pri4545",text:"(\u4ef7\u683c):",content:"\u4ef7\u683c\u7b49\u4e8e0\u7684\u670b\u53cb\u5708\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u67e5\u770b\u3002\u4ef7\u683c\u5927\u4e8e0\u7684\u670b\u53cb\u5708\u4fe1\u606f\u9700\u8981\u4ed8\u8d39\u7ed9\u53d1\u5e03\u8005\u4e4b\u540e\u624d\u80fd\u67e5\u770b\u5177\u4f53\u5185\u5bb9\u3002"}))),c.a.createElement(y.a,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updatePrice.bind(this),placeholder:"0"}),c.a.createElement(C.a,{addonType:"append"},c.a.createElement(N.a,null,"\u79ef\u5206"))))),c.a.createElement(w.a,null,c.a.createElement("div",{className:"controls"},c.a.createElement(k.a,{className:"input-prepend"},c.a.createElement(C.a,{addonType:"prepend"},c.a.createElement(N.a,null,c.a.createElement(B.a,{id:"min123",text:"(\u673a\u5668\u4eba\u8d39):",content:"\u533a\u5757\u94fe\u673a\u5668\u4eba\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684BTB\u8d26\u6237\u968f\u673a\u4ea7\u751f\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u673a\u5668\u4eba\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u673a\u5668\u4eba\u8d39\u3002\u53d1\u5e03\u670b\u53cb\u5708\u6700\u5c110.01\u4e2a"}))),c.a.createElement(y.a,{id:"appendedPrependedInput",size:"16",placeholder:"0.01",type:"text",onChange:this.updateFee.bind(this)}),c.a.createElement(C.a,{addonType:"append"},c.a.createElement(N.a,null,"\u79ef\u5206"))))),this.renderDeadline(),c.a.createElement(w.a,null,c.a.createElement(U.a,{title:"\u6dfb\u52a0\u6807\u9898\u7f29\u7565\u56fe",onFinish:function(t){if(t){var a=t.split(";base64,")[1];e.setState({avatar:a})}}})),c.a.createElement(w.a,null,c.a.createElement(S.a,{htmlFor:"appendedInputButtons"},"\u8be6\u7ec6\u5185\u5bb9:"),c.a.createElement(A.a,{value:this.state.content,modules:this.modules,placeholder:"\u8fd9\u91cc\u7f16\u8f91\u670b\u53cb\u5708\u5185\u5bb9\uff0c\u6dfb\u52a0\u56fe\u7247\u7b49...",onChange:this.handleChange.bind(this)})),c.a.createElement(w.a,null,this.renderdialogMsg())),c.a.createElement(j.a,null,c.a.createElement(v.a,{color:"danger",onClick:this.toggleShareNews.bind(this)},"\u5173\u95ed"),c.a.createElement(v.a,{color:"danger",hidden:this.state.success,onClick:function(t){e.setState({dialogMsg:"(\u53d1\u5e03\u4e2d,\u6709\u56fe\u7247\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f)"}),setTimeout(function(){e.dopublishNews()},200)}.bind(this)},"\u53d1\u5e03")))}},{key:"uploadNews",value:function(e,t,a){console.log("upload news not done yet");var n=t,l=(Object(L.getFileHost)(),{url:Object(L.getFileHost)()+"/rnShare/"+e+"/token1",body:n,json:!1});Z.concat(l,function(e,t,n){a(!0)}),this.state.avatar&&(l={url:Object(L.getFileHost)()+"/upthumbnail/"+e+"/token1",body:n=this.state.avatar,json:!1},Z.concat(l,function(e,t,a){}))}},{key:"dopublishNews",value:function(){var t=this;if(this.state.title){var a=this.state.content,n=(new Date).toString();a='<html><head><meta charset="UTF-8"><title>'+this.state.title+"</title></head><p>"+a+"</p><p>"+n+"</p></html>",this.share.seedContent(a,function(n){var l=n.infoHash,i=n.torrentFile.toString("base64"),s=e.from(t.state.title).toString("base64"),r=t.state.position,o=(r?r.longitude:t.state.longitude)+"",c=(r?r.latitude:t.state.latitude)+"",u={action:"transaction",type:"news",newsId:l,accountId:t.state.account.aid,fee:t.state.fee,price:t.state.price,deadline:t.state.deadline,tags:"no",title:s,longtitude:o,latitude:c,avatar:""},d={title:s};Object(F.doBShopTransaction)(t.state.account.secret,u,function(e,n){if(e&&n&&n.ok){t.setState({dialogMsg:"\u4ea4\u6613\u6210\u529f,\u8d44\u6e90\u4e0a\u4f20\u4e2d...\u8bf7\u7a0d\u540e",success:!0});var s=(new Date).getTime();s-=s%864e5;var r=Object(L.signString)(t.state.account.secret,l+s),o={url:Object(L.getFileHost)()+"/torrentFile/"+l+"/"+r,nonce:"0000"},c={torrentFile:i,infoHash:l,name:l+".html"};Object(L.postSafe)(o,c,function(e){e&&t.uploadNews(l,a,function(){t.setState({dialogMsg:"\u53d1\u5e03\u6210\u529f",success:!0})})})}else n&&!n.ok&&"1001"===n.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u53d1\u5e03\u5931\u8d25"})},d)})}else this.setState({dialogMsg:"\u7f3a\u5c11\u670b\u53cb\u5708\u6807\u9898"})}},{key:"doSendHongbao",value:function(){var t=this;if(this.state.title)if(parseInt(this.state.price)<10)this.setState({dialogMsg:"\u7ea2\u5305\u91d1\u989d\u6700\u5c0f\u4e3a10\u79ef\u5206"});else{var a=this.state.content;a='<html><head><meta charset="UTF-8"><title>'+this.state.title+"</title></head><p>"+a+"</p></html>";var n=Object(F.getTorrentHash)(a),l=e.from(this.state.title).toString("base64"),i=this.state.position,s=(i?i.longitude:this.state.longitude)+"",r=(i?i.latitude:this.state.latitude)+"",o=this.state.distance,c=this.state.vcode,u={action:"transaction",type:"hongbao",content:"",accountId:this.state.account.aid,fee:this.state.fee,price:this.state.price,deadline:this.state.deadline,tags:"",title:l,longtitude:s,distance:o,latitude:r,vcode:c,hongbaoId:n};Object(F.doBShopTransaction)(this.state.account.secret,u,function(e,n){e&&n&&n.ok?(t.setState({dialogMsg:"\u7ea2\u5305\u53d1\u5e03\u6210\u529f,\u673a\u5668\u4eba\u9a8c\u8bc1\u540e(\u5927\u7ea6\u4e00\u5206\u949f)\u5373\u53ef\u663e\u793a.",success:!0}),t.uploadNews(n.id,a)):n&&!n.ok&&"1001"===n.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u53d1\u5e03\u5931\u8d25"})}.bind(this))}else this.setState({dialogMsg:"\u7f3a\u5c11\u7ea2\u5305\u6807\u9898"})}},{key:"toggleShareNews",value:function(){this.setState({addProduct:!this.state.addProduct,success:!1})}},{key:"toggleShareHongbao",value:function(){this.setState({addHongbao:!this.state.addHongbao,success:!1})}},{key:"onTabClicked",value:function(e){var t=this;this.setState({activeTab:e}),"2"===e&&this.loadHongbaoList(),"1"===e&&setTimeout(function(){t.map&&t.map.state.map.flyTo({center:[116.45,39.8],zoom:9,speed:.2})},1e3)}},{key:"renderContent",value:function(){return"0"==this.state.activeTab?this.renderList():"2"==this.state.activeTab?this.renderHongbaos():this.renderMap()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(x.a,{tabs:!0},c.a.createElement(I.a,null,c.a.createElement(D.a,{className:M()({active:"0"===this.state.activeTab}),onClick:function(){e.onTabClicked("0")}},c.a.createElement("i",{className:"icon-calculator"})," ",c.a.createElement("span",{className:"0"===this.state.activeTab?"":"d-none"},"\u6700\u8fd1\u66f4\u65b0"),"\xa0",c.a.createElement(g.a,{color:"success"},"\u6240\u6709\u670b\u53cb\u5708\u4fe1\u606f "))),c.a.createElement(I.a,null,c.a.createElement(D.a,{className:M()({active:"2"===this.state.activeTab}),onClick:function(){e.onTabClicked("2")}},c.a.createElement("i",{className:"icon-calculator"})," ",c.a.createElement("span",{className:"2"===this.state.activeTab?"":"d-none"},"\u9644\u8fd1\u7ea2\u5305"),"\xa0",c.a.createElement(g.a,{color:"success"},"\u6240\u6709\u7ea2\u5305\u5217\u8868 "))),c.a.createElement(I.a,null,c.a.createElement(D.a,{className:M()({active:"1"===this.state.activeTab}),onClick:function(){e.onTabClicked("1")}},c.a.createElement("i",{className:"icon-basket-loaded"})," ",c.a.createElement("span",{className:"1"===this.state.activeTab?"":"d-none"},"\u70b9\u51fb\u5730\u56fe\u663e\u793a\u9644\u8fd1\u670b\u53cb\u5708\u548c\u7ea2\u5305\u4fe1\u606f"),"\xa0",c.a.createElement(g.a,{pill:!0,color:"danger"},"\u5730\u56fe\u6a21\u5f0f")))),this.renderContent(),this.rederAddProductDialog(),this.rederAddHongbaoDialog(),this.renderDeleteDialog(),c.a.createElement(v.a,{onClick:function(t){e.toggleShareNews()},className:"btn-openid btn-brand"},c.a.createElement("i",{className:"fa fa-openid"}),c.a.createElement("span",null,"\u53d1\u5e03\u670b\u53cb\u5708\u4fe1\u606f")))}}]),a}(o.Component);t.default=Q}.call(this,a(7).Buffer)}}]);
//# sourceMappingURL=7.2f280768.chunk.js.map