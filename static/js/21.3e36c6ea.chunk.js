(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{918:function(e,t,a){"use strict";a.r(t);var n=a(51),r=a(21),l=a(22),i=a(24),o=a(23),c=a(25),s=a(0),u=a.n(s),d=a(167),m=a(227),h=a(228),f=a(230),p=a(126),b=a(390),v=a(387),E=a(388),y=a(13),g=(a(168),a(29)),k=a(68),I=(a(79),a(41)),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).page=1,a.state={list:[],page:1,count:0,paying:!1,fee:"1",deadline:"5"},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Object(y.loadLocalAccount)();t&&t.secret&&(this.secret=t.secret),this.setState({account:t});var a=window.location.hash,n=null,r=null;if(a){var l=a.indexOf("#",1);l>0&&((l=(a=a.substr(l)).indexOf("#",1))>1?(r=a.substr(l),(r=decodeURIComponent(r))&&this.setState({title:r}),n=a.substr(1,l-1)):n=a.substr(1)),this.loadHongbaoInfo(n)}setTimeout(function(){var t=null;!t&&e.state.account&&(t=e.state.account.peerId),t?e.isTempPeerId(t)&&e.setState({peerId:null}):(t=e.createTempPeerId(),e.setState({peerId:t}));setTimeout(function(){e.loadIframe(t,n),e.setState({iframe:!0})},1e3)}.bind(this),500)}},{key:"loadHongbaoInfo",value:function(e){var t=this,a={action:"hongbao",hash:e};Object(g.bshopCall)(a,function(e,a){if(e&&a){var n={};n.joins=a.list,n.content=a.content,t.setState({hongbao:n})}}.bind(this))}},{key:"loadIframe",value:function(e,t){var a=document.querySelector("#iframe"),n=Object(y.getFileHost)()+"/html/"+e+"/"+t;a.innerHTML="<iframe width='100%' height='500px' frameborder='0' name='_blank' src='"+n+"' />"}},{key:"isTempPeerId",value:function(e){return e&&e.startsWith("0000")}},{key:"createTempPeerId",value:function(){return"0000"+I(18).toString("hex")}},{key:"togglePurchase",value:function(){this.setState({paying:!this.state.paying})}},{key:"doPurchase",value:function(){}},{key:"renderPayButton",value:function(){return u.a.createElement(p.a,{color:"primary"},"\u8bf7\u4e0b\u8f7d\u771e\u5ba2\u5b89\u5353\u5ba2\u6237\u7aef\u9886\u53d6\u73b0\u91d1\u7ea2\u5305,",u.a.createElement("a",{href:"https://github.com/zker001/zker-android"},"\u70b9\u51fb\u4e0b\u8f7d\u5b89\u5353\u5ba2\u6237\u7aef")," ")}},{key:"renderIframe",value:function(){return u.a.createElement("div",{id:"iframe",style:{width:"100%"}})}},{key:"renderPlayer",value:function(){return this.state.iframe?null:u.a.createElement("div",null,u.a.createElement("div",{id:"status"},u.a.createElement("div",null,u.a.createElement("code",{id:"numPeers"},"0 peers(\u8282\u70b9"),".",u.a.createElement("code",{id:"downloadSpeed"},"0 b/s ")," / \u2197",u.a.createElement("code",{id:"uploadSpeed"},"0 b/s - "),u.a.createElement("code",{id:"downloaded"})," of",u.a.createElement("code",{id:"total"})," \u2014",u.a.createElement("span",{id:"remaining"}))),u.a.createElement("div",{id:"player",style:{width:"100%"}}))}},{key:"renderHongbaoJoins",value:function(){if(!this.state.hongbao||!this.state.hongbao.joins)return null;var e=this.state.hongbao.joins.map(function(e){var t=new Date;t.setTime(e.time);var a=t.toLocaleString();return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(k.a,{rsId:e.senderId})),u.a.createElement("td",null,e.amount,"\u79ef\u5206\u73b0\u91d1"),u.a.createElement("td",null,a))});return u.a.createElement(d.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u8d26\u6237"),u.a.createElement("th",null,"\u9886\u53d6\u7ea2\u5305"),u.a.createElement("th",null,"\u65f6\u95f4"))),u.a.createElement("tbody",null,e))}},{key:"render",value:function(){return u.a.createElement("div",{id:"playdiv"},u.a.createElement(m.a,null,u.a.createElement(h.a,null,this.state.title),u.a.createElement(f.a,null,this.renderPayButton(),this.renderPlayer(),this.renderIframe(),this.renderHongbaoJoins())))}}]),t}(s.Component);s.Component;t.default=w}}]);