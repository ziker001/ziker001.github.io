{"version":3,"sources":["views/ggv/js/share.js","views/conponents/ImgDialog/cropImg.js","views/conponents/ImgDialog/index.js","views/ggv/PopLink/PopLink.js","views/ggv/NewsList/MapDialog.js","views/ggv/NewsList/NewsList.js"],"names":["WebTorrent","require","ShareManager","Object","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","client","tracker","rtcConfig","iceServers","urls","dht","torrentCallback","onStartCallback","uploadInput","up","document","querySelector","uploadElement","err","files","map","file","onFiles","bind","name","indexOf","isTorrentFile","torrent","on","warn","console","log","content","buf","Buffer","from","tor","seed","infoHash","_this","length","setTimeout","onSeedTorrent","forEach","elem","opts","cb","type","addEventListener","ev","reader","FileReader","index","results","read","readAsText","readAsDataURL","readAsArrayBuffer","e","push","target","module","exports","createImage","url","Promise","resolve","reject","image","Image","error","setAttribute","src","getCroppedImg","_x","_x2","_getCroppedImg","apply","arguments","_callee","imageSrc","pixelCrop","canvas","regenerator_default","a","wrap","_context","prev","next","sent","createElement","width","height","getContext","drawImage","x","y","abrupt","toDataURL","stop","readFile","result","ImgDialog","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onCropChange","crop","setState","onCropComplete","croppedArea","croppedAreaPixels","onZoomChange","zoom","onFileChange","_ref","asyncToGenerator","mark","imageDataUrl","showCroppedImage","_callee2","croppedImage","_context2","state","onFinish","toggleEditor","mode","editing","react_default","Modal","isOpen","toggle","className","ModalHeader","title","ModalBody","style","onChange","dist_default","aspect","ModalFooter","Button","color","onClick","_this2","renderEditor","href","preventDefault","Component","PopLink","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","popoverOpen","id","link","getCurrentHost","react__WEBPACK_IMPORTED_MODULE_6___default","reactstrap__WEBPACK_IMPORTED_MODULE_7__","placement","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","Map","ReactMapboxGl","accessToken","MapDialog","delete","react__WEBPACK_IMPORTED_MODULE_5___default","toggleDelete","renderModal","_this3","res","center","longitude","longtitude","latitude","flyTo","speed","_this4","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","ref","m","coordinates","click","lngLat","position","lat","lng","clickPage","containerStyle","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_6__","get","NewsList","page","share","list","fee","deadline","price","gps","activeTab","addHongbao","distance","joinHongbao","vcode","modules","toolbar","header","font","size","align","background","indent","clipboard","matchVisual","loadNewsList","filterIdx","account","loadLocalAccount","secret","navigator","geolocation","getCurrentPosition","coords","loadClickNews","data","query","filterValue","accountId","aid","toString","action","tab","JSON","stringify","bshopCall","ok","clickList","clickedHongbaos","hongbaos","locations","getFavoriteLocations","d","Date","setTime","time","btime","toLocaleString","pay","getFileHost","_conponents_AccountDialog__WEBPACK_IMPORTED_MODULE_35__","rsId","author","_MapDialog__WEBPACK_IMPORTED_MODULE_42__","_ggv_PopLink__WEBPACK_IMPORTED_MODULE_41__","reactstrap__WEBPACK_IMPORTED_MODULE_22__","reactstrap__WEBPACK_IMPORTED_MODULE_23__","reactstrap__WEBPACK_IMPORTED_MODULE_24__","reactstrap__WEBPACK_IMPORTED_MODULE_25__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","toggleGps","i","newArray","dropdownOpen","element","idx","filterOption","filterMsg","value","_this5","filterOptions","op","reactstrap__WEBPACK_IMPORTED_MODULE_26__","setFilter","_this6","renderClickModal","renderHongbaoDialog","_this7","pos","toggleClick","renderClickList","toggleShareNews","_this8","reactstrap__WEBPACK_IMPORTED_MODULE_16__","reactstrap__WEBPACK_IMPORTED_MODULE_17__","placeholder","upateFilterValue","filterBlocks","reactstrap__WEBPACK_IMPORTED_MODULE_27__","tabs","reactstrap__WEBPACK_IMPORTED_MODULE_28__","reactstrap__WEBPACK_IMPORTED_MODULE_29__","classnames","active","clickTab","hidden","hover","bordered","striped","responsive","renderClickNewsList","renderHongbaoList","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","previous","tag","preClickPage","nextClickPage","toggleJoinHongbao","_this9","fitlerHongbao","renderJoinHongbaoDialog","prePage","nextPage","hongbao","showHongbao","loadHongbaoInfo","hb","_this10","joins","records","r","senderId","amount","hash","toggleHongbaoInfo","frameborder","renderHongbaoJoins","thumbnail","_this11","tnimg","sender","balance","_this12","renderNewsList","renderGPSDialog","sec","calcAccountId","userSec","vcodestring","simpleHash","renderDesposit","reactstrap__WEBPACK_IMPORTED_MODULE_20__","dialogMsg","_conponents_DepositDialog_DepositDialog__WEBPACK_IMPORTED_MODULE_38__","reactstrap__WEBPACK_IMPORTED_MODULE_21__","reactstrap__WEBPACK_IMPORTED_MODULE_18__","addonType","reactstrap__WEBPACK_IMPORTED_MODULE_19__","_conponents_PopHint_PopHint__WEBPACK_IMPORTED_MODULE_36__","text","_this13","toggleShareHongbao","_conponents_BtbSecret_BtbSecret__WEBPACK_IMPORTED_MODULE_37__","onSecret","updateTitle","renderHongbaoPosition","updateDistance","updatePrice","updateFee","renderDeadline","_conponents_ImgDialog__WEBPACK_IMPORTED_MODULE_40__","img","avatar","split","renderVcode","htmlFor","react_quill__WEBPACK_IMPORTED_MODULE_33___default","handleChange","renderdialogMsg","success","doSendHongbao","updateVcode","_this14","addProduct","renderNewsPosition","dopublishNews","newsId","b64","body","json","concat","_this15","seedContent","torrentFile","tags","parameters","doBShopTransaction","msg","getTime","signature","signString","config","nonce","req","postSafe","uploadNews","code","_this16","parseInt","hongbaoId","getTorrentHash","_this17","loadHongbaoList","renderList","renderHongbaos","renderMap","_this18","onTabClicked","pill","renderContent","rederAddProductDialog","rederAddHongbaoDialog","renderDeleteDialog"],"mappings":"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","file":"static/js/8.7e8cdd9a.chunk.js","sourcesContent":["const WebTorrent = require('flycat-torrent')\r\n\r\nclass ShareManager {\r\n\r\n    constructor() {\r\n        let rtcConfig = {\r\n            \"iceServers\": [\r\n                { \"urls\": \"stun:stun2.l.google.com:19302\" },\r\n                { \"urls\": \"stun:stun3.l.google.com:19302\" },\r\n                { \"urls\": \"stun:stun.btbresource.com:3478\" },\r\n                {\r\n                    \"urls\": \"stun:global.stun.twilio.com:3478?transport=udp\"\r\n                }\r\n            ]\r\n        };\r\n        this.client = new WebTorrent({\r\n            tracker: {\r\n                rtcConfig: rtcConfig\r\n            },\r\n            dht: false\r\n        })\r\n        this.torrentCallback = null\r\n        this.onStartCallback = null\r\n    }\r\n\r\n    init(torrentCallback, onStartCallback, uploadInput) {\r\n        this.torrentCallback = torrentCallback;\r\n        this.onStartCallback = onStartCallback;\r\n        var up = uploadInput;\r\n        if (!up)\r\n            up = document.querySelector('input[name=upload]')\r\n        if (up) {\r\n            this.uploadElement(up, this.onStartCallback, (function (err, files) {\r\n                if (err) return err;\r\n                files = files.map(function (file) { return file.file })\r\n                this.onFiles(files)\r\n            }).bind(this))\r\n        }\r\n    }\r\n\r\n    isTorrentFile(file) {\r\n        //var extname = path.extname(file.name).toLowerCase()\r\n        return file.name.indexOf('.torrent') !== -1;\r\n    }\r\n\r\n    isNotTorrentFile(file) {\r\n        return !this.isTorrentFile(file)\r\n    }\r\n\r\n    onSeedTorrent(torrent) {\r\n        torrent.on('warning', function (warn) {\r\n            console.log(warn);\r\n        })\r\n        torrent.on('error', function (err) {\r\n            console.log(err);\r\n        })\r\n        this.torrentCallback(torrent);\r\n    }\r\n\r\n    seedContent(content,torrentCallback) {\r\n        let buf = Buffer.from(content)\r\n        let tor = this.client.seed(buf, torrentCallback);\r\n        tor.on('infoHash', (infoHash) => {\r\n            torrentCallback(tor);\r\n        })\r\n    }\r\n\r\n    seed(files) {\r\n        if (files.length === 0) return\r\n        //console.log('Seeding ' + files.length + ' files')\r\n        this.onStartCallback(files)\r\n        // Seed from WebTorrent\r\n        setTimeout(() => {\r\n            let tor = this.client.seed(files, this.onSeedTorrent.bind(this));\r\n            tor.on('infoHash', (infoHash) => {\r\n                this.torrentCallback(tor);\r\n            })\r\n        }, 1000);\r\n    }\r\n    //\r\n    onFiles(files) {\r\n        console.log('got files:')\r\n        files.forEach(function (file) {\r\n            // console.log(' - %s (%s bytes)', file.name, file.size)\r\n        })\r\n\r\n        // .torrent file = start downloading the torrent\r\n        //files.filter(isTorrentFile).forEach(downloadTorrentFile)\r\n\r\n        // everything else = seed these files\r\n        this.seed(files)\r\n    }\r\n\r\n    uploadElement(elem, onStartCallback, opts, cb) {\r\n        if (typeof opts === 'function') {\r\n            cb = opts;\r\n            opts = {};\r\n        }\r\n        if (typeof opts === 'string') opts = { type: opts };\r\n\r\n        elem.addEventListener('change', function (ev) {\r\n            if (elem.files.length === 0) return cb(null, []);\r\n            if (onStartCallback)\r\n                onStartCallback(null)\r\n            var reader = new FileReader();\r\n            var index = 0;\r\n            var results = [];\r\n\r\n            reader.addEventListener('load', function (e) {\r\n                results.push({\r\n                    file: elem.files[index],\r\n                    target: e.target\r\n                });\r\n                index++;\r\n                if (index === elem.files.length) cb(null, results)\r\n                else read(index)\r\n            });\r\n            read(index);\r\n\r\n            function read(index) {\r\n                var file = elem.files[index];\r\n                if (opts.type === 'text') {\r\n                    reader.readAsText(file);\r\n                }\r\n                else if (opts.type === 'url') {\r\n                    reader.readAsDataURL(file);\r\n                }\r\n                else reader.readAsArrayBuffer(file);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = ShareManager;","const createImage = url =>\r\n  new Promise((resolve, reject) => {\r\n    const image = new Image()\r\n    image.addEventListener('load', () => resolve(image))\r\n    image.addEventListener('error', error => reject(error))\r\n    image.setAttribute('crossOrigin', 'anonymous') // needed to avoid cross-origin issues on CodeSandbox\r\n    image.src = url\r\n  })\r\n\r\n/**\r\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\r\n * @param {File} image - Image File url\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\r\n */\r\nexport default async function getCroppedImg(imageSrc, pixelCrop) {\r\n  const image = await createImage(imageSrc)\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = pixelCrop.width\r\n  canvas.height = pixelCrop.height\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  ctx.drawImage(\r\n    image,\r\n    pixelCrop.x,\r\n    pixelCrop.y,\r\n    pixelCrop.width,\r\n    pixelCrop.height,\r\n    0,\r\n    0,\r\n    pixelCrop.width,\r\n    pixelCrop.height\r\n  )\r\n\r\n  // As Base64 string \r\n  // return canvas.toDataURL('image/jpeg');\r\n\r\n  // As a blob\r\n  return new Promise((resolve, reject) => {\r\n    /*\r\n    canvas.toBlob(file => {\r\n      resolve(URL.createObjectURL(file))\r\n    }, 'image/jpeg')\r\n  */\r\n    let img = canvas.toDataURL('image/jpeg', 0.1)\r\n    resolve(img)\r\n  })\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Button } from 'reactstrap'\r\nimport Cropper from 'react-easy-crop'\r\nimport getCroppedImg from './cropImg'\r\nfunction readFile(file) {\r\n    return new Promise(resolve => {\r\n        const reader = new FileReader()\r\n        reader.addEventListener('load', () => resolve(reader.result), false)\r\n        reader.readAsDataURL(file)\r\n    })\r\n}\r\n\r\nexport default class ImgDialog extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            mode: 'simple', editing: false, imageSrc: null,\r\n            crop: { x: 0, y: 0 },\r\n            zoom: 1,\r\n        }\r\n    }\r\n\r\n    toggleEditor() {\r\n        this.setState({ editing: !this.state.editing, imageSrc: null })\r\n    }\r\n\r\n    onCropChange = crop => {\r\n        this.setState({ crop })\r\n    }\r\n\r\n    onCropComplete = (croppedArea, croppedAreaPixels) => {\r\n        console.log(croppedArea, croppedAreaPixels)\r\n        this.setState({ croppedAreaPixels })\r\n    }\r\n\r\n    onZoomChange = zoom => {\r\n        this.setState({ zoom })\r\n    }\r\n\r\n    onFileChange = async e => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const imageDataUrl = await readFile(e.target.files[0])\r\n            this.setState({\r\n                imageSrc: imageDataUrl,\r\n                crop: { x: 0, y: 0 },\r\n                zoom: 1,\r\n            })\r\n        }\r\n    }\r\n\r\n    showCroppedImage = async () => {\r\n        const croppedImage = await getCroppedImg(\r\n            this.state.imageSrc,\r\n            this.state.croppedAreaPixels\r\n        )\r\n        this.setState({ croppedImage })\r\n        this.props.onFinish(this.state.croppedImage)\r\n        this.toggleEditor()\r\n    }\r\n\r\n    renderEditor() {\r\n        return (<Modal isOpen={this.state.editing} toggle={this.toggleEditor.bind(this)}\r\n            className={'modal-info ' + this.props.className}>\r\n            <ModalHeader toggle={this.toggleEditor.bind(this)}>{this.props.title}</ModalHeader>\r\n            <ModalBody>\r\n                <div style={{ width: 200, height: 300 }}>\r\n                    <input type=\"file\" onChange={this.onFileChange} />\r\n                    {this.state.imageSrc && (\r\n                        <Cropper\r\n                            image={this.state.imageSrc}\r\n                            crop={this.state.crop}\r\n                            zoom={this.state.zoom}\r\n                            aspect={this.state.aspect}\r\n                            onCropChange={this.onCropChange}\r\n                            onCropComplete={this.onCropComplete}\r\n                            onZoomChange={this.onZoomChange}\r\n                        />)}\r\n                </div>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n                <Button color=\"danger\" onClick={this.showCroppedImage.bind(this)}>完成</Button>\r\n            </ModalFooter>\r\n        </Modal>)\r\n    }\r\n\r\n    render() {\r\n        return (<div>\r\n            {this.renderEditor()}\r\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); this.toggleEditor() }}>{this.props.title}</a>\r\n            {this.state.croppedImage && (<img style={{ width: 50, height: 50 }} src={this.state.croppedImage} ></img>)}\r\n        </div>)\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { Popover, PopoverHeader, PopoverBody, Alert, FormGroup, Collapse, Label } from 'reactstrap'\r\nimport { loadLocalAccount, saveUserSec, createPeerId, calcAccountId, getShareHost, getCurrentHost } from '../../ggv/js/gegeUtil'\r\nclass PopLink extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n    this.state = {\r\n      popoverOpen: false\r\n    };\r\n  }\r\n \r\n  toggle() {\r\n    this.setState({\r\n      popoverOpen: !this.state.popoverOpen,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let id = 'Popover-' + this.props.id;\r\n    let link = getCurrentHost() + \"/#/newsweb#\" + this.props.id + '#【眞客】' + this.props.title;\r\n    return (\r\n      <span>\r\n        <span className='alert-primary  fade show' id={id} onClick={this.toggle}>\r\n          分享链接\r\n        </span>\r\n        <Popover placement='top' isOpen={this.state.popoverOpen} target={id} toggle={this.toggle}>\r\n          <PopoverHeader>复制这个链接分享给其他人</PopoverHeader>\r\n          <PopoverBody>{link}</PopoverBody>\r\n        </Popover>\r\n      </span>\r\n    );\r\n  }\r\n}\r\nexport default PopLink;","import React, { Component } from 'react';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { CardGroup, Container, Form, Alert, Fade, Collapse, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, ButtonDropdown, DropdownItem, Nav, NavItem, NavLink, } from 'reactstrap'\r\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\r\nconst Map = ReactMapboxGl({\r\n    accessToken: \"pk.eyJ1IjoiYnRicmVzb3VyY2UiLCJhIjoiY2pzMnRjZ3N1Mjg2NDQzcXI1MmtkN2JmciJ9.Feg20PaXKCvinpL0nc1Yvw\"\r\n});\r\n\r\nclass MapDialog extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { delete: false }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Label onClick={() => this.toggleDelete()}><i className=\"icon-location-pin\"></i>{this.props.title}</Label>\r\n                {\r\n                    this.renderModal()\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    toggleDelete() {\r\n        if (!this.state.delete) {\r\n            let res = this.props.e;\r\n            let center = [res.longitude ? res.longitude : res.longtitude, res.latitude]\r\n            setTimeout(() => {\r\n                if (this.map && center[0] != 0 && center[1] != 0) {\r\n                    this.map.state.map.flyTo({ center, zoom: 11, speed: 0.8 })\r\n                }\r\n            }, 1000);\r\n        }\r\n        this.setState({\r\n            delete: !this.state.delete,\r\n        });\r\n    }\r\n\r\n    renderModal() {\r\n        return (<Modal isOpen={this.state.delete} toggle={this.toggleDelete.bind(this)}\r\n            className={'modal-info ' + this.props.className}>\r\n            <ModalHeader toggle={this.toggleDelete.bind(this)}>朋友圈地图</ModalHeader>\r\n            <ModalBody>\r\n                <Map\r\n                    ref={(m) => this.map = m}\r\n                    onClick={(e, coordinates) => {\r\n                        let click = coordinates.lngLat;\r\n                        let position = { latitude: click.lat, longitude: click.lng }\r\n                        this.setState({ position, click: true, clickPage: 1 })\r\n                        //this.loadClickNews(1, position)\r\n                    }}\r\n                    zoom={[12]}\r\n                    //center={[120.45, 40.88]}\r\n                    style=\"mapbox://styles/mapbox/streets-v9\"\r\n                    containerStyle={{\r\n                        height: \"60vh\",\r\n                        width: \"85vw\"\r\n                    }}>\r\n                </Map>\r\n                <Alert color=\"primary\"><a target='_blank' href='https://github.com/btbresource/btb-android'>请下载眞客手机客户端查看更多信息</a> </Alert>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n                <Button color=\"danger\" onClick={this.toggleDelete.bind(this)}>关闭</Button>\r\n            </ModalFooter>\r\n        </Modal>)\r\n    }\r\n}\r\n\r\nexport default MapDialog;","import React, { Component } from 'react';\r\nimport { Badge, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { CardGroup, Container, Form, FormGroup, Fade, Collapse, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, ButtonDropdown, DropdownItem, Nav, NavItem, NavLink, } from 'reactstrap'\r\nimport { loadLocalAccount, simpleHash, calcAccountId, getFileHost, signString, postSafe } from '../js/gegeUtil.js'\r\nimport { bshopCall, doBShopTransaction, getTorrentHash } from '../../eshop/eshop'\r\nimport classnames from 'classnames';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport AccountDialog from '../../conponents/AccountDialog'\r\nimport PopHint from '../../conponents/PopHint/PopHint'\r\nimport BtbSecret from '../../conponents/BtbSecret/BtbSecret'\r\nimport DepositDialog from '../../conponents/DepositDialog/DepositDialog'\r\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\r\nimport ImgDialog from '../../conponents/ImgDialog'\r\nimport PopLink from '../../ggv/PopLink'\r\nimport MapDialog from './MapDialog'\r\nconst ShareManager = require('../js/share')\r\nconst get = require('simple-get')\r\nvar sanitizeHtml = require('sanitize-html');\r\nconst Map = ReactMapboxGl({\r\n  accessToken: \"pk.eyJ1IjoiYnRicmVzb3VyY2UiLCJhIjoiY2pzMnRjZ3N1Mjg2NDQzcXI1MmtkN2JmciJ9.Feg20PaXKCvinpL0nc1Yvw\"\r\n});\r\nclass NewsList extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.page = 1;\r\n    this.share = new ShareManager();\r\n    this.state = {\r\n      list: [], page: 1, delete: false, content: '', longitude: '0', latitude: '0', fee: '0.01',\r\n      deadline: '5', price: '0', gps: false, activeTab: '0', click: false, clickPage: 1, addHongbao: false,\r\n      distance: '0', joinHongbao: false, vcode: ''\r\n    }\r\n    this.modules = {\r\n      toolbar: [\r\n        [{ 'header': '1' }, { 'header': '2' }, { 'font': [] }],\r\n        [{ size: [] }], [{ align: [] }, 'direction'],\r\n        ['bold', 'italic', 'underline', 'strike', 'blockquote', 'code-block'],\r\n        [{ color: [] }, { background: [] }],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' },\r\n        { 'indent': '-1' }, { 'indent': '+1' }],\r\n        ['link', 'image'],\r\n        ['clean']\r\n      ],\r\n      clipboard: {\r\n        // toggle to add extra line breaks when pasting HTML:\r\n        matchVisual: false,\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadNewsList(1, this.state.filterIdx)\r\n    var account = loadLocalAccount();\r\n    if (account && account.secret)\r\n      this.secret = account.secret;\r\n    this.setState({ account })\r\n    //this.toggleGps()\r\n  }\r\n\r\n  toggleGps() {\r\n    this.setState({ gps: !this.state.gps })\r\n    if (!this.state.gps) {\r\n      if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          if (position)\r\n            console.log(position.coords.latitude + + position.coords.longitude)\r\n          else {\r\n            console.log('get pos err')\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  getFavoriteLocations() {\r\n\r\n  }\r\n\r\n  preClickPage() {\r\n    if (this.state.clickPage > 1) {\r\n      let clickPage = this.state.clickPage - 1;\r\n      this.setState({ clickPage })\r\n      this.loadClickNews(clickPage)\r\n    }\r\n  }\r\n\r\n  nextClickPage() {\r\n    let clickPage = this.state.clickPage + 1;\r\n    this.setState({ clickPage })\r\n    this.loadClickNews(clickPage)\r\n  }\r\n\r\n  loadClickNews(page, position) {\r\n    let data;\r\n    let query = this.state.filterValue;\r\n    if (!page)\r\n      page = this.state.clickPage;\r\n    let accountId = this.state.account ? this.state.account.aid : 0;\r\n    let latitude = position ? position.latitude : this.state.position.latitude;\r\n    let longtitude = position ? position.longitude : this.state.position.longitude;\r\n    let zoom = this.map.zoom\r\n    if (query) {\r\n      query = new Buffer(query).toString('base64');\r\n      data = { action: 'listNews', tab: 0, latitude, longtitude, zoom, page, query, accountId }\r\n    } else {\r\n      data = { action: 'listNews', tab: 0, latitude, longtitude, zoom, page, accountId }\r\n    }\r\n    console.log(JSON.stringify(data))\r\n    bshopCall(data, ((ok, list) => {\r\n      if (ok && list) {\r\n        this.setState({ clickList: list.list, clickedHongbaos: list.hongbaos, clickPage: page, filterValue: null })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  loadNewsList(page, query) {\r\n    let data;\r\n    let locations = this.getFavoriteLocations()\r\n    if (!query)\r\n      query = this.state.filterValue;\r\n    if (query) {\r\n      query = new Buffer(query).toString('base64');\r\n      data = { action: 'listNews', locations, page, query }\r\n    } else {\r\n      data = { action: 'listNews', locations, page }\r\n    }\r\n    bshopCall(data, ((ok, list) => {\r\n      if (ok && list) {\r\n        this.setState({ list: list.list })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  loadHongbaoList(page, query) {\r\n    let data;\r\n    let locations = this.getFavoriteLocations()\r\n    if (!query)\r\n      query = this.state.filterValue;\r\n    if (query) {\r\n      query = new Buffer(query).toString('base64');\r\n      data = { action: 'listHongbao', locations, page, query }\r\n    } else {\r\n      data = { action: 'listHongbao', locations, page }\r\n    }\r\n    bshopCall(data, ((ok, list) => {\r\n      if (ok && list) {\r\n        this.setState({ hongbaos: list.list })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  prePage() {\r\n    if (this.state.page > 1) {\r\n      this.state.page--\r\n      this.loadNewsList(this.state.page, this.state.filterIdx, this.state.filterValue)\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    this.state.page++\r\n    this.loadNewsList(this.state.page, this.state.filterIdx, this.state.filterValue)\r\n  }\r\n\r\n  filterBlocks() {\r\n    if (this.state.click) {\r\n      this.loadClickNews(1)\r\n    } else\r\n      this.loadNewsList(this.state.page, this.state.filterIdx, this.state.filterValue)\r\n  }\r\n\r\n  renderNewsList() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      let pay = 0;\r\n      if (res.price > 0)\r\n        pay = 1\r\n      let url = getFileHost() + '/thumbnail/0/' + res.id\r\n      return (<tr>\r\n        <td><a target='_blank' href={'/#/newsweb#' + res.id + '#' + pay + res.title}>{res.title}</a></td>\r\n        <td><AccountDialog rsId={res.author} /></td>\r\n        <td><MapDialog title='距离--公里' e={res}></MapDialog></td>\r\n        <td>{res.price} 积分</td>\r\n        <td>{btime}</td>\r\n        <td><PopLink id={res.id} title={res.title}></PopLink></td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n\r\n  toggleDelete() {\r\n    this.setState({\r\n      delete: !this.state.delete,\r\n    });\r\n  }\r\n\r\n  renderDeleteDialog() {\r\n    return (<Modal isOpen={this.state.delete} toggle={this.toggleDelete.bind(this)}\r\n      className={'modal-danger ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleDelete.bind(this)}>下载眞客App</ModalHeader>\r\n      <ModalBody>\r\n        <p>Web版钱包不支持朋友圈隱藏功能，隱藏资源功能需要<a href=\"https://github.com/btbresource/btb-android\" target='_blank'>下载眞客APP</a></p>\r\n        <p>彻底隱藏朋友圈需要支付朋友圈价格9999倍的价格作为手续费(免费朋友圈需要1000积分)，隐藏自己的朋友圈需要支付1积分手续费。手续费将由机器人账户获得。朋友圈彻底隱藏后将无法查看。</p>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleDelete.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderGPSDialog() {\r\n    return (<Modal isOpen={this.state.gps} toggle={this.toggleGps.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleGps.bind(this)}>需要模糊定位</ModalHeader>\r\n      <ModalBody>\r\n        <p>如果需要通过定位选择周边的朋友圈信息,计算朋友圈的距离，请同意获取模糊位置请求。</p>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleGps.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  toggle(i) {\r\n    const newArray = this.state.dropdownOpen.map((element, index) => { return (index === i ? !element : false); });\r\n    this.setState({\r\n      dropdownOpen: newArray,\r\n    });\r\n  }\r\n\r\n  setFilter(idx) {\r\n    this.setState({ page: 1, filterIdx: idx, filterOption: this.filterMsg[idx] })\r\n  }\r\n\r\n\r\n  upateFilterValue(e) {\r\n    if (e && e.target) {\r\n      let value = e.target.value;\r\n      this.setState({ filterValue: value })\r\n    }\r\n  }\r\n\r\n  renderFilterOptions() {\r\n    let ops = this.filterOptions.map((op, index) => {\r\n      return (<DropdownItem onClick={(e) => {\r\n        this.setFilter(index)\r\n      }}>{op}</DropdownItem>)\r\n    })\r\n    return ops;\r\n  }\r\n\r\n  renderMap() {\r\n    return (<Card>\r\n      <CardBody>\r\n        <Map\r\n          ref={(m) => this.map = m}\r\n          onClick={(e, coordinates) => {\r\n            let click = coordinates.lngLat;\r\n            let position = { latitude: click.lat, longitude: click.lng }\r\n            this.setState({ position, click: true, clickPage: 1 })\r\n            this.loadClickNews(1, position)\r\n          }}\r\n          zoom={[9]}\r\n          //center={[120.45, 40.88]}\r\n          style=\"mapbox://styles/mapbox/streets-v9\"\r\n          containerStyle={{\r\n            height: \"100vh\",\r\n            width: \"90vw\"\r\n          }}>\r\n        </Map>\r\n      </CardBody>\r\n      {this.renderClickModal()}\r\n      {this.renderHongbaoDialog()}\r\n    </Card>)\r\n  }\r\n\r\n  toggleClick() {\r\n    this.setState({ click: !this.state.click })\r\n  }\r\n\r\n  renderClickModal() {\r\n    let pos = this.state.position;\r\n    if (!pos)\r\n      return null\r\n    pos = ' 附近朋友圈[' + pos.longitude + ',' + pos.latitude + ']'\r\n    return (<Modal isOpen={this.state.click} toggle={this.toggleClick.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleClick.bind(this)}>{pos}</ModalHeader>\r\n      <ModalBody>\r\n        {this.renderClickList()}\r\n        <Button onClick={(e) => { this.toggleShareNews() }} className=\"btn-openid btn-brand\"><i className=\"fa fa-openid\"></i><span>发布这个位置的朋友圈信息</span></Button>\r\n        {/* <Button onClick={(e) => { this.toggleShareHongbao() }} className=\"btn-openid btn-brand\"><i className=\"fa fa-openid\"></i><span>在这个位置发红包</span></Button>*/}\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleClick.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  gotoMap(res) {\r\n\r\n  }\r\n\r\n  renderClickNewsList() {\r\n    let list = this.state.clickList;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      let pay = 0;\r\n      if (res.price > 0)\r\n        pay = 1\r\n      return (<tr>\r\n        <td><a target='_blank' href={'/#/newsweb#' + res.id + '#' + pay + res.title}>{res.title}</a></td>\r\n        <td>{res.author}</td>\r\n        <td><MapDialog title='距离--公里' e={res}></MapDialog></td>\r\n        <td>{btime}</td>\r\n      </tr>)\r\n    });\r\n    return content;\r\n  }\r\n\r\n  renderClickList() {\r\n    let list = this.state.clickList;\r\n    let hongbaos = this.state.clickedHongbaos;\r\n    if (!list && !hongbaos)\r\n      return null;\r\n    return (<Row>\r\n      <Col>\r\n        <Card>\r\n          <CardBody>\r\n            <InputGroup>\r\n              <Input placeholder='搜索附近朋友圈或红包' onChange={this.upateFilterValue.bind(this)} />\r\n              <Button color=\"primary\" onClick={() => this.filterBlocks()}>\r\n                <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n            </InputGroup>\r\n            <Nav tabs>\r\n              <NavItem>\r\n                <NavLink\r\n                  className={classnames({ active: this.state.clickTab === '0' })}\r\n                  onClick={() => { this.setState({ clickTab: '0' }) }}\r\n                >\r\n                  <i className=\"icon-calculator\"></i> <span className={this.state.clickTab === '0' ? '' : 'd-none'}> (最近更新) </span>{'\\u00A0'}<Badge\r\n                    color=\"success\">附近朋友圈信息</Badge>\r\n                </NavLink>\r\n              </NavItem>\r\n              <NavItem>\r\n                <NavLink\r\n                  className={classnames({ active: this.state.clickTab === '1' })}\r\n                  onClick={() => { this.setState({ clickTab: '1' }) }}\r\n                >\r\n                  <i className=\"icon-calculator\"></i> <span className={this.state.clickTab === '1' ? '' : 'd-none'}> (最近更新) </span>{'\\u00A0'}<Badge\r\n                    color=\"success\">附近红包列表 </Badge>\r\n                </NavLink>\r\n              </NavItem>\r\n            </Nav>\r\n            <Table hidden={this.state.clickTab == '1'} hover bordered striped responsive size=\"sm\">\r\n              <tbody>\r\n                {this.renderClickNewsList()}\r\n              </tbody>\r\n            </Table>\r\n            <Table hidden={this.state.clickTab == '0'} hover bordered striped responsive size=\"sm\">\r\n              <tbody>\r\n                {this.renderHongbaoList(this.state.clickedHongbaos)}\r\n              </tbody>\r\n            </Table>\r\n\r\n            <nav>\r\n              <Pagination>\r\n                <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.preClickPage() }}>Prev(上一页</PaginationLink></PaginationItem>\r\n                <PaginationItem active>\r\n                  <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n                </PaginationItem>\r\n                <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextClickPage() }}>Next(下一页</PaginationLink></PaginationItem>\r\n              </Pagination>\r\n            </nav>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>)\r\n  }\r\n\r\n  toggleJoinHongbao() {\r\n    this.setState({ joinHongbao: !this.state.joinHongbao })\r\n  }\r\n\r\n  renderJoinHongbaoDialog() {\r\n    return (<Modal isOpen={this.state.joinHongbao} toggle={this.toggleJoinHongbao.bind(this)}\r\n      className={'modal-danger ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleJoinHongbao.bind(this)}>下载眞客App-抢红包</ModalHeader>\r\n      <ModalBody>\r\n        <p>Web版钱包不支持抢红包功能，抢红包需要<a href=\"https://github.com/btbresource/btb-android\" target='_blank'>下载眞客App</a></p>\r\n        <p>红包余额大于0的情况下，红包中奖金额随机.</p>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleJoinHongbao.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderHongbaos() {\r\n    let list = this.state.hongbaos;\r\n    if (!list)\r\n      return null;\r\n    return (<Row>\r\n      <Col>\r\n        <Card>\r\n          <CardBody>\r\n            <InputGroup>\r\n              <Input placeholder='搜索红包' onChange={this.upateFilterValue.bind(this)} />\r\n              <Button color=\"primary\" onClick={() => this.fitlerHongbao()}>\r\n                <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n            </InputGroup>\r\n            <Table hover bordered striped responsive size=\"sm\">\r\n              <tbody>\r\n                {this.renderHongbaoList(this.state.hongbaos, true)}\r\n                {this.renderJoinHongbaoDialog()}\r\n                {this.renderHongbaoDialog()}\r\n              </tbody>\r\n            </Table>\r\n            <nav>\r\n              <Pagination>\r\n                <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}>上一页</PaginationLink></PaginationItem>\r\n                <PaginationItem active>\r\n                  <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n                </PaginationItem>\r\n                <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}>下一页</PaginationLink></PaginationItem>\r\n              </Pagination>\r\n            </nav>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>)\r\n  }\r\n\r\n  showHongbao(hongbao) {\r\n    this.setState({ hongbao, showHongbao: true })\r\n    this.loadHongbaoInfo(hongbao)\r\n  }\r\n\r\n  loadHongbaoInfo(hb) {\r\n    let data = { action: 'hongbao', id: ('' + hb.id) }\r\n    bshopCall(data, ((ok, hb) => {\r\n      if (ok && hb) {\r\n        let hongbao = this.state.hongbao;\r\n        hongbao.joins = hb.list;\r\n        hongbao.content = hb.content;\r\n        this.setState({ hongbao })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  renderHongbaoJoins() {\r\n    if (!this.state.hongbao || !this.state.hongbao.joins)\r\n      return null;\r\n    let records = this.state.hongbao.joins.map((r) => {\r\n      let d = new Date();\r\n      d.setTime(r.time)\r\n      let btime = d.toLocaleString()\r\n      return (<tr>\r\n        <td><AccountDialog rsId={r.senderId} /></td>\r\n        <td>{r.amount}</td>\r\n        <td>{btime}</td>\r\n      </tr>)\r\n    })\r\n    return (<Table hover bordered striped responsive size=\"sm\">\r\n      <thead>\r\n        <tr>\r\n          <th>账户</th>\r\n          <th>现金红包</th>\r\n          <th>时间</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {records}\r\n      </tbody>\r\n    </Table>)\r\n  }\r\n\r\n  toggleHongbaoInfo() {\r\n    this.setState({ showHongbao: !this.state.showHongbao })\r\n  }\r\n\r\n  renderHongbaoDialog() {\r\n    let hb = this.state.hongbao;\r\n    if (!hb)\r\n      return null\r\n    /*\r\n  let content = '抢红包....';\r\n  if (hb.content) {\r\n    content = hb.content;\r\n    content = sanitizeHtml(content, {\r\n      allowedTags: sanitizeHtml.defaults.allowedTags.concat(['img']),\r\n      allowedAttributes: {\r\n        'img': ['src']\r\n      },\r\n      allowedSchemes: ['data', 'http']\r\n    });\r\n  }\r\n  */\r\n    let url = getFileHost() + '/html/0/' + hb.hash;\r\n    return (<Modal isOpen={this.state.showHongbao} toggle={this.toggleHongbaoInfo.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleHongbaoInfo.bind(this)}>{hb.title}</ModalHeader>\r\n      <ModalBody>\r\n        <iframe width='100%' height='100%' frameborder='0' name=\"_blank\" src={url}></iframe>\r\n        {this.renderHongbaoJoins()}\r\n        <p><a target='_blank' href='https://github.com/btbresource/btb-android'>下载手机APP抢红包</a></p>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"info\" onClick={this.toggleHongbaoInfo.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderHongbaoList(list, thumbnail) {\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      let url = getFileHost() + '/thumbnail/0/' + res.hash\r\n      let pos = '[' + res.latitude + ',' + res.longitude + ']'\r\n      let tnimg = null;\r\n      if (thumbnail) {\r\n        tnimg = <img style={{ width: 50, height: 50 }} src={url}></img>\r\n      }\r\n      return (<tr>\r\n        <td>\r\n          <a href=\"#\" onClick={(e) => {\r\n            e.preventDefault()\r\n            this.showHongbao(res)\r\n          }}>{tnimg}{res.title}</a></td>\r\n        <td><AccountDialog rsId={res.sender} /></td>\r\n        <td>{res.balance} / {res.amount} 积分</td>\r\n        <td><MapDialog title='距离--公里' e={res}></MapDialog></td>\r\n        <td>{btime}</td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n\r\n  renderList() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    return (<Row>\r\n      <Col>\r\n        <Card>\r\n          <CardBody>\r\n            <InputGroup>\r\n              <Input placeholder='搜索所有朋友圈' onChange={this.upateFilterValue.bind(this)} />\r\n              <Button color=\"primary\" onClick={() => this.filterBlocks()}>\r\n                <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n            </InputGroup>\r\n            <Table hover bordered striped responsive size=\"sm\">\r\n              <tbody>\r\n                {this.renderNewsList()}\r\n              </tbody>\r\n            </Table>\r\n            {this.renderGPSDialog()}\r\n            <nav>\r\n              <Pagination>\r\n                <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}>上一页</PaginationLink></PaginationItem>\r\n                <PaginationItem active>\r\n                  <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n                </PaginationItem>\r\n                <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}>下一页</PaginationLink></PaginationItem>\r\n              </Pagination>\r\n            </nav>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>)\r\n  }\r\n\r\n  onSecret(sec) {\r\n    if (sec) {\r\n      this.secret = sec\r\n      let rsId = calcAccountId(this.userSec);\r\n      this.setState({ rsId: rsId })\r\n    }\r\n  }\r\n\r\n  updateFee(e) {\r\n    if (e && e.target) {\r\n      let fee = e.target.value;\r\n\r\n      if (this.fee.length == 0) {\r\n        this.fee = 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateVcode(e) {\r\n    if (e && e.target) {\r\n      let vcodestring = e.target.value;\r\n      let vcode = '';\r\n      if (vcodestring.length > 0) {\r\n        vcode = simpleHash(vcodestring);\r\n      }\r\n      this.setState({ vcode })\r\n    }\r\n  }\r\n\r\n  updateDeadline(e) {\r\n    if (e && e.target) {\r\n      let deadline = e.target.value;\r\n      if (deadline.length == 0) {\r\n        this.setState({ deadline: '5' })\r\n      } else {\r\n        this.setState({ deadline })\r\n      }\r\n    }\r\n  }\r\n\r\n  updateTitle(e) {\r\n    if (e && e.target) {\r\n      let title = e.target.value;\r\n      this.setState({ title })\r\n    }\r\n  }\r\n\r\n  updateDistance(e) {\r\n    if (e && e.target) {\r\n      let distance = e.target.value;\r\n      this.setState({ distance })\r\n    }\r\n  }\r\n\r\n  handleChange(value) {\r\n    this.setState({ content: value })\r\n  }\r\n\r\n  updatePrice(e) {\r\n    if (e && e.target) {\r\n      let price = e.target.value;\r\n      this.setState({ price })\r\n    }\r\n  }\r\n\r\n  renderdialogMsg() {\r\n    if (this.state.renderDesposit) {\r\n      return (<div>\r\n        <Label>{this.state.dialogMsg}</Label>\r\n        <DepositDialog />\r\n      </div>)\r\n    } else\r\n      if (this.state.dialogMsg) {\r\n        return (<Label>{this.state.dialogMsg}</Label>)\r\n      }\r\n    return null;\r\n  }\r\n  renderHongbaoPosition() {\r\n    let position = this.state.position\r\n    let longtitude = position ? position.longitude : this.state.longitude;\r\n    let latitude = position ? position.latitude : this.state.latitude;\r\n    let pos = '[' + longtitude + ',' + latitude + ']'\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='hb2323' text='(红包位置):' content='这个位置附近的用户查看朋友圈时会看到红包信息。只有在这个位置附近发布过朋友圈信息的用户才可以参与抢红包。'></PopHint></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Label>{pos}</Label>\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n  renderNewsPosition() {\r\n    let position = this.state.position\r\n    let longtitude = position ? position.longitude : this.state.longitude;\r\n    let latitude = position ? position.latitude : this.state.latitude;\r\n    let pos = '[' + longtitude + ',' + latitude + ']'\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='hb23222' text='(朋友圈位置):' content='朋友圈信息位置经纬度。附近位置的其他用户在地图上点击时可以看到。在这个位置附近发布过朋友圈信息的用户才有资格参与此位置附近的抢红包活动。' ></PopHint></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Label>{pos}</Label>\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n  rederAddHongbaoDialog() {\r\n    return (<Modal isOpen={this.state.addHongbao} toggle={this.toggleShareHongbao.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleShareHongbao.bind(this)}>发红包</ModalHeader>\r\n      <ModalBody>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>红包标题):</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTitle.bind(this)} placeholder='Title 标题' />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderHongbaoPosition()}\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id='pri4545' text='(距离限制):' content='限制在这个位置周边限制距离之内发布过朋友圈的用户才可以抢红包。0则没有限制。数值加1则距离增加10公里' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput3\" size=\"16\" type=\"text\" onChange={this.updateDistance.bind(this)} placeholder='0' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>x 10公里</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id='pri4545' text='(金额):' content='红包的总金额.最小10个。' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput3\" size=\"16\" type=\"text\" onChange={this.updatePrice.bind(this)} placeholder='0' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>积分</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text='(机器人费):' content='区块链机器人为账户余额比较多的BTB账户随机产生，负责验证所有交易是否符合规则,并将合法交易保存到区块链。机器人保证整个系统按照规则运行。同时获得机器人费。发布红包最少0.01个' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" placeholder='0.01' type=\"text\" onChange={this.updateFee.bind(this)} />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>积分</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {\r\n          this.renderDeadline()\r\n        }\r\n        <FormGroup>\r\n          <ImgDialog title='添加红包缩略图' onFinish={(img) => {\r\n            if (img) {\r\n              let sp = img.split(';base64,');\r\n              let avatar = sp[1];\r\n              this.setState({ avatar })\r\n            }\r\n          }}></ImgDialog>\r\n        </FormGroup>\r\n        {\r\n          this.renderVcode()\r\n        }\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">红包内容:</Label>\r\n          <ReactQuill value={this.state.content}\r\n            modules={this.modules}\r\n            placeholder='这里编辑其他人抢红包时可以看到的内容..'\r\n            onChange={this.handleChange.bind(this)} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleShareHongbao.bind(this)}>关闭</Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={\r\n          ((e) => {\r\n            let dialogMsg = \"红包发布中,有图片可能需要几分钟...\";\r\n            this.setState({ dialogMsg })\r\n            setTimeout(() => {\r\n              this.doSendHongbao()\r\n            }, 200);\r\n          }).bind(this)\r\n        }>发红包</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderVcode() {\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='dl4545' text='红包口令:' content='红包口令一般填写在红包内容内，以保证用户完整浏览过红包内容。如果红包有口令，需要输入正确的口令才可以领取。无口令红包不需要填写。' /></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Input id=\"appendedPrependedInput\" size=\"16\" placeholder='' onChange={this.updateVcode.bind(this)} type=\"text\" />\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n  renderDeadline() {\r\n    if (true)\r\n      return null;\r\n    return (<FormGroup>\r\n      <div className=\"controls\">\r\n        <InputGroup className=\"input-prepend\">\r\n          <InputGroupAddon addonType=\"prepend\">\r\n            <InputGroupText><PopHint id='dl4545' text='(有效期):' content='机器人验证交易时候会按手续费高低排序处理，有效期内未被处理的交易会被舍弃。交易作废。默认5分钟。' /></InputGroupText>\r\n          </InputGroupAddon>\r\n          <Input id=\"appendedPrependedInput\" size=\"16\" placeholder='5' onChange={this.updateDeadline.bind(this)} type=\"text\" />\r\n          <InputGroupAddon addonType=\"append\">\r\n            <InputGroupText>分钟</InputGroupText>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      </div>\r\n    </FormGroup>)\r\n  }\r\n\r\n  rederAddProductDialog() {\r\n    return (<Modal isOpen={this.state.addProduct} toggle={this.toggleShareNews.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleShareNews.bind(this)}>发布朋友圈</ModalHeader>\r\n      <ModalBody>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <BtbSecret onSecret={this.onSecret.bind(this)} />\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>朋友圈标题:</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"prependedInput2\" size=\"16\" type=\"text\" onChange={this.updateTitle.bind(this)} placeholder=' 标题' />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderNewsPosition()}\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id='pri4545' text='(价格):' content='价格等于0的朋友圈所有人都可以查看。价格大于0的朋友圈信息需要付费给发布者之后才能查看具体内容。' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput3\" size=\"16\" type=\"text\" onChange={this.updatePrice.bind(this)} placeholder='0' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>积分</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText><PopHint id=\"min123\" text='(机器人费):' content='区块链机器人为账户余额比较多的BTB账户随机产生，负责验证所有交易是否符合规则,并将合法交易保存到区块链。机器人保证整个系统按照规则运行。同时获得机器人费。发布朋友圈最少0.01个' /></InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" placeholder='0.01' type=\"text\" onChange={this.updateFee.bind(this)} />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>积分</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {\r\n          this.renderDeadline()\r\n        }\r\n        <FormGroup>\r\n          <ImgDialog title='添加标题缩略图' onFinish={(img) => {\r\n            if (img) {\r\n              let sp = img.split(';base64,');\r\n              let avatar = sp[1];\r\n              this.setState({ avatar })\r\n            }\r\n          }}></ImgDialog>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Label htmlFor=\"appendedInputButtons\">详细内容:</Label>\r\n          <ReactQuill value={this.state.content}\r\n            modules={this.modules}\r\n            placeholder='这里编辑朋友圈内容，添加图片等...'\r\n            onChange={this.handleChange.bind(this)} />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          {this.renderdialogMsg()}\r\n        </FormGroup>\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleShareNews.bind(this)}>关闭</Button>\r\n        <Button color=\"danger\" hidden={this.state.success} onClick={\r\n          ((e) => {\r\n            let dialogMsg = \"(发布中,有图片可能需要几分钟)\";\r\n            this.setState({ dialogMsg })\r\n            setTimeout(() => {\r\n              this.dopublishNews()\r\n            }, 200);\r\n          }).bind(this)\r\n        }>发布</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  uploadNews(newsId, content, cb) {\r\n    console.log('upload news not done yet');\r\n    //localStorage.setItem(newsId, content);\r\n    let b64 = content;//Buffer.from(content).toString('base64');\r\n    let url = getFileHost() + '/uphtml/' + newsId + '/token1'\r\n    url = getFileHost() + '/rnShare/' + newsId + '/token1'\r\n    //url = 'http://127.0.0.1:18080/info'\r\n    var opts = {\r\n      url: url,\r\n      body: b64,\r\n      json: false\r\n    };\r\n    get.concat(opts, function (err, res, data) {\r\n      const url = 'https://file.bshopping.cc:10088/createTorrent/' + newsId + '/token1'\r\n      cb(true)\r\n    });\r\n    //upload thumbnail\r\n    if (this.state.avatar) {\r\n      url = getFileHost() + '/upthumbnail/' + newsId + '/token1'\r\n      b64 = this.state.avatar;\r\n      opts = {\r\n        url: url,\r\n        body: b64,\r\n        json: false\r\n      };\r\n      get.concat(opts, function (err, res, data) {\r\n\r\n      });\r\n    }\r\n  }\r\n\r\n  dopublishNews() {\r\n    if (!this.state.title) {\r\n      this.setState({ dialogMsg: '缺少朋友圈标题' })\r\n      return;\r\n    }\r\n    let content = this.state.content\r\n    let time = new Date().toString()\r\n    content = '<html><head><meta charset=\"UTF-8\"><title>' + this.state.title + '</title></head><p>' + content + '</p><p>' + time + '</p></html>';\r\n    this.share.seedContent(content, (torrent) => {\r\n      let newsId = torrent.infoHash;\r\n      let torrentFile = torrent.torrentFile.toString('base64');\r\n      let title = Buffer.from(this.state.title).toString('base64');\r\n      let position = this.state.position\r\n      let longtitude = (position ? position.longitude : this.state.longitude) + '';\r\n      let latitude = (position ? position.latitude : this.state.latitude) + '';\r\n      let data = {\r\n        action: 'transaction', type: 'news', newsId, accountId: this.state.account.aid, fee: this.state.fee, price: this.state.price, deadline: this.state.deadline,\r\n        tags: 'no', title, longtitude, latitude, avatar: ''\r\n      }\r\n      let parameters = { title };\r\n      doBShopTransaction(this.state.account.secret, data, (ok, msg) => {\r\n        if (ok && msg && msg.ok) {\r\n          this.setState({ dialogMsg: '交易成功,资源上传中...请稍后', success: true })\r\n          //upload to server \r\n          let exp = 1000 * 60 * 60 * 24;\r\n          let time = new Date().getTime()\r\n          time = time - (time % exp);\r\n          let signature = signString(this.state.account.secret, newsId + time);\r\n          let host = getFileHost()\r\n          //host = 'http://127.0.0.1:18080'\r\n          let url = host + '/torrentFile/' + newsId + '/' + signature\r\n          let config = { url, nonce: '0000' }\r\n          let req = { torrentFile, infoHash: newsId, name: newsId + '.html' };\r\n          postSafe(config, req, (res) => {\r\n            if (res) {\r\n              this.uploadNews(newsId, content, () => {\r\n                this.setState({ dialogMsg: '发布成功', success: true })\r\n              })\r\n            }\r\n          })\r\n        } else {\r\n          if (msg && !msg.ok && '1001' === msg.code) {\r\n            this.setState({ dialogMsg: '账户余额不足。请充值或去朋友圈领取现金红包。', renderDesposit: true })\r\n          } else\r\n            this.setState({ dialogMsg: '发布失败' })\r\n        }\r\n      }, parameters)\r\n    })\r\n\r\n  }\r\n\r\n  doSendHongbao() {\r\n    if (!this.state.title) {\r\n      this.setState({ dialogMsg: '缺少红包标题' })\r\n      return;\r\n    }\r\n    let pc = parseInt(this.state.price);\r\n    if (pc < 10) {\r\n      this.setState({ dialogMsg: '红包金额最小为10积分' })\r\n      return;\r\n    }\r\n    let content = this.state.content\r\n    content = '<html><head><meta charset=\"UTF-8\"><title>' + this.state.title + '</title></head><p>' + content + '</p></html>';\r\n    let hongbaoId = getTorrentHash(content);\r\n    let title = Buffer.from(this.state.title).toString('base64');\r\n    let position = this.state.position\r\n    let longtitude = (position ? position.longitude : this.state.longitude) + '';\r\n    let latitude = (position ? position.latitude : this.state.latitude) + '';\r\n    let distance = this.state.distance;\r\n    let vcode = this.state.vcode;\r\n    let data = {\r\n      action: 'transaction', type: 'hongbao', content: '', accountId: this.state.account.aid, fee: this.state.fee, price: this.state.price, deadline: this.state.deadline,\r\n      tags: '', title, longtitude, distance, latitude, vcode, hongbaoId\r\n    }\r\n    doBShopTransaction(this.state.account.secret, data, ((ok, msg) => {\r\n      if (ok && msg && msg.ok) {\r\n        this.setState({ dialogMsg: '红包发布成功,机器人验证后(大约一分钟)即可显示.', success: true })\r\n        this.uploadNews(msg.id, content)\r\n      } else {\r\n        if (msg && !msg.ok && '1001' === msg.code) {\r\n          this.setState({ dialogMsg: '账户余额不足。请充值或去朋友圈领取现金红包。', renderDesposit: true })\r\n        } else\r\n          this.setState({ dialogMsg: '发布失败' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n\r\n\r\n  toggleShareNews() {\r\n    this.setState({\r\n      addProduct: !this.state.addProduct, success: false\r\n    });\r\n  }\r\n\r\n  toggleShareHongbao() {\r\n    this.setState({\r\n      addHongbao: !this.state.addHongbao, success: false\r\n    });\r\n  }\r\n\r\n  onTabClicked(activeTab) {\r\n    this.setState({ activeTab })\r\n    if (activeTab === '2') {\r\n      this.loadHongbaoList()\r\n    }\r\n    if (activeTab === '1') {\r\n      setTimeout(() => {\r\n        if (this.map) {\r\n          this.map.state.map.flyTo({ center: [116.45, 39.8], zoom: 9, speed: 0.2 })\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n\r\n  renderContent() {\r\n    if (this.state.activeTab == '0')\r\n      return this.renderList()\r\n    else if (this.state.activeTab == '2')\r\n      return this.renderHongbaos()\r\n    else\r\n      return this.renderMap();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Nav tabs>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '0' })}\r\n              onClick={() => { this.onTabClicked('0'); }}\r\n            >\r\n              <i className=\"icon-calculator\"></i> <span className={this.state.activeTab === '0' ? '' : 'd-none'}>最近更新</span>{'\\u00A0'}<Badge\r\n                color=\"success\">所有朋友圈信息 </Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '2' })}\r\n              onClick={() => { this.onTabClicked('2'); }}\r\n            >\r\n              <i className=\"icon-calculator\"></i> <span className={this.state.activeTab === '2' ? '' : 'd-none'}>附近红包</span>{'\\u00A0'}<Badge\r\n                color=\"success\">所有红包列表 </Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={classnames({ active: this.state.activeTab === '1' })}\r\n              onClick={() => { this.onTabClicked('1'); }}\r\n            >\r\n              <i className=\"icon-basket-loaded\"></i> <span\r\n                className={this.state.activeTab === '1' ? '' : 'd-none'}>点击地图显示附近朋友圈和红包信息</span>{'\\u00A0'}<Badge pill color=\"danger\">地图模式</Badge>\r\n            </NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n        {this.renderContent()}\r\n        {this.rederAddProductDialog()}\r\n        {this.rederAddHongbaoDialog()}\r\n        {this.renderDeleteDialog()}\r\n        <Button onClick={(e) => { this.toggleShareNews() }} className=\"btn-openid btn-brand\"><i className=\"fa fa-openid\"></i><span>发布朋友圈信息</span></Button>\r\n        {/* <Button onClick={(e) => { this.toggleShareHongbao() }} className=\"btn-openid btn-brand\"><i className=\"fa fa-openid\"></i><span>发布朋友圈红包</span></Button> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewsList;\r\n"],"sourceRoot":""}