(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{839:function(e,t,a){"use strict";var n=a(4),l=a(0),r=a.n(l),i=a(1),c=a.n(i),s=a(232),o={children:c.a.node},u=function(e){return r.a.createElement(s.a,Object(n.a)({group:!0},e))};u.propTypes=o,t.a=u},930:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),r=a(24),i=a(23),c=a(25),s=a(0),o=a.n(s),u=a(227),d=a(230),p=a(167),m=a(226),h=a(66),E=a(67),g=a(65),f=a(87),v=a(64),k=a(77),y=a(36),b=a(78),O=a(88),N=a(126),A=a(129),I=a(130),S=a(127),T=a(128),w=a(166),x=a(839),D=a(391),C=a(389),P=a(29),j=a(68),z=a(13),F=(a(3),a(85)),M=(s.Component,a(233),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={dropdownOpen:!1,page:1,channelName:"\u9009\u62e9\u8fc7\u6ee4\u7c7b\u578b",list:[],channel:-1,exchange:null,action:!1,working:!1},a.filterOptions=["\u8d44\u6e90ID","\u4e0b\u8f7d\u8d26\u6237","\u6d41\u91cf\u77ff\u5de5\u8d26\u6237"],a.fee="0.01",a.amount="0.1",a.deadline="5",a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(z.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret,this.account=e),this.loadAll()}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"loadAll",value:function(){var e=this,t=(Object(z.sign)(this.account.secret,this.account.pk),{action:"rtoken",type:"list",page:this.state.page,size:20,filterType:this.state.channel,query:this.state.query}),a=Object(z.getShareHost)()+"/bshop";Object(z.postSafe)(a,t,function(t,a){if(t&&a&&a.list){var n=a.list;e.setState({list:n})}})}},{key:"updateExchangeStatus",value:function(e){}},{key:"doTransfer",value:function(){var e=this,t=this.account.pk,a={action:"transaction",type:"transfer",amount:this.amount,fee:this.fee,dealine:this.deadline,pk:t,recipientPk:this.state.rtoken.pk,recipientId:this.state.rtoken.miner};this.setState({working:!0}),Object(P.doBShopTransaction)(this.secret,a,function(t,a){t&&a.ok?(e.setState({dialogMsg:"(\u6210\u529f),\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1",tranferOk:!0}),e.updateExchangeStatus(a.transactionId)):e.setState({dialogMsg:"(\u5931\u8d25)"})}.bind(this))}},{key:"upateFilterValue",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({query:t})}}},{key:"prePage",value:function(){this.state.page--,this.loadAll()}},{key:"nextPage",value:function(){this.state.page++,this.loadAll()}},{key:"setFilter",value:function(e){this.setState({channel:e,channelName:this.filterOptions[e]})}},{key:"renderFilterOptions",value:function(){var e=this;return this.filterOptions.map(function(t,a){return o.a.createElement(A.a,{onClick:function(t){e.setFilter(a)}},t)})}},{key:"toggleActionDialog",value:function(){this.setState({action:!this.state.action,dialogMsg:"",tranferOk:!1})}},{key:"renderActionDialog",value:function(){return this.state.rtoken?o.a.createElement(I.a,{isOpen:this.state.action,toggle:this.toggleActionDialog.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleActionDialog.bind(this)},"\u5956\u52b1\u6d41\u91cf\u77ff\u5de5"),o.a.createElement(T.a,null,o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u6211\u7684\u8d26\u6237:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",type:"text",value:this.account.rsId})))),o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u77ff\u5de5ID:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",type:"text",value:this.state.rtoken.miner})))),o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u77ff\u5de5\u516c\u94a5:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",type:"text",value:this.state.rtoken.pk})))),o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u79ef\u5206\u6570\u91cf:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateAmount.bind(this)})))),o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u673a\u5668\u4eba\u8d39:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"\u673a\u5668\u4eba\u8d39\uff0c\u6700\u5c110.01\u79ef\u5206"})))),o.a.createElement(b.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(f.a,{addonType:"prepend"},o.a.createElement(v.a,null,"\u6709\u6548\u671f:")),o.a.createElement(k.a,{id:"appendedPrependedInput",size:"16",onChange:this.updateDeadline.bind(this),type:"text",placeholder:"\u4ea4\u6613\u6709\u6548\u671f\uff0c\u9ed8\u8ba45\u5206\u949f"}),o.a.createElement(f.a,{addonType:"append"},o.a.createElement(v.a,null,"\u5206\u949f"))))),this.renderdialogMsg()),o.a.createElement(w.a,null,o.a.createElement(y.a,{color:"danger",onClick:this.toggleActionDialog.bind(this)},"\u53d6\u6d88"),this.renderPayBtn())):null}},{key:"renderPayBtn",value:function(){return this.state.tranferOk||this.state.working?null:o.a.createElement(y.a,{color:"danger",onClick:this.doTransfer.bind(this)},"\u53d1\u9001\u79ef\u5206")}},{key:"renderdialogMsg",value:function(){return this.state.dialogMsg?o.a.createElement(O.a,null,this.state.dialogMsg):null}},{key:"updateAmount",value:function(e){if(e&&e.target){var t=e.target.value;t&&t.length>0&&(this.amount=t)}}},{key:"updateFee",value:function(e){if(e&&e.target){var t=e.target.value;t&&t.length>0&&(this.fee=t)}}},{key:"updateDeadline",value:function(e){if(e&&e.target){var t=e.target.value;this.deadline=t}}},{key:"renderActionButtons",value:function(e){var t=this;return o.a.createElement("td",null,o.a.createElement(y.a,{size:"sm",onClick:function(a){t.setState({rtoken:e}),t.toggleActionDialog()}.bind(this)},"\u5956\u52b1\u77ff\u5de5"))}},{key:"renderExchangelist",value:function(){var e=this,t=this.state.list;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString();a.setTime(t.tokenTime);var l=a.toLocaleString(),r=t.id;return o.a.createElement("tr",null,o.a.createElement("td",null,r),o.a.createElement("td",null,n),o.a.createElement("td",null,l),o.a.createElement("td",null,t.resId," "),o.a.createElement("td",null,o.a.createElement(j.a,{rsId:t.miner})),o.a.createElement("td",null,o.a.createElement(j.a,{rsId:t.downloader})),o.a.createElement("td",null,t.ip),o.a.createElement("td",null,t.status),o.a.createElement("td",null,t.note),e.renderActionButtons(t))}):null}},{key:"render",value:function(){var e=this;return o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement(y.a,{color:"primary",onClick:function(t){return e.loadAll()}},o.a.createElement("i",{className:"fa fa-search"}),"\u663e\u793a\u5168\u90e8"),o.a.createElement(g.a,null,o.a.createElement(x.a,{isOpen:this.state.dropdownOpen,toggle:function(){e.toggle()}},o.a.createElement(D.a,{caret:!0},this.state.channelName),o.a.createElement(C.a,null,this.renderFilterOptions())),o.a.createElement(k.a,{placeholder:"\u8f93\u5165\u641c\u7d22\u53c2\u6570",onChange:this.upateFilterValue.bind(this)}),o.a.createElement(y.a,{color:"primary",onClick:function(t){return e.loadAll()}},o.a.createElement("i",{className:"fa fa-search"}),"\xa0")),o.a.createElement(p.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"ID"),o.a.createElement("th",null,"\u4e0a\u4f20\u65f6\u95f4"),o.a.createElement("th",null,"Token\u65f6\u95f4"),o.a.createElement("th",null,"\u8d44\u6e90ID"),o.a.createElement("th",null,"\u6d41\u91cf\u77ff\u5de5"),o.a.createElement("th",null,"\u4e0b\u8f7d\u8d26\u6237"),o.a.createElement("th",null,"Ip\u5730\u5740"),o.a.createElement("th",null,"\u72b6\u6001"),o.a.createElement("th",null,"\u5907\u6ce8"),o.a.createElement("th",null,"\u64cd\u4f5c"))),o.a.createElement("tbody",null,this.renderExchangelist(),this.renderActionDialog())),o.a.createElement("nav",null,o.a.createElement(m.a,null,o.a.createElement(h.a,null,o.a.createElement(E.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"Prev(\u4e0a\u4e00\u9875")),o.a.createElement(h.a,{active:!0},o.a.createElement(E.a,{tag:"button"},this.state.page)),o.a.createElement(h.a,null,o.a.createElement(E.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"Next(\u4e0b\u4e00\u9875")))),o.a.createElement(N.a,{color:"danger"},o.a.createElement("small",null,"\u8d26\u6237\u91d1\u989d\u5927\u4e8e100\u7684\u8d26\u6237\u624d\u6709\u6743\u9650\u67e5\u770b\u7528\u6237\u786e\u8ba4\u4fe1\u606f\u5217\u8868."))))}}]),t}(s.Component));t.default=M}}]);