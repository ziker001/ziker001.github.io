(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{988:function(t,e,a){"use strict";a.r(e);var n=a(20),c=a(21),l=a(23),r=a(22),s=a(24),o=a(0),i=a.n(o),u=a(163),h=a(386),m=a(223),d=a(64),E=a(65),f=a(804),g=a(805),b=a(224),v=a(227),T=a(30),p=a(63),k=a(74),A=a(803),y=a(382),I=a(383),P=a(125),O=a(122),C=a(123),N=a(162),j=a(13),w=a(3),S=a.n(w),L=a(27),x=a(66),D=a(76),V=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(l.a)(this,Object(r.a)(e).call(this,t))).page=1,a.state={accounts:null,page:1,transPage:1,showAccount:!1,accountInfo:null,filterValue:"",transactionTab:"0"},a}return Object(s.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.loadAccountList(1,this.state.filterIdx)}},{key:"loadAccountList",value:function(t,e){e||(e=this.state.filterValue);var a=Object(j.getShareHost)()+"/btb?action=listAccount&page="+t+"&query="+e;D.concat(a,function(t,e,a){if(t)console.log(t);else if(a)try{var n=JSON.parse(a);this.setState({accounts:n})}catch(c){}}.bind(this))}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,this.loadAccountList(this.state.page))}},{key:"nextPage",value:function(){this.state.page++,this.loadAccountList(this.state.page)}},{key:"renderAccountList",value:function(){var t=this.state.accounts.accounts;return t?t.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(x.a,{rsId:t.rsId})),i.a.createElement("td",null,t.height),i.a.createElement("td",null,t.balance," \u79ef\u5206"),i.a.createElement("td",null,t.mined," \u79ef\u5206"))}):null}},{key:"renderAutoTransactionItem",value:function(){return this.state.autoTransactions.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,Object(j.getTransactionName)(t.type)),i.a.createElement("td",null,t.from),i.a.createElement("td",null,t.to),i.a.createElement("td",null,t.amount," \u79ef\u5206"),i.a.createElement("td",null,"0 \u79ef\u5206"),i.a.createElement("td",null,t.height))})}},{key:"renderAccountTransactionItem",value:function(){return this.state.accountTransactions.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,Object(j.getTransactionName)(t.type)),i.a.createElement("td",null,t.from),i.a.createElement("td",null,t.to),i.a.createElement("td",null,t.amount," \u79ef\u5206"),i.a.createElement("td",null,t.fee," \u79ef\u5206"),i.a.createElement("td",null,t.height))})}},{key:"renderAccountTransactions",value:function(){return"0"==this.state.transactionTab?this.state.accountTransactions?i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),i.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),i.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),i.a.createElement("th",null,"\u91d1\u989d"),i.a.createElement("th",null,"\u624b\u7eed\u8d39"),i.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),i.a.createElement("tbody",null,this.renderAccountTransactionItem())):null:this.state.accountInfo.autoTransactions?i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),i.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),i.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),i.a.createElement("th",null,"\u91d1\u989d"),i.a.createElement("th",null,"\u624b\u7eed\u8d39"),i.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),i.a.createElement("tbody",null,this.renderAutoTransactionItem())):null}},{key:"onTransactionTabClicked",value:function(t){this.state.transactionTab!==t&&(this.setState({transactionTab:t}),"0"===t&&this.loadAccountTransactions(1),"1"===t&&this.loadAutoTransactions(1))}},{key:"renderTransactionsTabs",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement(A.a,{tabs:!0},i.a.createElement(y.a,null,i.a.createElement(I.a,{className:S()({active:"0"===this.state.transactionTab}),onClick:function(){t.onTransactionTabClicked("0")}},i.a.createElement("i",{className:"icon-calculator"}),i.a.createElement(h.a,{color:"success"},"\u8d26\u6237\u4ea4\u6613) "))),i.a.createElement(y.a,null,i.a.createElement(I.a,{className:S()({active:"1"===this.state.transactionTab}),onClick:function(){t.onTransactionTabClicked("1")}},i.a.createElement("i",{className:"icon-basket-loaded"}),i.a.createElement(h.a,{pill:!0,color:"danger"},"\u673a\u5668\u4eba\u4ea4\u6613")))),this.renderAccountTransactions(),this.renderTransactionPagnations())}},{key:"loadAccountTransactions",value:function(t){var e=this,a=this.state.accountInfo.rsId;Object(L.loadAccountTransactions)(a,t,10,function(t,a){if(t&&a){var n=a.transactions;e.setState({accountTransactions:n})}}.bind(this))}},{key:"loadAutoTransactions",value:function(t){var e=this,a=this.state.accountInfo.rsId;Object(L.loadAutoTransactions)(a,t,10,function(t,a){if(t&&a){var n=a.transactions;e.setState({autoTransactions:n})}}.bind(this))}},{key:"preTransPage",value:function(){this.state.transPage>1&&this.state.transPage--,"0"===this.state.transactionTab?this.loadAccountTransactions(this.state.transPage):this.loadAutoTransactions(this.state.transPage)}},{key:"nextTransPage",value:function(){this.state.transPage++,"0"===this.state.transactionTab?this.loadAccountTransactions(this.state.transPage):this.loadAutoTransactions(this.state.transPage)}},{key:"renderTransactionPagnations",value:function(){var t=this;return i.a.createElement(m.a,null,i.a.createElement(d.a,null,i.a.createElement(E.a,{previous:!0,tag:"button",onClick:function(e){t.preTransPage()}},"-")),i.a.createElement(d.a,{active:!0},i.a.createElement(E.a,{tag:"button"},this.state.transPage)),i.a.createElement(d.a,null,i.a.createElement(E.a,{next:!0,tag:"button",onClick:function(e){t.nextTransPage()}},"+")))}},{key:"rederAccountInfoDialog",value:function(){return this.state.accountInfo?i.a.createElement(P.a,{isOpen:this.state.showAccount,toggle:this.toggleAccount.bind(this),className:"modal-info "+this.props.className},i.a.createElement(O.a,{toggle:this.toggleAccount.bind(this)},"\u8d26\u6237\u660e\u7ec6"),i.a.createElement(C.a,null,i.a.createElement("p",null,"\u8d26\u6237ID: ",this.state.accountInfo.rsId),i.a.createElement("p",null,"\u8d26\u6237\u516c\u94a5: ",this.state.accountInfo.pk),i.a.createElement("p",null,"\u8d26\u6237\u4f59\u989d: ",this.state.accountInfo.balance,"\u79ef\u5206"),i.a.createElement("p",null,"\u4ea4\u6613\u5217\u8868:"),this.renderTransactionsTabs()),i.a.createElement(N.a,null,i.a.createElement(T.a,{color:"danger",onClick:this.toggleAccount.bind(this)},"OK"))):null}},{key:"toggleAccount",value:function(){this.setState({showAccount:!this.state.showAccount})}},{key:"showAccountInfo",value:function(t){this.toggleAccount();var e=Object(j.getShareHost)()+"/btb?action=account&rsIdOrPkHex="+t;D.concat(e,function(t,e,a){if(!t){var n=JSON.parse(a),c=n.transactions;this.setState({accountInfo:n,accountTransactions:c})}}.bind(this))}},{key:"updateQueryValue",value:function(t){if(t&&t.target){var e=t.target.value;this.setState({filterValue:e})}}},{key:"renderList",value:function(){var t=this;return this.state.accounts?i.a.createElement(f.a,null,i.a.createElement(g.a,null,i.a.createElement(b.a,null,i.a.createElement(v.a,null,i.a.createElement(p.a,null,i.a.createElement(k.a,{placeholder:"\u641c\u7d22",onChange:this.updateQueryValue.bind(this)}),i.a.createElement(T.a,{color:"primary",onClick:function(e){return t.loadAccountList(1)}},i.a.createElement("i",{className:"fa fa-search"}),"\xa0")),i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u8d26\u6237ID"),i.a.createElement("th",null,"\u9ad8\u5ea6"),i.a.createElement("th",null,"\u4f59\u989d"),i.a.createElement("th",null,"\u673a\u5668\u4eba\u6536\u5165"))),i.a.createElement("tbody",null,this.renderAccountList(),this.rederAccountInfoDialog())),i.a.createElement("nav",null,i.a.createElement(m.a,null,i.a.createElement(d.a,null,i.a.createElement(E.a,{previous:!0,tag:"button",onClick:function(e){t.prePage()}},"\u4e0a\u4e00\u9875")),i.a.createElement(d.a,{active:!0},i.a.createElement(E.a,{tag:"button"},this.state.page," / ",this.state.accounts.total)),i.a.createElement(d.a,null,i.a.createElement(E.a,{next:!0,tag:"button",onClick:function(e){t.nextPage()}},"\u4e0b\u4e00\u9875")))))))):null}},{key:"render",value:function(){return i.a.createElement("div",{className:"animated fadeIn"},this.renderList())}}]),e}(o.Component);e.default=V}}]);
//# sourceMappingURL=23.c45ce46d.chunk.js.map