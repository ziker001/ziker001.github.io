(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{856:function(e,t,a){"use strict";var n=a(848),s=a.n(n),l=a(849),i=a(21),r=a(22),c=a(24),o=a(23),u=a(25),d=a(0),h=a.n(d),p=a(131),m=a(128),g=a(129),E=a(167),f=a(33),v=a(858),b=a.n(v),k=function(e){return new Promise(function(t,a){var n=new Image;n.addEventListener("load",function(){return t(n)}),n.addEventListener("error",function(e){return a(e)}),n.setAttribute("crossOrigin","anonymous"),n.src=e})};function y(e,t){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(s.a.mark(function e(t,a){var n,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,(l=document.createElement("canvas")).width=a.width,l.height=a.height,l.getContext("2d").drawImage(n,a.x,a.y,a.width,a.height,0,0,a.width,a.height),e.abrupt("return",new Promise(function(e,t){e(l.toDataURL("image/jpeg",.1))}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return new Promise(function(t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)},!1),a.readAsDataURL(e)})}a.d(t,"a",function(){return I});var I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).onCropChange=function(e){a.setState({crop:e})},a.onCropComplete=function(e,t){console.log(e,t),a.setState({croppedAreaPixels:t})},a.onZoomChange=function(e){a.setState({zoom:e})},a.onFileChange=function(){var e=Object(l.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=5;break}return e.next=3,C(t.target.files[0]);case 3:n=e.sent,a.setState({imageSrc:n,crop:{x:0,y:0},zoom:1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.showCroppedImage=Object(l.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(a.state.imageSrc,a.state.croppedAreaPixels);case 2:t=e.sent,a.setState({croppedImage:t}),a.props.onFinish(a.state.croppedImage),a.toggleEditor();case 6:case"end":return e.stop()}},e)})),a.state={mode:"simple",editing:!1,imageSrc:null,crop:{x:0,y:0},zoom:1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"toggleEditor",value:function(){this.setState({editing:!this.state.editing,imageSrc:null})}},{key:"renderEditor",value:function(){return h.a.createElement(p.a,{isOpen:this.state.editing,toggle:this.toggleEditor.bind(this),className:"modal-info "+this.props.className},h.a.createElement(m.a,{toggle:this.toggleEditor.bind(this)},this.props.title),h.a.createElement(g.a,null,h.a.createElement("div",{style:{width:200,height:300}},h.a.createElement("input",{type:"file",onChange:this.onFileChange}),this.state.imageSrc&&h.a.createElement(b.a,{image:this.state.imageSrc,crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.aspect,onCropChange:this.onCropChange,onCropComplete:this.onCropComplete,onZoomChange:this.onZoomChange}))),h.a.createElement(E.a,null,h.a.createElement(f.a,{color:"danger",onClick:this.showCroppedImage.bind(this)},"\u5b8c\u6210")))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,this.renderEditor(),h.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.toggleEditor()}},this.props.title),this.state.croppedImage&&h.a.createElement("img",{style:{width:50,height:50},src:this.state.croppedImage}))}}]),t}(d.Component)},880:function(e,t,a){"use strict";(function(e){var n=a(21),s=a(22),l=a(24),i=a(23),r=a(25),c=a(0),o=a.n(c),u=a(33),d=a(77),h=a(168),p=(a(30),a(3),a(90)),m=a(78),g=a(65),E=a(228),f=a(66),v=a(67),b=a(89),k=a(64),y=a(131),S=a(128),C=a(129),I=a(127),D=a(167),P=a(234),N=a(398),j=a(396),T=a(130),O=a(13),w=a(73),x=a(68),M=a(169),A=a(132),B=a(30),R=(B.loadProductList,B.doBShopTransaction),F=B.getIssueReason,H=(B.loadProductDetails,B.loadIssueTransactions),J=B.shareDecrypt,L=B.shareEncrypt,z=B.loadEncryptedInfo,V=a(857),U=(Object(O.getShareHost)(),a(79),function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this,e))).state={product:t.props.product,productDetail:t.props.productDetail,winner:t.props.winner,paying:!1,confirm:!1,day7refund:!1,issue:!1,drop:!1,selectIssueAction:!1,selectActionTitle:"\u9009\u62e9\u7ea0\u7eb7\u64cd\u4f5c\u7c7b\u578b",issueReason:0,issues:[],issuePage:1,renderDesposit:!1},t.fee="1",t.deadline=5,t}return Object(r.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret,this.account=e)}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(O.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"togglePay10p",value:function(){this.setState({paying:!this.state.paying,dialogMsg:""})}},{key:"pay10P",value:function(){this.togglePay10p()}},{key:"toggleDrop",value:function(){this.setState({drop:!this.state.drop,dialogMsg:""})}},{key:"toggleDecrypt",value:function(){var e=this;!this.state.decrypt&&this.account?z(this.state.product,this.account.rsId,function(t,a){t&&a&&e.setState({infoBlocks:a})}.bind(this)):this.setState({decrypted:null});var t="";this.account||(t="\u672a\u767b\u5f55"),this.setState({decrypt:!this.state.decrypt,dialogMsg:t})}},{key:"toggleSending",value:function(){this.setState({sending:!this.state.sending,dialogMsg:""})}},{key:"toggleIssue",value:function(){this.setState({issue:!this.state.issue,dialogMsg:""})}},{key:"toggleHelp",value:function(){this.setState({voteHelp:!this.state.voteHelp,dialogMsg:""})}},{key:"toggleVotes",value:function(){var e=this;this.state.votes||H(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})}),this.setState({votes:!this.state.votes,dialogMsg:"",issuePage:1})}},{key:"toggleRejectConfirm",value:function(){this.setState({rejectConfirm:!this.state.rejectConfirm,dialogMsg:""})}},{key:"toggle7dayRefund",value:function(){this.setState({day7refund:!this.state.day7refund,dialogMsg:""})}},{key:"renderActionButtons",value:function(){var e=this.state.product.status;return 3==e?o.a.createElement("div",null,o.a.createElement(u.a,{color:"danger",onClick:this.pay10P.bind(this)},"\u53d1\u9001\u6536\u8d27\u4fe1\u606f"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleDrop.bind(this)},"\u4e70\u5bb6\u653e\u5f03")):4==e?o.a.createElement("div",null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"\u89e3\u5bc6\u4e70\u5bb6\u5730\u5740"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleSending.bind(this)},"\u5356\u5bb6\u53d1\u8d27")):5==e?o.a.createElement("div",null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"\u89e3\u5bc6\u53d1\u8d27\u4fe1\u606f"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleConfirm.bind(this)},"\u4e70\u5bb6\u786e\u8ba4\u6536\u8d27"),o.a.createElement(u.a,{color:"danger",onClick:this.toggle7dayRefund.bind(this)},"8\u5929\u65e0\u7406\u7531\u9000\u8d27"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleIssue.bind(this)},"\u4e70\u5bb6\u7533\u8bf7\u7ea0\u7eb7\u5904\u7406")):6==e?o.a.createElement("div",null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"\u89e3\u5bc6\u53d1\u8d27\u4fe1\u606f"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"\u5356\u5bb6\u786e\u8ba4\u9000\u8d27"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleIssue.bind(this)},"\u5356\u5bb6\u7533\u8bf7\u7ea0\u7eb7\u5904\u7406")):10==e?o.a.createElement("div",null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleVotes.bind(this)},"\u67e5\u770b\u6295\u7968\u5217\u8868"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleHelp.bind(this)},"\u9080\u8bf7\u597d\u53cb\u5e2e\u5fd9\u6295\u7968"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleIssue.bind(this)},"\u7ea0\u7eb7\u6295\u7968"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleConfirm.bind(this)},"\u4e70\u5bb6\u786e\u8ba4\u6536\u8d27"),o.a.createElement(u.a,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"\u5356\u5bb6\u786e\u8ba4\u9000\u8d27")):null}},{key:"updateFee",value:function(e){e&&e.target&&(this.fee=e.target.value,0==this.fee.length&&(this.fee="1"))}},{key:"updateSellerRefund",value:function(e){e&&e.target&&(this.sellerRefund=e.target.value)}},{key:"updateIssueNote",value:function(e){e&&e.target&&(this.issueNote=e.target.value,this.issueNote.length>100&&(this.issueNote=this.issueNote.substring(0,99)))}},{key:"updateBuyerRefund",value:function(e){e&&e.target&&(this.buyerRefund=e.target.value)}},{key:"updateDeadline",value:function(e){e&&e.target&&(this.deadline=e.target.value,0==this.deadline.length&&(this.deadline=5))}},{key:"updateAddress",value:function(e){e&&e.target&&(this.address=e.target.value,this.updateAddressBlock())}},{key:"updateProductAddress",value:function(e){e&&e.target&&(this.address=e.target.value)}},{key:"updateContact",value:function(e){e&&e.target&&(this.contact=e.target.value,this.updateAddressBlock())}},{key:"updatePhone",value:function(e){e&&e.target&&(this.phone=e.target.value,this.updateAddressBlock())}},{key:"updateAddressBlock",value:function(){var e="\u8054\u7cfb\u4eba:"+this.contact+" \u5730\u5740:"+this.address+" \u8054\u7cfb\u65b9\u5f0f:"+this.phone;e=JSON.stringify(e);var t=this.state.productDetail.seller,a=Object(O.simpleHash)(e),n=L(this.secret,t,this.state.product.transactionId,e);this.setState({addressBlock:n,addressHash:a})}},{key:"updateTracking",value:function(e){if(e&&e.target){var t=e.target.value,a=Object(O.simpleHash)(t),n=this.state.productDetail.winner.pk,s=L(this.secret,n,this.state.product.transactionId,t);this.setState({trackingBlock:s,trackingHash:a})}}},{key:"debug",value:function(){var e=J(this.secret,"","","");console.log(e)}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?o.a.createElement("div",null,o.a.createElement(p.a,null,this.state.dialogMsg),o.a.createElement(A.a,null)):this.state.dialogMsg?o.a.createElement(p.a,null,this.state.dialogMsg):null}},{key:"doPaying",value:function(){var e=this,t=this.state.product.transactionId,a=Object(O.createPeerId)(this.secret),n=this.state.addressHash,s=this.state.addressBlock,l={action:"transaction",type:"sAccept",amount:"0",hash:n,fee:this.fee,dealine:this.deadline,sid:t,pk:a.pk,accountId:a.aid,addressBlock:s};R(this.secret,l,function(t,a){t&&a&&a.ok?(Object(O.saveUserSec)(e.secret),e.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):e.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"do7dayrefund",value:function(){var t=this,a=this.state.product.transactionId,n=Object(O.createPeerId)(this.secret),s=this.state.trackingBlock,l={action:"transaction",type:"sAction",hash:Object(O.simpleHash)(s),info:s=new e(s).toString("base64"),accountId:n.aid,fee:this.fee,dealine:this.deadline,sid:a,saction:"20"};R(this.secret,l,function(e,a){e&&a&&a.ok?(Object(O.saveUserSec)(t.secret),t.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"doDrop",value:function(){var e=this,t=this.state.product.transactionId,a={action:"transaction",type:"sAction",hash:"0",accountId:Object(O.createPeerId)(this.secret).aid,fee:this.fee,dealine:this.deadline,sid:t,saction:"4"};R(this.secret,a,function(t,a){t&&a&&a.ok?(Object(O.saveUserSec)(e.secret),e.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):e.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"doIssue",value:function(){var t=this;if(0!=this.state.issueReason){var a=this.state.product.transactionId,n=Object(O.createPeerId)(this.secret),s=this.state.issueReason,l=this.buyerRefund,i=this.sellerRefund,r=this.issueNote,c=0;r&&r.length>0&&(c=Object(O.simpleHash)(r),r=new e(r).toString("base64"));var o={action:"transaction",type:"issue",hash:c,info:r,pk:n.pk,fee:this.fee,dealine:this.deadline,sid:a,reason:s,wp:l,sp:i};R(this.secret,o,function(e,a){e&&a&&a.ok?(Object(O.saveUserSec)(t.secret),t.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}else this.setState({dialogMsg:"Choose(\u8bf7\u9009\u62e9\u64cd\u4f5c\u7c7b\u578b)"})}},{key:"doRejectConfirm",value:function(){var e=this,t=this.state.product.transactionId,a=Object(O.createPeerId)(this.secret),n={action:"transaction",type:"sAction",accountId:a.aid,pk:a.pk,fee:this.fee,dealine:this.deadline,sid:t,saction:"21"};R(this.secret,n,function(t,a){t&&a&&a.ok?(Object(O.saveUserSec)(e.secret),e.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):e.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"doSending",value:function(){var t=this,a=this.state.product.transactionId,n=Object(O.createPeerId)(this.secret),s=this.state.trackingBlock,l=this.state.trackingHash;s=new e(s).toString("base64");var i={action:"transaction",type:"sAction",accountId:n.aid,pk:n.pk,fee:this.fee,dealine:this.deadline,sid:a,saction:"2",info:s,hash:l};R(this.secret,i,function(e,a){e&&a&&a.ok?(Object(O.saveUserSec)(t.secret),t.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"doWinnerConfirm",value:function(){var e=this,t=this.state.product.transactionId,a={action:"transaction",type:"sAction",accountId:Object(O.createPeerId)(this.secret).aid,fee:this.fee,dealine:this.deadline,sid:t,saction:"3"};R(this.secret,a,function(t,a){t&&a&&a.ok?(Object(O.saveUserSec)(e.secret),e.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):e.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}},{key:"toggleConfirm",value:function(){this.setState({confirm:!this.state.confirm,dialogMsg:""})}},{key:"renderDropDialog",value:function(){var e=this.state.winner.accountId;return o.a.createElement(y.a,{isOpen:this.state.drop,toggle:this.toggleDrop.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleDrop.bind(this)},e,"\u653e\u5f03\u4ea4\u6613"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(1),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4e70\u5bb6\u653e\u5f03\u540e\u8d26\u6237\u81ea\u52a8\u9000\u56de\u62a2\u8d2d\u91d1\u989d,\u5356\u5bb6\u9000\u56de\u4fdd\u8bc1\u91d1."))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleDrop.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.doDrop.bind(this)},"\u786e\u8ba4\u653e\u5f03")))}},{key:"renderRejectConfirmDialog",value:function(){var e=this.state.product.senderId;return o.a.createElement(y.a,{isOpen:this.state.rejectConfirm,toggle:this.toggleRejectConfirm.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleRejectConfirm.bind(this)},e,"\u786e\u8ba4\u6536\u5230\u9000\u8d27"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u786e\u8ba4\u540e\u5356\u5bb6\u5c06\u7acb\u5373\u6536\u5230\u4fdd\u8bc1\u91d1\u548c\u7cfb\u7edf\u8865\u507f.\u4ea4\u6613\u7ed3\u675f.\u53cc\u65b9\u53ef\u4ee5\u5bf9\u4ea4\u6613\u8bc4\u4ef7"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.doRejectConfirm.bind(this)},"\u786e\u8ba4\u9000\u8d27")))}},{key:"renderIssueTransactions",value:function(){var t=this.state.issues;return t?t.map(function(t){var a=V(t.time).format("MM-DD HH:mm"),n="black";return t.luckey&&(n="red"),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(x.a,{rsId:t.from})),o.a.createElement("td",{style:{color:n}},t.wp,"%"),o.a.createElement("td",{style:{color:n}},t.sp,"%"),o.a.createElement("td",null,new e(t.info,"base64").toString()),o.a.createElement("td",null,a))}.bind(this)):null}},{key:"copyAddress",value:function(){var e=document.querySelector("#invite_vote_url");e.focus(),e.select();var t=document.execCommand("copy"),a=document.querySelector("#msg_invite");a.innerHTML=t?"OK.\u590d\u5236\u6210\u529f":"\u590d\u5236\u5931\u8d25\uff0c\u8bf7\u624b\u52a8\u590d\u5236"}},{key:"renderInviteVotes",value:function(){var e=this,t=(this.state.winner.accountId,this.state.product.senderId,Object(O.getCurrentHost)()+"/#/bshop/product-list#"+this.state.product.transactionId+"#.\u6211\u5728\u7f51\u4e0a\u8d2d\u7269\u51fa\u73b0\u7ea0\u7eb7\uff0c\u8bf7\u6253\u5f00\u8fd9\u4e2a\u5730\u5740\u5e2e\u5fd9\u6295\u4e00\u7968\u89e3\u51b3\u4ea4\u6613\u7ea0\u7eb7,\u633d\u56de\u6211\u7684\u635f\u5931\u3002\u8c22\u8c22");return o.a.createElement(y.a,{isOpen:this.state.voteHelp,toggle:this.toggleHelp.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleHelp.bind(this)},"\u9080\u8bf7\u597d\u53cb\u5e2e\u5fd9\u6295\u7968"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u8bf7\u590d\u5236\u4e0b\u9762\u94fe\u63a5\u53d1\u9001\u7ed9\u597d\u53cb\u5e2e\u5fd9\u6295\u7968"),o.a.createElement("p",null,o.a.createElement(d.a,{type:"textarea",rows:"2",id:"invite_vote_url",value:t})),o.a.createElement(u.a,{color:"ghost-success",onClick:function(t){return e.copyAddress()}},o.a.createElement("i",{className:"fa fa-copy fa-lg"}),"\xa0\u590d\u5236\u5730\u5740"),o.a.createElement("span",{id:"msg_invite"})),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleHelp.bind(this)},"\u53d6\u6d88")))}},{key:"renderIssueVotes",value:function(){var e=this,t=this.state.winner.accountId,a=this.state.product.senderId;return o.a.createElement(y.a,{isOpen:this.state.votes,toggle:this.toggleVotes.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleVotes.bind(this)},"\u7ea0\u7eb7\u6295\u7968\u5217\u8868"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement("p",null,"\u5356\u5bb6\u8d26\u53f7:",o.a.createElement(x.a,{rsId:a})),o.a.createElement("p",null,"\u4e70\u5bb6\u8d26\u53f7:",o.a.createElement(x.a,{rsId:t})),o.a.createElement("p",null,"\u7ea0\u7eb7\u539f\u56e0:",F(this.state.product.issueReason)),o.a.createElement(h.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u6295\u7968\u8d26\u6237"),o.a.createElement("th",null,"\u4e70\u5bb6%"),o.a.createElement("th",null,"\u5356\u5bb6%"),o.a.createElement("th",null,"\u8bf4\u660e"),o.a.createElement("th",null,"\u65f6\u95f4"))),o.a.createElement("tbody",null,this.renderIssueTransactions()),o.a.createElement(E.a,null,o.a.createElement(f.a,null,o.a.createElement(v.a,{previous:!0,tag:"button",onClick:function(t){e.preIssuePage()}},"-")),o.a.createElement(f.a,{active:!0},o.a.createElement(v.a,{tag:"button"},this.state.issuePage)),o.a.createElement(f.a,null,o.a.createElement(v.a,{next:!0,tag:"button",onClick:function(t){e.nextIssuePage()}},"+"))))),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleVotes.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.toggleIssue.bind(this)},"\u6295\u7968")))}},{key:"preIssuePage",value:function(){var e=this;this.state.issuePage--,H(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"nextIssuePage",value:function(){var e=this;this.state.issuePage++,H(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"renderWinnerConfirmedProductDialog",value:function(){var e=this.state.winner.accountId;return o.a.createElement(y.a,{isOpen:this.state.confirm,toggle:this.toggleConfirm.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleConfirm.bind(this)},e," \u786e\u8ba4\u6536\u8d27"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u786e\u8ba4\u540e\u5356\u5bb6\u5c06\u7acb\u5373\u6536\u5230\u8d27\u6b3e\u3002\u4ea4\u6613\u7ed3\u675f.\u53cc\u65b9\u53ef\u4ee5\u5bf9\u4ea4\u6613\u8bc4\u4ef7"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleConfirm.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.doWinnerConfirm.bind(this)},"\u786e\u8ba4\u6536\u8d27")))}},{key:"renderIssueDialog",value:function(){var e=this,t=this.state.winner.accountId,a=this.state.product.senderId,n=this.state.product.price+" + "+this.state.product.guarantee,s="\u4e70\u5bb6\u7533\u8bf7\u7ea0\u7eb7\u5904\u7406",l="\u5356\u5bb6\u7533\u8bf7\u7ea0\u7eb7\u5904\u7406",i="\u6211\u8981\u6295\u7968\u89e3\u51b3\u7ea0\u7eb7";return o.a.createElement(y.a,{isOpen:this.state.issue,toggle:this.toggleIssue.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleIssue.bind(this)},"\u6295\u7968\u89e3\u51b3\u4ea4\u6613\u7ea0\u7eb7"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u5546\u54c1\u540d\u79f0: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement("p",null,"\u5356\u5bb6\u4fdd\u8bc1\u91d1:",this.state.product.guarantee," \u79ef\u5206"),o.a.createElement("p",null,"\u5356\u5bb6\u8d26\u53f7:",o.a.createElement(x.a,{rsId:a})),o.a.createElement("p",null,"\u4e70\u5bb6\u8d26\u53f7:",o.a.createElement(x.a,{rsId:t})),o.a.createElement("p",null,"\u7ea0\u7eb7\u539f\u56e0:",F(this.state.product.issueReason)),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),o.a.createElement(m.a,null,o.a.createElement(P.a,{isOpen:this.state.selectIssueAction,toggle:function(){e.setState({selectIssueAction:!e.state.selectIssueAction})}.bind(this)},o.a.createElement(N.a,{caret:!0},this.state.selectActionTitle),o.a.createElement(j.a,null,o.a.createElement(T.a,{onClick:function(){e.setState({selectActionTitle:s,issueReason:1})}.bind(this)},s),o.a.createElement(T.a,{onClick:function(){e.setState({selectActionTitle:l,issueReason:2})}.bind(this)},l),o.a.createElement(T.a,{onClick:function(){e.setState({selectActionTitle:i,issueReason:3})}.bind(this)},i))),o.a.createElement(p.a,{htmlFor:"appendedInputButtons"},"\u4ea4\u6613\u7ea0\u7eb7\u603b\u91d1\u989d ",n," \u768490%\u5206\u914d\u7ed9\u4e70\u5356\u53cc\u65b9\uff0c10%\u7559\u505a\u6295\u7968\u5956\u52b1:"),o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u7ed9\u5356\u5bb6\u6295\u7968:")),o.a.createElement(d.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateSellerRefund.bind(this),placeholder:"\u8f93\u5165\u5356\u5bb6\u9000\u6b3e\u767e\u5206\u6bd4\uff0c\u4f8b\u598250"}),o.a.createElement(b.a,{addonType:"append"},o.a.createElement(k.a,null,"%(\u767e\u5206\u6bd4)"))),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u7ed9\u4e70\u5bb6\u6295\u7968:")),o.a.createElement(d.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateBuyerRefund.bind(this),placeholder:"\u8f93\u5165\u4e70\u5bb6\u9000\u6b3e\u767e\u5206\u6bd4,\u4f8b\u598250"}),o.a.createElement(b.a,{addonType:"append"},o.a.createElement(k.a,null,"%(\u767e\u5206\u6bd4)"))))),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u8bf4\u660e:")),o.a.createElement(d.a,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",onChange:this.updateIssueNote.bind(this),placeholder:"\u7ea0\u7eb7\u610f\u89c1\u7b80\u5355\u63cf\u8ff0.100\u5b57\u4ee5\u5185."})))),this.renderFeeAndDeadline(),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4ea4\u6613\u7ea0\u7eb7\u4fe1\u606f\u5c06\u516c\u5f00\uff0c\u6240\u6709\u8d26\u6237\u90fd\u53ef\u4ee5\u6839\u636e\u516c\u5f00\u4fe1\u606f\u6295\u7968\u5e2e\u52a9\u89e3\u51b3\u7ea0\u7eb7\u3002")),o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u6295\u7968\u8005\u8bf7\u7ed3\u5408\u5f53\u524d\u4ea4\u6613\u60c5\u51b5\u3001\u4e70\u5356\u53cc\u65b9\u4ea4\u6613\u8bc1\u636e\u4e0e\u5f53\u524d\u5546\u54c1\u6240\u5728\u5730\u7b49\u4fe1\u606f\u7ed9\u51fa\u5ba2\u89c2\u3001\u516c\u6b63\u7684\u6295\u7968\u7ed3\u679c\u3002")),o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u7cfb\u7edf\u673a\u5668\u4eba\u968f\u673a\u9009\u62e9(5\u5929\u6295\u7968\u671f)\u4e00\u6279\u6295\u7968\u7ed3\u679c\u8ba1\u7b97\u6700\u7ec8\u4ef2\u88c1\u7ed3\u679c\uff0c\u81ea\u52a8\u7ed9\u53cc\u65b9\u9000\u6b3e\u3002\u540c\u65f6\u5bf9\u4e8e\u6700\u63a5\u8fd1\u4ef2\u88c1\u7ed3\u679c\u7684\u6295\u7968\u8d26\u6237\uff0c\u81ea\u52a8\u53d1\u653e\u7ea0\u7eb7\u91d1\u989d\u768410%\u4f5c\u4e3a\u5956\u52b1\u3002"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleIssue.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.doIssue.bind(this)},"\u53d1\u5e03")))}},{key:"renderWinner7dayRefundDialog",value:function(){var e=this.state.winner.accountId;return o.a.createElement(y.a,{isOpen:this.state.day7refund,toggle:this.toggle7dayRefund.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggle7dayRefund.bind(this)},e," - 8\u5929\u65e0\u7406\u7531\u9000\u8d27"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement(p.a,{htmlFor:"appendedInputButtons"},"\u771e\u5ba2\u8d26\u6237\u5bc6\u7801:"),o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(1),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u5feb\u9012\u4fe1\u606f:")),o.a.createElement(d.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTracking.bind(this),placeholder:"\u5feb\u9012\u5355\u53f7:"})),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u4fe1\u606f\u52a0\u5bc6:")),o.a.createElement(d.a,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.trackingBlock}),o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4e70\u5bb6\u6536\u5230\u8d27\u540e\u53ef\u4ee5\u4e0e\u5356\u5bb6\u6c9f\u901a\uff0c\u7533\u8bf7\u9000\u8d27\u3002\u9000\u8d27\u5feb\u9012\u4fe1\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u5356\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b"))))),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u5356\u5bb6\u6536\u5230\u9000\u8d27\u540e\u786e\u8ba4\uff0c\u7cfb\u7edf\u81ea\u52a8\u7ed9\u4e70\u5bb6\u9000\u6b3e\u3002\u7cfb\u7edf\u5c06\u81ea\u52a8\u9000\u4fdd\u8bc1\u91d1\u7ed9\u5356\u5bb6\u30027\u5929\u672a\u786e\u8ba4\u7cfb\u7edf\u5c06\u81ea\u52a8\u786e\u8ba4."))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggle7dayRefund.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.do7dayrefund.bind(this)},"\u65e0\u7406\u7531\u9000\u8d27")))}},{key:"renderFeeAndDeadline",value:function(e){var t="\u673a\u5668\u4eba\u8d39\uff0c\u6700\u5c110.1\u79ef\u5206";return e&&(t="\u673a\u5668\u4eba\u8d39\uff0c\u6700\u5c11"+e+"\u79ef\u5206"),o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,o.a.createElement(M.a,{id:"min123",text:"(\u673a\u5668\u4eba\u8d39:",content:"\u673a\u5668\u4eba\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684\u8d26\u6237\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe(5\u5206\u949f\u4e2d\u672a\u9a8c\u8bc1\u7684\u4ea4\u6613\u5c06\u88ab\u4e22\u5f03\uff0c\u76f8\u5f53\u4e8e\u4ea4\u6613\u6ca1\u6709\u53d1\u751f)\u3002\u673a\u5668\u4eba\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002"}))),o.a.createElement(d.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:t}),o.a.createElement(b.a,{addonType:"append"},o.a.createElement(k.a,null,"\u79ef\u5206"))))),this.renderDeadline())}},{key:"renderDeadline",value:function(){return null}},{key:"doDecrypt",value:function(){var t=this;if(!this.state.infoBlocks)return null;if(this.secret){var a=[];this.state.infoBlocks.forEach(function(n){var s;s=n.type>0?J(t.secret,n.pk,n.id,n.block):new e(n.block,"base64").toString(),a.push(s)}.bind(this)),this.setState({decrypted:a})}else this.setState({dialogMsg:"(\u672a\u767b\u5f55)"})}},{key:"renderEncryptedInfos",value:function(){var e=this;if(!this.state.infoBlocks)return null;var t=0;return this.state.infoBlocks.map(function(a){var n=a.block;return e.state.decrypted&&(n=e.state.decrypted[t]),t++,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u5bc6\u6587:")),o.a.createElement(d.a,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:n})))}.bind(this))}},{key:"renderDecryptDialog",value:function(){return o.a.createElement(y.a,{isOpen:this.state.decrypt,toggle:this.toggleDecrypt.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleDecrypt.bind(this)},"\u4fe1\u606f\u89e3\u5bc6"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),o.a.createElement(m.a,null,this.renderEncryptedInfos()),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4ea4\u6613\u4fe1\u606f\u5df2\u7ecf\u52a0\u5bc6\uff0c\u53ea\u6709\u4e70\u5356\u53cc\u65b9\u624d\u53ef\u4ee5\u89e3\u5bc6\u3002"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",onClick:this.doDecrypt.bind(this)},"\u89e3\u5bc6\u4fe1\u606f")))}},{key:"renderDeliverProductDialog",value:function(){var e=this.state.product.senderId;return o.a.createElement(y.a,{isOpen:this.state.sending,toggle:this.toggleSending.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.toggleSending.bind(this)},e," \u53d1\u8d27"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement(p.a,{htmlFor:"appendedInputButtons"},"\u771e\u5ba2\u8d26\u6237\u5bc6\u7801:"),o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(1),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u5feb\u9012\u4fe1\u606f:")),o.a.createElement(d.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTracking.bind(this),placeholder:"\u5feb\u9012\u5355\u53f7:"})),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u4fe1\u606f\u52a0\u5bc6:")),o.a.createElement(d.a,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.trackingBlock})))),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u5feb\u9012\u4fe1\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u4e70\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b")),o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u53d1\u8d27\u540e\u7b49\u5f85\u4e70\u5bb6\u6536\u8d27\uff0c\u4e70\u5bb6\u786e\u8ba4\u540e\u7cfb\u7edf\u5c06\u7acb\u5373\u4ed8\u6b3e\uff08\u542b\u4fdd\u8bc1\u91d1\uff09\u7ed9\u5356\u5bb6\u3002"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.toggleSending.bind(this)},"\u53d6\u6d88"),o.a.createElement(u.a,{color:"danger",hidden:this.state.success,onClick:this.doSending.bind(this)},"\u53d1\u8d27")))}},{key:"renderPayingProductDialog",value:function(){if(!this.state.product)return null;var e=this.state.winner,t="";return e&&("\u8f93\u5165"+e.accountId+"\u7684\u5bc6\u7801",t=e.accountId),o.a.createElement(y.a,{isOpen:this.state.paying,toggle:this.togglePay10p.bind(this),className:"modal-info "+this.props.className},o.a.createElement(S.a,{toggle:this.togglePay10p.bind(this)},t,"\u4e70\u5bb6\u53d1\u9001\u6536\u8d27\u5730\u5740"),o.a.createElement(C.a,null,o.a.createElement("p",null,"\u7269\u54c1: ",this.state.product.title),o.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206"),o.a.createElement("p",null,"\u5356\u5bb6\u4fdd\u8bc1\u91d1:",this.state.product.guarantee," \u79ef\u5206"),o.a.createElement("p",null,"\u62a2\u8d2d\u4ef7:",this.state.product.price/10," \u79ef\u5206"),o.a.createElement(m.a,null,o.a.createElement(p.a,{htmlFor:"appendedInputButtons"},"\u771e\u5ba2\u8d26\u6237\u5bc6\u7801:"),o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,null,o.a.createElement(w.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(1),o.a.createElement(m.a,null,o.a.createElement("div",{className:"controls"},o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u6536\u8d27\u4eba:")),o.a.createElement(d.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateContact.bind(this),placeholder:"(\u6536\u8d27\u4eba)"})),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u7535\u8bdd:")),o.a.createElement(d.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updatePhone.bind(this),placeholder:"(\u7535\u8bdd)"})),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u6536\u8d27\u5730\u5740:")),o.a.createElement(d.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateAddress.bind(this),placeholder:"(\u6536\u8d27\u5730\u5740)"})),o.a.createElement(g.a,{className:"input-prepend"},o.a.createElement(b.a,{addonType:"prepend"},o.a.createElement(k.a,null,"\u52a0\u5bc6\u5730\u5740:")),o.a.createElement(d.a,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.addressBlock})))),o.a.createElement(m.a,null,o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4fdd\u62a4\u7528\u6237\u9690\u79c1\u3002\u6536\u8d27\u5730\u5740\u52a0\u5bc6\u540e\u53ea\u6709\u5356\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b")),o.a.createElement(I.a,{color:"danger"},o.a.createElement("small",null,"\u4e70\u5bb6\u4ed8\u6b3e\u4e09\u5929\u540e\u5356\u5bb6\u672a\u53d1\u8d27\uff0c\u4e70\u5bb6\u8d26\u6237\u5c06\u81ea\u52a8\u5168\u90e8\u9000\u6b3e\u5e76\u8865\u507f\u5546\u54c1\u4fdd\u8bc1\u91d1\u3002"))),o.a.createElement(m.a,null,this.renderdialogMsg())),o.a.createElement(D.a,null,o.a.createElement(u.a,{color:"danger",onClick:this.togglePay10p.bind(this)},"\u53d6\u6d88"),this.renderPayActionButton()))}},{key:"renderPayActionButton",value:function(){return this.state.success?null:o.a.createElement(u.a,{color:"danger",onClick:this.doPaying.bind(this)},"\u53d1\u9001\u5730\u5740\u7ed9\u5356\u5bb6")}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderActionButtons(),this.renderPayingProductDialog(),this.renderDropDialog(),this.renderDeliverProductDialog(),this.renderWinnerConfirmedProductDialog(),this.renderWinner7dayRefundDialog(),this.renderIssueDialog(),this.renderRejectConfirmDialog(),this.renderIssueVotes(),this.renderInviteVotes(),this.renderDecryptDialog())}}]),a}(c.Component));t.a=U}).call(this,a(7).Buffer)},924:function(e,t,a){"use strict";a.r(t),function(e){var n=a(51),s=a(21),l=a(22),i=a(24),r=a(23),c=a(25),o=a(0),u=a.n(o),d=a(168),h=a(228),p=a(66),m=a(67),g=a(393),E=a(826),f=a(827),v=a(229),b=a(232),k=a(65),y=a(89),S=a(64),C=a(77),I=a(33),D=a(78),P=a(90),N=a(130),j=a(397),T=a(394),O=a(395),w=a(131),x=a(128),M=a(129),A=a(167),B=a(13),R=a(127),F=a(825),H=a(391),J=a(392),L=a(835),z=(a(831),a(830),a(834)),V=a(3),U=a.n(V),W=a(233),_=a.n(W),q=(a(400),a(68)),Z=a(169),G=a(73),K=a(880),Q=a(132),X=a(856),Y=a(79),$=a(30),ee=$.getTorrentHash,te=$.loadProductList,ae=$.loadProduct,ne=$.doBShopTransaction,se=$.getProductStatus,le=$.loadProductDetails,ie=$.loadJoinTransactions,re=$.loadIssueTransactions,ce=$.shareEncrypt,oe=$.getProductNextStep,ue=a(857),de=function(t){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(r.a)(a).call(this,e))).deadline=5,t.fee="1",t.guarantee="2",t.state={account:{},list:[],page:1,joinsPage:1,addProduct:!1,join:!1,detailProduct:null,detail:!1,paying:null,activeTab:"0",detailTab:"0",joins:null,showAccount:!1,content:"\u5728\u6b64\u7f16\u8f91\u7269\u54c1\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u6240\u5728\u57ce\u5e02\uff0c\u8054\u7cfb\u65b9\u5f0f\u7b49\u4fe1\u606f.",filterValue:null,success:!1,issuePage:1,product:{}},t.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],[{align:[]},"direction"],["bold","italic","underline","strike","blockquote","code-block"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],clipboard:{matchVisual:!1}},t}return Object(c.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("plist did mount");var t=Object(B.loadLocalAccount)();t&&t.secret&&(this.secret=t.secret),this.setState({account:t});var a=window.location.hash,n=null;if(a){var s=a.indexOf("#",1);s>0&&(s=(n=a.substr(s+1,40)).indexOf("#",1))>0&&(n=n.substr(0,s))}setTimeout(function(){n?ae(e.onProductList.bind(e),n):te(e.onProductList.bind(e),1,e.state.activeTab)}.bind(this),500)}},{key:"componentWillUnmount",value:function(){console.log("plist will unmount")}},{key:"onProductList",value:function(e,t){e?this.setState({list:t}):this.setState({list:[]})}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,te(this.onProductList.bind(this),this.state.page,this.state.activeTab,"0",this.state.filterValue))}},{key:"nextPage",value:function(){this.state.page++,te(this.onProductList.bind(this),this.state.page,this.state.activeTab,"0",this.state.filterValue)}},{key:"filterBlocks",value:function(){this.setState({page:1}),te(this.onProductList.bind(this),1,this.state.activeTab,"0",this.state.filterValue)}},{key:"togglePublishProduct",value:function(){this.setState({addProduct:!this.state.addProduct,success:!1})}},{key:"toggleJoin",value:function(){this.setState({join:!this.state.join,joinsPage:1,success:!1,dialogMsg:""})}},{key:"toggleDetail",value:function(){this.setState({detail:!this.state.detail,issues:null,joins:null,detailTab:"0",issuePage:1})}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(B.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"updateFee",value:function(e){e&&e.target&&(this.fee=e.target.value,0==this.fee.length&&(this.fee=1))}},{key:"updatePrice",value:function(e){e&&e.target&&(this.price=e.target.value)}},{key:"updateExpire",value:function(e){e&&e.target&&(this.expire=e.target.value)}},{key:"updateQuality",value:function(e){e&&e.target&&(this.quality=e.target.value)}},{key:"updateGuarantee",value:function(e){e&&e.target&&(this.guarantee=e.target.value)}},{key:"updateTags",value:function(e){e&&e.target&&(this.tags=e.target.value)}},{key:"updateDeadline",value:function(e){e&&e.target&&(this.deadline=e.target.value,0==this.deadline.length&&(this.deadline=5))}},{key:"updateTitle",value:function(e){e&&e.target&&(this.title=e.target.value)}},{key:"updateAddress",value:function(e){e&&e.target&&(this.address=e.target.value,this.updateAddressBlock())}},{key:"updateContact",value:function(e){e&&e.target&&(this.contact=e.target.value,this.updateAddressBlock())}},{key:"updatePhone",value:function(e){e&&e.target&&(this.phone=e.target.value,this.updateAddressBlock())}},{key:"updateAddressBlock",value:function(){var e={contract:this.contact,address:this.address,phone:this.phone};e=JSON.stringify(e);var t=this.state.productDetail.seller,a=ce(this.secret,t,this.state.product.transactionId,e);this.setState({addressBlock:a,addressHash:""})}},{key:"doJoin",value:function(){var e=this;if(this.joinAmount){var t=this.state.product.transactionId,a=Object(B.createPeerId)(this.secret),n={action:"transaction",type:"sjoin",amount:this.joinAmount,fee:this.fee,price:this.price,dealine:this.deadline,sid:t,pk:a.pk,accountId:a.aid};ne(this.secret,n,function(t,a){t&&a&&a.ok?(Object(B.saveUserSec)(e.secret),e.setState({dialogMsg:"\u6210\u529f,\u7b49\u5f85\u673a\u5668\u4eba\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f).",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):e.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}else this.setState({dialogMsg:"\u62a2\u8d2d\u4ef7\u683c\u9519\u8bef"})}},{key:"uploadThumbnail",value:function(e){var t=this.state.avatar,a={url:Object(B.getFileHost)()+"/upthumbnail/"+e+"/token1",body:t,json:!1};Y.concat(a,function(e,t,a){})}},{key:"publishProduct",value:function(){var t=this;if(!this.price||parseInt(this.price)<10)this.setState({dialogMsg:"\u5546\u54c1\u4ef7\u683c\u6700\u5c0f\u4e3a10\u79ef\u5206"});else{var a={tags:this.tags,title:this.title,address:"",content:"",quality:0},n=Object(B.createPeerId)(this.secret),s=JSON.stringify(a),l=new e(s).toString("base64"),i=this.state.content;i='<html><head><meta charset="UTF-8"><title>'+this.title+"</title></head><p>"+i+"</p></html>";var r=ee(i),c={action:"transaction",type:"shopshare",productJson:l,guarantee:this.guarantee,fee:this.fee,price:this.price,expire:this.expire,dealine:this.deadline,pk:n.pk,accountId:n.aid,productDetail:null,digest:r};ne(this.secret,c,function(e,a){if(e&&a&&a.ok){Object(B.saveUserSec)(t.secret),t.state.avatar&&t.uploadThumbnail(a.productId),t.uploadNews(a.productId,i);Object(B.getCurrentHost)(),a.transactionId;t.setState({dialogMsg:"\u53d1\u5e03\u6210\u529f,\u673a\u5668\u4eba\u9a8c\u8bc1\u540e(\u5927\u7ea6\u4e00\u5206\u949f)\u5373\u53ef\u62a2\u8d2d.",success:!0})}else a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002\u8bf7\u5145\u503c\u6216\u53bb\u670b\u53cb\u5708\u9886\u53d6\u73b0\u91d1\u7ea2\u5305\u3002",renderDesposit:!0}):t.setState({dialogMsg:"\u5931\u8d25"})}.bind(this))}}},{key:"uploadNews",value:function(t,a){console.log("upload news not done yet");var n=e.from(a).toString("base64"),s={url:Object(B.getFileHost)()+"/uphtml/"+t+"/token1",body:n,json:!1};Y.concat(s,function(e,t,a){})}},{key:"handleChange",value:function(e){this.setState({content:e})}},{key:"rederAddProductDialog",value:function(){var e=this;return u.a.createElement(w.a,{isOpen:this.state.addProduct,toggle:this.togglePublishProduct.bind(this),className:"modal-info "+this.props.className},u.a.createElement(x.a,{toggle:this.togglePublishProduct.bind(this)},"\u51fa\u552e\u7269\u54c1"),u.a.createElement(M.a,null,u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(G.a,{onSecret:this.onSecret.bind(this)}))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,"\u7269\u54c1\u540d\u79f0:")),u.a.createElement(C.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTitle.bind(this),placeholder:"\u7269\u54c1\u540d\u79f0"})))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,"\u7269\u54c1\u6807\u7b7e:")),u.a.createElement(C.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTags.bind(this),placeholder:"\u5546\u54c1\u5173\u952e\u5b57\uff0c\u65b9\u4fbf\u641c\u7d22"})))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,u.a.createElement(Z.a,{id:"min123",text:"\u4ef7\u683c:",content:"\u7269\u54c1\u5305\u90ae\u4ef7\u683c\uff0c\u6700\u4f4e10\u79ef\u5206\u3002\u53d1\u5e03\u540e\u4e70\u5bb6\u4ee5\u5546\u54c1\u4ef7\u683c\u4e00\u6298\u8d77\u52a0\u4ef7\u62a2\u8d2d,\u4ef7\u683c\u9ad8\u8005\u62a2\u8d2d\u6210\u529f\u51e0\u7387\u9ad8\uff0c\u6210\u4ea4\u4ef7\u4f4e\u4e8e\u5305\u90ae\u4ef7,\u7cfb\u7edf\u4e3a\u5356\u5bb6\u8865\u9f50\u5dee\u4ef7,\u9ad8\u4e8e\u5305\u90ae\u4ef7\u5168\u90e8\u5f52\u5356\u5bb6\u3002\u6240\u6709\u5546\u54c18\u5929\u65e0\u7406\u7531\u9000\u8d27\uff0c\u9000\u8d27\u540e\u7cfb\u7edf\u673a\u5668\u4eba\u81ea\u52a8\u8865\u507f\u5356\u5bb6\u56fa\u5b9a\u91d1\u989d\u3002"}))),u.a.createElement(C.a,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updatePrice.bind(this),placeholder:"\u7269\u54c1\u5305\u90ae\u4ef7\u683c\uff0c\u6700\u4f4e10\u79ef\u5206"}),u.a.createElement(y.a,{addonType:"append"},u.a.createElement(S.a,null,"\u79ef\u5206"))))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,u.a.createElement(Z.a,{id:"min123",text:"\u4fdd\u8bc1\u91d1:",content:"\u5356\u5bb6\u4fdd\u8bc1\u91d1\uff0c\u6700\u5c0f2\u79ef\u5206\uff0c\u4fdd\u8bc1\u4ea4\u6613\u771f\u5b9e\u53ef\u9760\u3002\u4fdd\u8bc1\u91d1\u6709\u52a9\u4e8e\u63d0\u9ad8\u4e70\u5bb6\u62a2\u8d2d\u79ef\u6781\u6027\u3002\u4ea4\u6613\u7ed3\u675f\u81ea\u52a8\u9000\u56de\u5356\u5bb6\u300215\u5929\u65e0\u4eba\u8d2d\u4e70\uff0c\u5219\u4ea4\u6613\u5173\u95ed\uff0c\u7cfb\u7edf\u673a\u5668\u4eba\u81ea\u52a8\u9000\u56de\u4fdd\u8bc1\u91d1."}))),u.a.createElement(C.a,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updateGuarantee.bind(this),placeholder:"\u4fdd\u8bc1\u91d1\uff0c\u4ea4\u6613\u7ed3\u675f\u540e\u81ea\u52a8\u9000\u56de"}),u.a.createElement(y.a,{addonType:"append"},u.a.createElement(S.a,null,"\u79ef\u5206"))))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,u.a.createElement(Z.a,{id:"min123",text:"\u673a\u5668\u4eba\u8d39:",content:"\u7cfb\u7edf\u673a\u5668\u4eba\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u56fa\u5b9a\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u673a\u5668\u4eba\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c,\u540c\u65f6\u83b7\u5f97\u673a\u5668\u4eba\u8d39\u3002"}))),u.a.createElement(C.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"\u673a\u5668\u4eba\u8d39\uff0c\u6700\u5c110.1\u79ef\u5206"}),u.a.createElement(y.a,{addonType:"append"},u.a.createElement(S.a,null,"\u79ef\u5206"))))),this.renderDeadline(),u.a.createElement(D.a,null,u.a.createElement(X.a,{title:"\u6dfb\u52a0\u5546\u54c1\u6807\u9898\u7f29\u7565\u56fe",onFinish:function(t){if(t){var a=t.split(";base64,")[1];e.setState({avatar:a})}}})),u.a.createElement(D.a,null,u.a.createElement(P.a,{htmlFor:"appendedInputButtons"},"\u5546\u54c1\u4ecb\u7ecd:"),u.a.createElement(R.a,null,u.a.createElement("small",null,"\u7b80\u5355\u6587\u5b57\u63cf\u8ff0\uff0c\u5185\u5bb9\u592a\u591a\u4f1a\u5f71\u54cd\u5904\u7406\u901f\u5ea6.\u63d0\u4ea4\u540e\u4e0d\u53ef\u4fee\u6539")),u.a.createElement(_.a,{value:this.state.content,modules:this.modules,onChange:this.handleChange.bind(this)})),u.a.createElement(D.a,null,this.renderdialogMsg())),u.a.createElement(A.a,null,u.a.createElement(I.a,{color:"danger",onClick:this.togglePublishProduct.bind(this)},"\u5173\u95ed"),u.a.createElement(I.a,{color:"danger",hidden:this.state.success,onClick:function(t){e.setState({dialogMsg:"\u53d1\u5e03\u4e2d,\u6709\u5927\u56fe\u7247\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f"}),setTimeout(function(){e.publishProduct()},200)}.bind(this)},"\u53d1\u5e03")))}},{key:"renderDeadline",value:function(){return null}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?u.a.createElement("div",null,u.a.createElement(P.a,null,this.state.dialogMsg),u.a.createElement(Q.a,null)):this.state.dialogMsg?u.a.createElement(P.a,null,this.state.dialogMsg):null}},{key:"setFilter",value:function(e){this.setState({page:1,activeTab:e,filterOption:this.filterMsg[e]})}},{key:"upateFilterValue",value:function(t){if(t&&t.target){var a=t.target.value;a.length>0?(a=new e(a).toString("base64"),this.setState({filterValue:a})):te(this.onProductList.bind(this),1,this.state.activeTab)}}},{key:"updateJoinAmount",value:function(e){e&&e.target&&(this.joinAmount=e.target.value)}},{key:"renderFilterOptions",value:function(){var e=this;return this.filterOptions.map(function(t,a){return u.a.createElement(N.a,{onClick:function(t){e.setFilter(a)}},t)})}},{key:"joinProduct",value:function(e){this.setState({product:e}),this.toggleJoin()}},{key:"showDetailDialog",value:function(e){var t=this;this.setState({product:e}),this.toggleDetail(),setTimeout(function(){le(e,function(e,a){if(e&&a){t.setState({productDetail:a});var n=a.joins;n&&t.setState({joins:n})}})}.bind(this),500)}},{key:"preJoinsPage",value:function(){var e=this;this.state.joinsPage>1&&this.state.joinsPage--,ie(this.state.product,this.state.joinsPage,6,function(t,a){t&&a&&e.setState({joins:a})})}},{key:"nextJoinsPage",value:function(){var e=this;this.state.joinsPage++,ie(this.state.product,this.state.joinsPage,6,function(t,a){t&&a&&e.setState({joins:a})})}},{key:"onDetailTabClicked",value:function(e){var t=this;this.state.detailTab!==e&&(this.setState({detailTab:e}),"1"===e&&ie(this.state.product,this.state.joinsPage,6,function(e,a){e&&a&&t.setState({joins:a})}),"2"===e&&re(this.state.product,this.state.issuePage,6,function(e,a){e&&a&&t.setState({issues:a})}))}},{key:"renderJoinTransactions",value:function(){var e=this,t=this.state.joins;return t?t.map(function(t){var a=ue(t.time).format("MM-DD HH:mm"),n=t.winner?u.a.createElement("span",{style:{color:"red"}},"\u62a2\u8d2d\u6210\u529f"):"\u7b49\u5f85\u9000\u6b3e";return e.state.product.status>2&&(n=t.winner?u.a.createElement("span",{style:{color:"red"}},"\u62a2\u8d2d\u6210\u529f"):"\u5df2\u9000\u6b3e",11==e.state.product.status&&(n="\u5df2\u9000\u6b3e")),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(Z.a,{id:"tamts",text:n,content:"\u62a2\u8d2d\u5173\u95ed\u4e4b\u524d\u7ed3\u679c\u4e3a\u4e34\u65f6\u8ba1\u7b97\u7ed3\u679c\u3002\u5982\u679c\u6709\u65b0\u7684\u62a2\u8d2d\u8005\u52a0\u5165\uff0c\u62a2\u8d2d\u6210\u529f\u8d26\u6237\u4f1a\u91cd\u65b0\u8ba1\u7b97."})),u.a.createElement("td",null,u.a.createElement(q.a,{rsId:t.accountId})),u.a.createElement("td",null,t.amount,"\u79ef\u5206"),u.a.createElement("td",null,a))}.bind(this)):null}},{key:"renderProductTabs",value:function(){var e=this;if("0"===this.state.detailTab){var t=this.state.productDetail.product.productId,a=Object(B.getFileHost)()+"/html/0/"+t;return u.a.createElement("iframe",{width:"100%",height:"100%",frameborder:"0",name:"_blank",src:a})}return"1"===this.state.detailTab?u.a.createElement("div",null,u.a.createElement(d.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},u.a.createElement("tbody",null,this.renderJoinTransactions())),u.a.createElement(h.a,null,u.a.createElement(p.a,null,u.a.createElement(m.a,{previous:!0,tag:"button",onClick:function(t){e.preJoinsPage()}},"-")),u.a.createElement(p.a,{active:!0},u.a.createElement(m.a,{tag:"button"},this.state.joinsPage)),u.a.createElement(p.a,null,u.a.createElement(m.a,{next:!0,tag:"button",onClick:function(t){e.nextJoinsPage()}},"+")))):"2"===this.state.detailTab?u.a.createElement(d.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u6295\u7968\u8d26\u6237"),u.a.createElement("th",null,"\u4e70\u5bb6%"),u.a.createElement("th",null,"\u5356\u5bb6%"),u.a.createElement("th",null,"\u65f6\u95f4"),u.a.createElement("th",null,"\u8bf4\u660e"))),u.a.createElement("tbody",null,this.renderIssueTransactions()),u.a.createElement(h.a,null,u.a.createElement(p.a,null,u.a.createElement(m.a,{previous:!0,tag:"button",onClick:function(t){e.preIssuePage()}},"-")),u.a.createElement(p.a,{active:!0},u.a.createElement(m.a,{tag:"button"},this.state.issuePage)),u.a.createElement(p.a,null,u.a.createElement(m.a,{next:!0,tag:"button",onClick:function(t){e.nextIssuePage()}},"+")))):void 0}},{key:"preIssuePage",value:function(){var e=this;this.state.issuePage--,re(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"nextIssuePage",value:function(){var e=this;this.state.issuePage++,re(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"renderIssueTransactions",value:function(){var t=this.state.issues;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString(),s="";t.info&&(s=new e(t.info,"base64").toString());var l="black";return t.luckey&&(l="red"),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(q.a,{rsId:t.from})),u.a.createElement("td",{style:{color:l}},t.wp,"%"),u.a.createElement("td",{style:{color:l}},t.sp,"%"),u.a.createElement("td",null,n),u.a.createElement("td",null,s))}.bind(this)):null}},{key:"renderProductDetail",value:function(){var e=this;if(!this.state.productDetail)return null;var t=this.state.productDetail.joinsCount;return u.a.createElement("div",null,u.a.createElement(F.a,{tabs:!0},u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"0"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("0")}},u.a.createElement("i",{className:"icon-calculator"}),u.a.createElement(g.a,{color:"success"},"\u5546\u54c1\u4fe1\u606f) "))),u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"1"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("1")}},u.a.createElement("i",{className:"icon-basket-loaded"}),u.a.createElement(g.a,{pill:!0,color:"danger"},"\u62a2\u8d2d\u8bb0\u5f55-",t))),this.renderIssueVoteTab()),this.renderProductTabs())}},{key:"renderIssueVoteTab",value:function(){var e=this,t=this.state.productDetail.issues.count;return this.state.product.issue?u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"2"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("2")}},u.a.createElement("i",{className:"icon-basket-loaded"}),u.a.createElement(g.a,{pill:!0,color:"danger"},"\u6295\u7968\u5217\u8868-",t))):null}},{key:"renderPay10pbutton",value:function(){if(!this.state.productDetail)return null;var e=this.state.productDetail.winner;return e?u.a.createElement(L.a,null,u.a.createElement(Z.a,{id:"wind123",text:"\u62a2\u8d2d\u6210\u529f\u8d26\u6237: ("+e.amount+"\u79ef\u5206)",content:"\u7cfb\u7edf\u5728\u6240\u6709\u62a2\u8d2d\u7528\u6237\u4e2d\u968f\u673a\u8ba1\u7b97\u4e00\u4f4d\u6210\u529f\u8005\uff0c\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u6700\u540e\u4e00\u4f4d\u62a2\u8d2d\u7528\u6237\u7684\u4ea4\u6613\u6570\u636e\u6709\u5173\uff0c\u5728\u505c\u6b62\u8d2d\u4e70\u524d\uff0c\u6bcf\u6b21\u6709\u65b0\u7684\u7528\u6237\u52a0\u5165\u90fd\u4f1a\u91cd\u65b0\u8ba1\u7b97\u6210\u529f\u8005\u8d26\u6237\u3002\u6240\u6709\u6570\u636e\u4e0e\u7b97\u6cd5\u90fd\u662f\u516c\u5f00\uff0c\u53ef\u4ee5\u91cd\u590d\u9a8c\u8bc1\u7684\u3002"}),u.a.createElement("div",null,u.a.createElement(q.a,{rsId:e.accountId})),u.a.createElement(K.a,{product:this.state.product,productDetail:this.state.productDetail,winner:this.state.productDetail.winner})):null}},{key:"renderSteps",value:function(){return null}},{key:"renderIssueVoteList",value:function(){if(!this.state.productDetail||!this.state.productDetail.issues)return null;var e=this.state.productDetail.issues.count,t=this.state.productDetail.issues.result.sp,a=this.state.productDetail.issues.result.wp,n=this.state.productDetail.issues.result.voter;return this.state.product.issue?u.a.createElement("div",null,u.a.createElement(L.a,null,u.a.createElement(Z.a,{id:"vw123",text:"\u6295\u7968\u83b7\u5956\u52b1\u8d26\u6237:",content:"\u4efb\u4f55\u8d26\u6237\u90fd\u53ef\u4ee5\u6295\u7968\u5206\u914d\u603b\u91d1\u989d\uff08\u5546\u54c1\u4ef7\u683c+\u5356\u5bb6\u4fdd\u8bc1\u91d1\uff09\u768490%\u7ed9\u4e70\u5356\u53cc\u65b9\uff0c\u5e2e\u52a9\u89e3\u51b3\u7ea0\u7eb7\uff0c\u6295\u7968\u7ed3\u675f\u7cfb\u7edf\u5c06\u968f\u673a\u9009\u53d6\u4e00\u6279\u6295\u7968\u7ed3\u679c\u5e73\u5747\u503c\u4f5c\u4e3a\u6700\u7ec8\u4e70\u5356\u53cc\u65b9\u9000\u6b3e\u91d1\u989d\u3002\u540c\u65f6\u81ea\u52a8\u628a\u603b\u91d1\u989d10%\u5956\u52b1\u7ed9\u4e0e\u6295\u7968\u7ed3\u679c\u6700\u63a5\u8fd1\u7684\u8d26\u6237\u3002"})," ",u.a.createElement(q.a,{rsId:n})," "),u.a.createElement(L.a,null,"\u5f53\u524d\u6295\u7968\u603b\u8ba1: ",e,"\u7968"),u.a.createElement(L.a,null,"\u6295\u7968\u7ed3\u679c\u4e70\u5bb6\u5e94\u9000\u6b3e: ",a,"%\uff0c\u5356\u5bb6\u5e94\u9000\u6b3e: ",t,"%")):null}},{key:"renderProductDetailDialog",value:function(){var e,t="";if(this.state.product){var a=new Date;this.state.productDetail&&(a.setTime(this.state.productDetail.product.createTime),e=a.toLocaleString()),2==this.state.product.status&&this.state.productDetail&&this.state.productDetail.product.due&&(t=" \u8fd8\u6709"+this.state.productDetail.product.due+"\u5206\u949f\u5173\u95ed\u62a2\u8d2d\u3002")}return u.a.createElement(w.a,{isOpen:this.state.detail,toggle:this.toggleDetail.bind(this),className:"modal-info "+this.props.className},u.a.createElement(x.a,{toggle:this.toggleDetail.bind(this)},"\u5546\u54c1\u8be6\u7ec6\u4fe1\u606f"),u.a.createElement(M.a,null,u.a.createElement(z.a,null,u.a.createElement(L.a,null,"\u5546\u54c1\uff1a",this.state.product.title),u.a.createElement(L.a,null,"\u5356\u5bb6\uff1a",u.a.createElement(q.a,{rsId:this.state.product.senderId})),u.a.createElement(L.a,null,"\u4e0a\u67b6\u65f6\u95f4\uff1a",e),u.a.createElement(L.a,null,"\u6807\u7b7e\uff1a",this.state.product.tags),u.a.createElement(L.a,null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206 (\u62a2\u8d2d\u4ef7:",this.state.product.price/10," \u79ef\u5206-\u5168\u56fd\u5305\u90ae-8\u5929\u65e0\u7406\u7531\u9000\u8d27) "),u.a.createElement(L.a,null,"\u62a2\u8d2d\u603b\u91d1\u989d:",u.a.createElement(Z.a,{id:"tamt",text:this.state.product.amout+"\u79ef\u5206",content:"\u62a2\u8d2d\u603b\u91d1\u989d\u5927\u4e8e\u5546\u54c1\u4ef7\u683c50\u500d\u6216\u5355\u4e2a\u4e70\u5bb6\u62a2\u8d2d\u91d1\u989d\u8fbe\u5230\u5546\u54c1\u4ef7\u683c\u768416\u5c0f\u65f6\u540e\u505c\u6b62\u62a2\u8d2d\u3002\u7cfb\u7edf\u968f\u673a\u9009\u53d6\u4e00\u540d\u6210\u529f\u8005\uff0c\u5e76\u81ea\u52a8\u9000\u6b3e\u7ed9\u62a2\u8d2d\u672a\u6210\u529f\u8005\u3002\u6210\u529f\u8005\u53d1\u9001\u6536\u8d27\u5730\u5740\u7b49\u4fe1\u606f\u540e\u5356\u5bb6\u53d1\u8d27\u3002\u7cfb\u7edf\u8865\u507f\u5356\u5bb6\u5dee\u4ef7\u3002"})," ",t),u.a.createElement(L.a,null,"\u5356\u5bb6\u4fdd\u8bc1\u91d1:",u.a.createElement(Z.a,{id:"tamgr",text:this.state.product.guarantee+"\u79ef\u5206",content:"\u5356\u5bb6\u5728\u5546\u54c1\u53d1\u5e03\u65f6\u5019\u652f\u4ed8\u7ed9\u5e73\u53f0\u7684\u4fdd\u8bc1\u91d1,\u4fdd\u8bc1\u91d1\u4fdd\u969c\u5546\u54c1\u771f\u5b9e\u4e0e\u4ea4\u6613\u771f\u5b9e\u6027.\u4ea4\u6613\u7ed3\u675f\u4fdd\u8bc1\u91d1\u81ea\u52a8\u9000\u56de\u5230\u5356\u5bb6\u8d26\u6237.\u865a\u5047\u4ea4\u6613\u5168\u90e8\u91d1\u989d\u8865\u507f\u7ed9\u4e70\u5bb6."})),u.a.createElement(L.a,null,u.a.createElement(he,{mode:"step",product:this.state.product})),this.renderPay10pbutton(),this.renderIssueVoteList(),u.a.createElement(L.a,null,this.renderProductDetail()))),u.a.createElement(A.a,null,u.a.createElement(I.a,{color:"danger",onClick:this.toggleDetail.bind(this)},"\u53d6\u6d88"),this.renderJoinButton1()))}},{key:"renderJoinButton1",value:function(){var e=this;if(!this.state.product)return null;if(this.state.product.status>2)return null;var t=this.state.product.price/10+"\u79ef\u5206\u62a2\u8d2d";return u.a.createElement(I.a,{color:"danger",onClick:function(t){e.toggleDetail(),e.joinProduct(e.state.product)}},t)}},{key:"rederJoinProductDialog",value:function(){if(!this.state.product)return null;var e="\u7ed9\u559c\u6b22\u7684\u5546\u54c1\u4e00\u4e2a\u559c\u6b22\u7684\u4ef7\u683c("+this.state.product.price/10+"\u79ef\u5206\u8d77)",t=this.state.product.price+"\u79ef\u5206\u7acb\u5373\u62a2\u8d2d\u6210\u529f\u3002\u6216\u8005\u4ee5\u539f\u4ef7\u4e00\u6298\u7684\u4ef7\u683c\u8d77\u4efb\u610f\u52a0\u4ef7\u62a2\u8d2d\u3002\u7cfb\u7edf\u673a\u5668\u4eba\u5728\u6240\u6709\u62a2\u8d2d\u8005\u4e2d\u968f\u673a\u9009\u62e9\u62a2\u8d2d\u6210\u529f\u8d26\u6237\uff08\u6240\u6709\u8d26\u6237\u7d2f\u8ba1\u62a2\u8d2d\u91d1\u989d\u5927\u4e8e\u5546\u54c1\u5356\u5bb6\u4ef7\u683c50\u500d\uff09\uff0c\u62a2\u8d2d\u91d1\u989d\u8d8a\u9ad8,\u88ab\u673a\u5668\u4eba\u9009\u4e2d\u6982\u7387\u8d8a\u5927\u3002\u62a2\u8d2d\u672a\u6210\u529f\u5168\u90e8\u81ea\u52a8\u9000\u6b3e\u3002";return u.a.createElement(w.a,{isOpen:this.state.join,toggle:this.toggleJoin.bind(this),className:"modal-info "+this.props.className},u.a.createElement(x.a,{toggle:this.toggleJoin.bind(this)},"\u53c2\u52a0\u62a2\u8d2d"),u.a.createElement(M.a,null,u.a.createElement("p",null,"\u5546\u54c1: ",this.state.product.title),u.a.createElement("p",null,"\u5356\u5bb6\u539f\u4ef7:",this.state.product.price," \u79ef\u5206-\u5168\u56fd\u5305\u90ae-8\u5929\u65e0\u7406\u7531\u9000\u8d27"),u.a.createElement("p",null,"\u62a2\u8d2d\u4ef7:",this.state.product.price/10," \u79ef\u5206\u8d77"),u.a.createElement(D.a,null,u.a.createElement(P.a,{htmlFor:"appendedInputButtons"},"\u8d26\u6237\u5bc6\u7801:"),u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,null,u.a.createElement(G.a,{onSecret:this.onSecret.bind(this)})))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,u.a.createElement(Z.a,{id:"min123",text:"\u53c2\u52a0\u62a2\u8d2d\u91d1\u989d:",content:t}))),u.a.createElement(C.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateJoinAmount.bind(this),placeholder:e}),u.a.createElement(y.a,{addonType:"append"},u.a.createElement(S.a,null,"\u79ef\u5206"))))),u.a.createElement(D.a,null,u.a.createElement("div",{className:"controls"},u.a.createElement(k.a,{className:"input-prepend"},u.a.createElement(y.a,{addonType:"prepend"},u.a.createElement(S.a,null,u.a.createElement(Z.a,{id:"min123",text:"\u673a\u5668\u4eba\u8d39:",content:"\u673a\u5668\u4eba\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684\u8d26\u6237\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u673a\u5668\u4eba\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u673a\u5668\u4eba\u8d39\u3002"}))),u.a.createElement(C.a,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"\u673a\u5668\u4eba\u8d39\uff0c\u6700\u5c110.2"}),u.a.createElement(y.a,{addonType:"append"},u.a.createElement(S.a,null,"\u79ef\u5206"))))),this.renderDeadline(),u.a.createElement(D.a,null,u.a.createElement(R.a,{color:"danger"},u.a.createElement("small",null,"\u62a2\u8d2d\u6210\u529f\u8005\u8d26\u6237\u6839\u636e\u6700\u540e\u4e00\u4f4d\u62a2\u8d2d\u8005\u4fe1\u606f\u8ba1\u7b97\uff0c\u4e0b\u5355\u6210\u529f\u540e\u5373\u53ef\u770b\u5230\u62a2\u8d2d\u7ed3\u679c\u3002")),u.a.createElement(R.a,{color:"danger"},u.a.createElement("small",null,"\u6240\u6709\u5546\u54c1\u652f\u63018\u5929\u65e0\u7406\u7531\u9000\u8d27\uff0c\u9000\u8d27\u60c5\u51b5\u7cfb\u7edf\u81ea\u52a8\u7ed9\u4e0e\u5356\u65b9\u4ea4\u6613\u8865\u507f\u3002")),u.a.createElement(R.a,{color:"danger"},u.a.createElement("small",null,"\u62a2\u8d2d\u603b\u91d1\u989d\u8d85\u8fc7\u5546\u54c1\u4ef7\u683c50\u500d\u6216\u5355\u4e2a\u4e70\u5bb6\u91d1\u989d\u8fbe\u5230\u5546\u54c1\u4ef7\u683c\u540e\uff0c\u7cfb\u7edf\u673a\u5668\u4eba\u968f\u673a\u9009\u53d6\u4e00\u4f4d\u6210\u529f\u8005\u4f5c\u4e3a\u4e70\u5bb6\u3002\u672a\u6210\u529f\u8005\u81ea\u52a8\u9000\u56de\u5168\u90e8\u62a2\u8d2d\u91d1\u989d\u3002"))),u.a.createElement(D.a,null,this.renderdialogMsg())),u.a.createElement(A.a,null,u.a.createElement(I.a,{color:"danger",onClick:this.toggleJoin.bind(this)},"\u53d6\u6d88"),this.renderActionButton()))}},{key:"renderActionButton",value:function(){return this.state.success?null:u.a.createElement(I.a,{color:"danger",onClick:this.doJoin.bind(this)},"\u62a2\u8d2d")}},{key:"renderJoinButton",value:function(e){var t=this;se(e.status);if(e.status>2||e.closed){var a=oe(e.status);return u.a.createElement(I.a,{color:"secondary",onClick:function(a){return t.showDetailDialog(e)}},u.a.createElement("span",null,a))}var n=e.price/10+"\u79ef\u5206\u62a2\u8d2d";return u.a.createElement(I.a,{color:"danger",onClick:function(a){return t.joinProduct(e)}},u.a.createElement("span",null,n))}},{key:"renderProductList",value:function(){var e=this,t=this.state.list;return t?t.map(function(t){var a=new Date;a.setTime(t.createTime);var n=a.toLocaleString(),s=Object(B.getFileHost)()+"/thumbnail/0/"+t.productId;return u.a.createElement("tr",null,u.a.createElement("td",null,e.renderJoinButton(t)),u.a.createElement("td",null,u.a.createElement("img",{onClick:function(a){a.preventDefault(),e.showDetailDialog(t)},style:{width:50,height:50},src:s})),u.a.createElement("td",null,u.a.createElement("div",null,u.a.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.showDetailDialog(t)}},u.a.createElement("span",null,t.title))),u.a.createElement("div",null,u.a.createElement("span",{onClick:function(a){a.preventDefault(),e.showDetailDialog(t)},style:{color:"gray"}},"\u5168\u56fd\u5305\u90ae-8\u5929\u65e0\u7406\u7531\u9000\u8d27"))),u.a.createElement("td",null,n),u.a.createElement("td",null,u.a.createElement(he,{product:t})))}):null}},{key:"renderList",value:function(){var e=this;return this.state.list?u.a.createElement(E.a,null,u.a.createElement(f.a,null,u.a.createElement(v.a,null,u.a.createElement(b.a,null,u.a.createElement(k.a,null,u.a.createElement(C.a,{placeholder:"\u641c\u7d22\u5546\u54c1",onChange:this.upateFilterValue.bind(this)}),u.a.createElement(I.a,{color:"primary",onClick:function(t){return e.filterBlocks()}},u.a.createElement("i",{className:"fa fa-search"}),"\xa0")),u.a.createElement(d.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},u.a.createElement("tbody",null,this.renderProductList())),this.rederAddProductDialog(),this.rederJoinProductDialog(),this.renderProductDetailDialog(),u.a.createElement("nav",null,u.a.createElement(h.a,null,u.a.createElement(p.a,null,u.a.createElement(m.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"\u4e0a\u4e00\u9875")),u.a.createElement(p.a,{active:!0},u.a.createElement(m.a,{tag:"button"},this.state.page)),u.a.createElement(p.a,null,u.a.createElement(m.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"\u4e0b\u4e00\u9875")))),u.a.createElement(I.a,{onClick:function(t){e.togglePublishProduct()},className:"btn-openid btn-brand"},u.a.createElement("i",{className:"fa fa-openid"}),u.a.createElement("span",null,"\u51fa\u552e\u6211\u7684\u7269\u54c1")))))):null}},{key:"onTabClicked",value:function(e){if(this.state.activeTab!==e){this.setState({activeTab:e});var t=0;this.state.account&&(t=this.state.account.aid),te(this.onProductList.bind(this),1,e,t+"")}}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(F.a,{tabs:!0},u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"0"===this.state.activeTab}),onClick:function(){e.onTabClicked("0")}},u.a.createElement("i",{className:"icon-calculator"})," ","\xa0",u.a.createElement(g.a,{color:"info"},"\u4e00\u6298\u62a2\u8d2d-8\u5929\u65e0\u7406\u7531\u9000\u8d27"))),u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"1"===this.state.activeTab}),onClick:function(){e.onTabClicked("1")}},u.a.createElement("i",{className:"icon-basket-loaded"})," ",u.a.createElement("span",{className:"1"===this.state.activeTab?"":"d-none"},"\u62fc\u624b\u6c14"),"\xa0",u.a.createElement(g.a,{pill:!0,color:"info"},"\u6211\u7684\u62a2\u8d2d"))),u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"2"===this.state.activeTab}),onClick:function(){e.onTabClicked("2")}},u.a.createElement("i",{className:"icon-pie-chart"})," ",u.a.createElement("span",{className:"2"===this.state.activeTab?"":"d-none"},"\u6211\u662f\u5356\u5bb6"),u.a.createElement(g.a,{pill:!0,color:"info"},"\u6211\u7684\u7269\u54c1"))),u.a.createElement(H.a,null,u.a.createElement(J.a,{className:U()({active:"3"===this.state.activeTab}),onClick:function(){e.onTabClicked("3")}},u.a.createElement("i",{className:"icon-pie-chart"})," ",u.a.createElement("span",{className:"3"===this.state.activeTab?"":"d-none"},"\u6211\u8981\u6295\u7968"),u.a.createElement(g.a,{pill:!0,color:"info"},"\u7ea0\u7eb7\u4ea4\u6613")))),this.renderList())}}]),a}(o.Component),he=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).toggle=a.toggle.bind(Object(n.a)(Object(n.a)(a))),a.state={popoverOpen:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"renderSteps",value:function(){var e="steps-"+this.props.product.transactionId,t="";this.props.product.steps&&(t=this.props.product.steps.split(";").map(function(e,t){var a;return e&&e.length>0&&(a=se(e)),a?u.a.createElement(L.a,null,t+1+"."+a):null}));var a=oe(this.props.product.status);a&&(a="\u4e0b\u4e00\u6b65-> "+a);var n=u.a.createElement(R.a,{onClick:this.toggle},u.a.createElement("small",null," ",a," ")," ");return 99==this.props.product.status&&(n=null),u.a.createElement("span",null,u.a.createElement(R.a,{id:e,onClick:this.toggle},u.a.createElement("small",null,"\u5f53\u524d\u72b6\u6001: ",se(this.props.product.status),"  ")," "),n,u.a.createElement(j.a,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},u.a.createElement(T.a,null,"\u72b6\u6001\u5217\u8868"),u.a.createElement(O.a,null,t)))}},{key:"render",value:function(){if("step"===this.props.mode)return u.a.createElement(z.a,{size:"sm"},this.renderSteps());var e="Popover-"+this.props.product.transactionId,t=Object(B.getCurrentHost)()+"/#/bshop/product-list#"+this.props.product.transactionId+"#\u3010\u771e\u5ba2\u3011"+this.props.product.title+" "+this.props.product.price/10+"\u79ef\u5206\u62a2\u8d2d.8\u5929\u65e0\u7406\u7531\u9000\u8d27";return u.a.createElement("span",null,u.a.createElement("span",{className:"alert-primary  fade show",id:e,onClick:this.toggle},"\u9080\u8bf7\u597d\u53cb\u62a2\u8d2d"),u.a.createElement(j.a,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},u.a.createElement(T.a,null,"\u5206\u4eab\u8fd9\u4e2a\u5546\u54c1\u7684\u94fe\u63a5"),u.a.createElement(O.a,null,t)))}}]),t}(o.Component);t.default=de}.call(this,a(7).Buffer)}}]);