(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{938:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),r=a(24),c=a(23),s=a(25),i=a(0),o=a.n(i),u=a(229),m=a(232),h=a(168),d=a(228),E=a(66),g=a(67),p=a(33),v=a(127),f=a(131),b=a(128),y=a(129),k=a(167),D=a(30),O=a(68),j=a(13),M=a(363),w=a(233),C=a.n(w),A=(a(400),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={page:1,list:[]},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret,this.account=e),this.account&&this.loadAll()}},{key:"loadAll",value:function(){var e=this,t={type:"list",rsId:this.account.rsId,page:this.state.page};Object(D.doMessage)(t,function(t,a){t&&a.ok&&a.list&&e.setState({list:a.list})}.bind(this))}},{key:"prePage",value:function(){this.state.page--,this.loadAll()}},{key:"nextPage",value:function(){this.state.page++,this.loadAll()}},{key:"renderMessageList",value:function(){var e=this,t=this.state.list;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString();a.setTime(t.update);a.toLocaleString();var l=t.block;return l.length>50&&(l=l.substring(0,40)+" ..."),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(O.a,{rsId:t.from})),o.a.createElement("td",null,o.a.createElement(O.a,{rsId:t.to})),o.a.createElement("td",null,l),o.a.createElement("td",null,n),o.a.createElement("td",null,o.a.createElement("div",null,e.renderDecBtn(t),o.a.createElement(M.a,{to:t.from,toPk:t.pk}))))}):null}},{key:"toggleDecrypt",value:function(){this.setState({decrypt:!this.state.decrypt})}},{key:"renderClearMsgDialog",value:function(){return o.a.createElement(f.a,{isOpen:this.state.decrypt,toggle:this.toggleDecrypt.bind(this),className:"modal-info "+this.props.className},o.a.createElement(b.a,{toggle:this.toggleDecrypt.bind(this)},"Decrypt(\u6d88\u606f\u89e3\u5bc6"),o.a.createElement(y.a,null,o.a.createElement(C.a,{value:this.state.clearMsg})),o.a.createElement(k.a,null,o.a.createElement(p.a,{color:"info",onClick:this.toggleDecrypt.bind(this)},"OK")))}},{key:"renderDecBtn",value:function(e){var t=this;return o.a.createElement(p.a,{color:"primary",size:"sm",onClick:function(a){var n=Object(D.shareDecrypt)(t.secret,e.pk,e.nonce,e.block);t.setState({clearMsg:n,decrypt:!0})}.bind(this)},"Dec(\u89e3\u5bc6)")}},{key:"render",value:function(){var e=this;return o.a.createElement(u.a,null,o.a.createElement(m.a,null,o.a.createElement(h.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u53d1\u9001\u65b9"),o.a.createElement("th",null,"\u63a5\u6536\u65b9"),o.a.createElement("th",null,"\u52a0\u5bc6\u6d88\u606f"),o.a.createElement("th",null,"\u65f6\u95f4"),o.a.createElement("th",null,"\u64cd\u4f5c"))),o.a.createElement("tbody",null,this.renderMessageList(),this.renderClearMsgDialog())),o.a.createElement("nav",null,o.a.createElement(d.a,null,o.a.createElement(E.a,null,o.a.createElement(g.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"\u4e0a\u4e00\u9875")),o.a.createElement(E.a,{active:!0},o.a.createElement(g.a,{tag:"button"},this.state.page)),o.a.createElement(E.a,null,o.a.createElement(g.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"\u4e0b\u4e00\u9875")))),o.a.createElement(v.a,{color:"info"},o.a.createElement("small",null,"\u6240\u6709\u6d88\u606f\u90fd\u5e26\u6709\u6570\u5b57\u7b7e\u540d\u4e0e\u65f6\u95f4\u6233\u3002\u5929\u7136\u5177\u6709\u4e0d\u53ef\u4f2a\u9020\uff0c\u4e0d\u53ef\u62b5\u8d56\u3001\u4e0d\u53ef\u7be1\u6539\u7279\u6027\u3002")),o.a.createElement(v.a,{color:"info"},o.a.createElement("small",null,"\u8d26\u6237\u91d1\u989d\u5168\u90e8\u5927\u4e8e0\u7684\u4e24\u4e2a\u8d26\u6237\u4e4b\u95f4\u624d\u53ef\u4ee5\u53d1\u9001\u6d88\u606f.\u6d88\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u53cc\u65b9\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b."))))}}]),t}(i.Component));t.default=A}}]);
//# sourceMappingURL=18.0c50f5ac.chunk.js.map