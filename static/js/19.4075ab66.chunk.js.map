{"version":3,"sources":["views/ggv/AccountList/AccountList.js"],"names":["get","require","AccountList","props","_this","Object","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_working_dir_flycat_flycat_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","page","state","accounts","transPage","showAccount","accountInfo","filterValue","transactionTab","loadAccountList","filterIdx","query","url","getShareHost","concat","err","res","data","console","log","JSON","parse","setState","e","bind","list","map","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_conponents_AccountDialog__WEBPACK_IMPORTED_MODULE_28__","rsId","height","balance","mined","autoTransactions","getTransactionName","type","from","to","amount","accountTransactions","fee","reactstrap__WEBPACK_IMPORTED_MODULE_6__","hover","bordered","striped","responsive","size","renderAccountTransactionItem","renderAutoTransactionItem","tab","loadAccountTransactions","loadAutoTransactions","_this2","reactstrap__WEBPACK_IMPORTED_MODULE_18__","tabs","reactstrap__WEBPACK_IMPORTED_MODULE_19__","reactstrap__WEBPACK_IMPORTED_MODULE_20__","className","classnames","active","onClick","onTransactionTabClicked","reactstrap__WEBPACK_IMPORTED_MODULE_7__","color","pill","renderAccountTransactions","renderTransactionPagnations","_this3","ok","transactions","_this4","_this5","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","previous","tag","preTransPage","next","nextTransPage","reactstrap__WEBPACK_IMPORTED_MODULE_21__","isOpen","toggle","toggleAccount","reactstrap__WEBPACK_IMPORTED_MODULE_22__","reactstrap__WEBPACK_IMPORTED_MODULE_23__","pk","renderTransactionsTabs","reactstrap__WEBPACK_IMPORTED_MODULE_24__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","target","value","_this6","reactstrap__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","reactstrap__WEBPACK_IMPORTED_MODULE_16__","reactstrap__WEBPACK_IMPORTED_MODULE_17__","placeholder","onChange","updateQueryValue","renderAccountList","rederAccountInfoDialog","prePage","total","nextPage","renderList","Component"],"mappings":"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","file":"static/js/19.4075ab66.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Badge, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { Nav, NavItem, NavLink, Fade, Collapse, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, DropdownToggle } from 'reactstrap'\r\nimport { getTransactionName, getShareHost, loadAccountInfo, calcAccountId, purchaseResource } from '../js/gegeUtil.js'\r\nimport classnames from 'classnames';\r\nimport { loadAccountTransactions, loadAutoTransactions } from '../../eshop/eshop.js'\r\nimport AccountDialog from '../../conponents/AccountDialog'\r\nconst get = require('simple-get')\r\nclass AccountList extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.page = 1;\r\n    this.state = { accounts: null, page: 1, transPage: 1, showAccount: false, accountInfo: null, filterValue: '', transactionTab: '0' }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadAccountList(1, this.state.filterIdx)\r\n  }\r\n\r\n  loadAccountList(page, query) {\r\n    if (!query)\r\n      query = this.state.filterValue;\r\n    let url =  getShareHost() + '/btb?action=listAccount&page=' + page + \"&query=\" + query;\r\n\r\n    get.concat(url, (function (err, res, data) {\r\n      if (err) {\r\n        console.log(err);\r\n        return;\r\n      }\r\n      if (data) {\r\n        try {\r\n          let accounts = JSON.parse(data);\r\n          this.setState({ accounts })\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  prePage() {\r\n    if (this.state.page > 1) {\r\n      this.state.page--\r\n      this.loadAccountList(this.state.page)\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    this.state.page++\r\n    this.loadAccountList(this.state.page)\r\n  }\r\n\r\n  renderAccountList() {\r\n    let list = this.state.accounts.accounts;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      return (<tr>\r\n        <td><AccountDialog rsId={res.rsId} /></td>\r\n        <td>{res.height}</td>\r\n        <td>{res.balance} 积分</td>\r\n        <td>{res.mined} 积分</td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n  renderAutoTransactionItem() {\r\n    let content = this.state.autoTransactions.map((res) => {\r\n      return (<tr>\r\n        <td>{getTransactionName(res.type)}</td>\r\n        <td>{res.from}</td>\r\n        <td>{res.to}</td>\r\n        <td>{res.amount} 积分</td>\r\n        <td>0 积分</td>\r\n        <td>{res.height}</td>\r\n      </tr>)\r\n    });\r\n    return content;\r\n  }\r\n\r\n  renderAccountTransactionItem() {\r\n    let content = this.state.accountTransactions.map((res) => {\r\n      return (<tr>\r\n        <td>{getTransactionName(res.type)}</td>\r\n        <td>{res.from}</td>\r\n        <td>{res.to}</td>\r\n        <td>{res.amount} 积分</td>\r\n        <td>{res.fee} 积分</td>\r\n        <td>{res.height}</td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n  renderAccountTransactions() {\r\n\r\n    if (this.state.transactionTab == '0') {\r\n      if (this.state.accountTransactions) {\r\n        return (<Table hover bordered striped responsive size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>交易类型</th>\r\n              <th>发起账户</th>\r\n              <th>接收账户</th>\r\n              <th>金额</th>\r\n              <th>手续费</th>\r\n              <th>区块高度</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.renderAccountTransactionItem()}\r\n          </tbody>\r\n        </Table>)\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      //show auto transactions\r\n      if (this.state.accountInfo.autoTransactions) {\r\n        return (<Table hover bordered striped responsive size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>交易类型</th>\r\n              <th>发起账户</th>\r\n              <th>接收账户</th>\r\n              <th>金额</th>\r\n              <th>手续费</th>\r\n              <th>区块高度</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.renderAutoTransactionItem()}\r\n          </tbody>\r\n        </Table>)\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  onTransactionTabClicked(tab) {\r\n    if (this.state.transactionTab !== tab) {\r\n      this.setState({\r\n        transactionTab: tab,\r\n      });\r\n      //\r\n      if (tab === '0') {\r\n        //load account transactions\r\n        this.loadAccountTransactions(1);\r\n      }\r\n      if (tab === '1') {\r\n        //load auto transaction\r\n        this.loadAutoTransactions(1);\r\n      }\r\n    }\r\n  }\r\n\r\n  renderTransactionsTabs() {\r\n    return (<div><Nav tabs>\r\n      <NavItem>\r\n        <NavLink\r\n          className={classnames({ active: this.state.transactionTab === '0' })}\r\n          onClick={() => { this.onTransactionTabClicked('0'); }}\r\n        >\r\n          <i className=\"icon-calculator\"></i><Badge\r\n            color=\"success\">账户交易) </Badge>\r\n        </NavLink>\r\n      </NavItem>\r\n      <NavItem>\r\n        <NavLink\r\n          className={classnames({ active: this.state.transactionTab === '1' })}\r\n          onClick={() => { this.onTransactionTabClicked('1'); }}\r\n        >\r\n          <i className=\"icon-basket-loaded\"></i><Badge pill color=\"danger\">机器人交易</Badge>\r\n        </NavLink>\r\n      </NavItem>\r\n    </Nav>\r\n      {this.renderAccountTransactions()}\r\n      {this.renderTransactionPagnations()}\r\n    </div>\r\n    )\r\n  }\r\n\r\n  loadAccountTransactions(page) {\r\n    let rsId = this.state.accountInfo.rsId;\r\n    loadAccountTransactions(rsId, page, 10, ((ok, data) => {\r\n      if (ok && data) {\r\n        let accountTransactions = data.transactions;\r\n        this.setState({ accountTransactions })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  loadAutoTransactions(page) {\r\n    let rsId = this.state.accountInfo.rsId;\r\n    loadAutoTransactions(rsId, page, 10, ((ok, data) => {\r\n      if (ok && data) {\r\n        let autoTransactions = data.transactions;\r\n        this.setState({ autoTransactions })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  preTransPage() {\r\n    if (this.state.transPage > 1) {\r\n      this.state.transPage--\r\n    }\r\n    if (this.state.transactionTab === '0') {\r\n      this.loadAccountTransactions(this.state.transPage)\r\n    } else {\r\n      this.loadAutoTransactions(this.state.transPage);\r\n    }\r\n  }\r\n\r\n  nextTransPage() {\r\n    this.state.transPage++\r\n    if (this.state.transactionTab === '0') {\r\n      this.loadAccountTransactions(this.state.transPage)\r\n    } else {\r\n      this.loadAutoTransactions(this.state.transPage);\r\n    }\r\n  }\r\n\r\n  renderTransactionPagnations() {\r\n    return (<Pagination>\r\n      <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.preTransPage() }}>-</PaginationLink></PaginationItem>\r\n      <PaginationItem active>\r\n        <PaginationLink tag=\"button\">{this.state.transPage}</PaginationLink>\r\n      </PaginationItem>\r\n      <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextTransPage() }}>+</PaginationLink></PaginationItem>\r\n    </Pagination>)\r\n  }\r\n\r\n  rederAccountInfoDialog() {\r\n    if (!this.state.accountInfo)\r\n      return null;\r\n    return (<Modal isOpen={this.state.showAccount} toggle={this.toggleAccount.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleAccount.bind(this)}>账户明细</ModalHeader>\r\n      <ModalBody>\r\n        <p>账户ID: {this.state.accountInfo.rsId}</p>\r\n        <p>账户公钥: {this.state.accountInfo.pk}</p>\r\n        <p>账户余额: {this.state.accountInfo.balance}积分</p>\r\n        <p>交易列表:</p>\r\n        {this.renderTransactionsTabs()}\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleAccount.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  toggleAccount() {\r\n    this.setState({\r\n      showAccount: !this.state.showAccount,\r\n    });\r\n  }\r\n\r\n  showAccountInfo(rsId) {\r\n    this.toggleAccount();\r\n    let url = getShareHost() + '/btb?action=account&rsIdOrPkHex=' + rsId;\r\n    get.concat(url, (function (err, res, data) {\r\n      if (err) {\r\n        // console.log(err);\r\n        return;\r\n      }\r\n      let accountInfo = JSON.parse(data);\r\n      let accountTransactions = accountInfo.transactions;\r\n      this.setState({ accountInfo, accountTransactions })\r\n    }).bind(this))\r\n  }\r\n\r\n\r\n  updateQueryValue(e) {\r\n    if (e && e.target) {\r\n      let value = e.target.value;\r\n      this.setState({ filterValue: value })\r\n    }\r\n  }\r\n\r\n  renderList() {\r\n    let accounts = this.state.accounts;\r\n    if (!accounts)\r\n      return null;\r\n    return (<Row>\r\n      <Col>\r\n        <Card>\r\n          <CardBody>\r\n            <InputGroup>\r\n              <Input placeholder=\"搜索\" onChange={this.updateQueryValue.bind(this)} />\r\n              <Button color=\"primary\" onClick={(e) => this.loadAccountList(1)}>\r\n                <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n            </InputGroup>\r\n            <Table hover bordered striped responsive size=\"sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>账户ID</th>\r\n                  <th>高度</th>\r\n                  <th>余额</th>\r\n                  <th>机器人收入</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.renderAccountList()}\r\n                {this.rederAccountInfoDialog()}\r\n              </tbody>\r\n            </Table>\r\n            <nav>\r\n              <Pagination>\r\n                <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}>上一页</PaginationLink></PaginationItem>\r\n                <PaginationItem active>\r\n                  <PaginationLink tag=\"button\">{this.state.page} / {this.state.accounts.total}</PaginationLink>\r\n                </PaginationItem>\r\n                <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}>下一页</PaginationLink></PaginationItem>\r\n              </Pagination>\r\n            </nav>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        {this.renderList()}\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default AccountList;\r\n"],"sourceRoot":""}